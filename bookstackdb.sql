-- MySQL dump 10.19  Distrib 10.3.31-MariaDB, for debian-linux-gnu (x86_64)
--
-- Host: localhost    Database: bookstackdb
-- ------------------------------------------------------
-- Server version	10.3.31-MariaDB-0+deb10u1

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `activities`
--

DROP TABLE IF EXISTS `activities`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `activities` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `type` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `detail` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `user_id` int(11) NOT NULL,
  `ip` varchar(45) COLLATE utf8mb4_unicode_ci NOT NULL,
  `entity_id` int(11) DEFAULT NULL,
  `entity_type` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `activities_user_id_index` (`user_id`),
  KEY `activities_entity_id_index` (`entity_id`),
  KEY `activities_key_index` (`type`),
  KEY `activities_created_at_index` (`created_at`)
) ENGINE=InnoDB AUTO_INCREMENT=41 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `activities`
--

LOCK TABLES `activities` WRITE;
/*!40000 ALTER TABLE `activities` DISABLE KEYS */;
INSERT INTO `activities` VALUES (1,'auth_login','standard; (1) Admin',1,'192.168.1.13',NULL,NULL,'2021-11-04 16:46:11','2021-11-04 16:46:11'),(2,'auth_login','standard; (1) Admin',1,'192.168.1.13',NULL,NULL,'2021-11-04 16:48:00','2021-11-04 16:48:00'),(3,'bookshelf_create','',1,'192.168.1.13',1,'BookStack\\Bookshelf','2021-11-04 16:49:16','2021-11-04 16:49:16'),(4,'book_create','',1,'192.168.1.13',1,'BookStack\\Book','2021-11-04 16:49:37','2021-11-04 16:49:37'),(5,'bookshelf_update','',1,'192.168.1.13',1,'BookStack\\Bookshelf','2021-11-04 16:49:37','2021-11-04 16:49:37'),(6,'book_create','',1,'192.168.1.13',2,'BookStack\\Book','2021-11-04 16:49:50','2021-11-04 16:49:50'),(7,'bookshelf_update','',1,'192.168.1.13',1,'BookStack\\Bookshelf','2021-11-04 16:49:50','2021-11-04 16:49:50'),(8,'book_create','',1,'192.168.1.13',3,'BookStack\\Book','2021-11-04 16:49:58','2021-11-04 16:49:58'),(9,'bookshelf_update','',1,'192.168.1.13',1,'BookStack\\Bookshelf','2021-11-04 16:49:58','2021-11-04 16:49:58'),(10,'book_update','',1,'192.168.1.13',1,'BookStack\\Book','2021-11-04 16:50:45','2021-11-04 16:50:45'),(11,'book_update','',1,'192.168.1.13',1,'BookStack\\Book','2021-11-04 16:51:23','2021-11-04 16:51:23'),(12,'book_update','',1,'192.168.1.13',3,'BookStack\\Book','2021-11-04 16:52:54','2021-11-04 16:52:54'),(13,'book_update','',1,'192.168.1.13',2,'BookStack\\Book','2021-11-04 16:53:21','2021-11-04 16:53:21'),(14,'page_create','',1,'192.168.1.13',1,'BookStack\\Page','2021-11-04 16:53:35','2021-11-04 16:53:35'),(15,'page_update','',1,'192.168.1.13',1,'BookStack\\Page','2021-11-04 16:54:51','2021-11-04 16:54:51'),(16,'page_update','',1,'192.168.1.13',1,'BookStack\\Page','2021-11-04 16:55:05','2021-11-04 16:55:05'),(17,'page_update','',1,'192.168.1.13',1,'BookStack\\Page','2021-11-04 16:55:25','2021-11-04 16:55:25'),(18,'page_update','',1,'192.168.1.13',1,'BookStack\\Page','2021-11-04 16:55:41','2021-11-04 16:55:41'),(19,'page_update','',1,'192.168.1.13',1,'BookStack\\Page','2021-11-04 16:56:51','2021-11-04 16:56:51'),(20,'page_update','',1,'192.168.1.13',1,'BookStack\\Page','2021-11-04 16:57:18','2021-11-04 16:57:18'),(21,'page_update','',1,'192.168.1.13',1,'BookStack\\Page','2021-11-04 16:57:32','2021-11-04 16:57:32'),(22,'page_update','',1,'192.168.1.13',1,'BookStack\\Page','2021-11-04 16:58:17','2021-11-04 16:58:17'),(23,'page_update','',1,'192.168.1.13',1,'BookStack\\Page','2021-11-04 17:01:51','2021-11-04 17:01:51'),(24,'page_update','',1,'192.168.1.13',1,'BookStack\\Page','2021-11-04 17:06:23','2021-11-04 17:06:23'),(25,'page_create','',1,'192.168.1.13',2,'BookStack\\Page','2021-11-04 17:09:12','2021-11-04 17:09:12'),(26,'page_update','',1,'192.168.1.13',2,'BookStack\\Page','2021-11-04 17:10:19','2021-11-04 17:10:19'),(27,'page_update','',1,'192.168.1.13',2,'BookStack\\Page','2021-11-04 17:10:32','2021-11-04 17:10:32'),(28,'page_update','',1,'192.168.1.13',2,'BookStack\\Page','2021-11-04 17:12:34','2021-11-04 17:12:34'),(29,'page_update','',1,'192.168.1.13',2,'BookStack\\Page','2021-11-04 17:13:10','2021-11-04 17:13:10'),(30,'page_update','',1,'192.168.1.13',2,'BookStack\\Page','2021-11-04 17:14:06','2021-11-04 17:14:06'),(31,'page_update','',1,'192.168.1.13',2,'BookStack\\Page','2021-11-04 17:15:38','2021-11-04 17:15:38'),(32,'page_update','',1,'192.168.1.13',2,'BookStack\\Page','2021-11-04 17:17:09','2021-11-04 17:17:09'),(33,'page_update','',1,'192.168.1.13',2,'BookStack\\Page','2021-11-04 17:24:28','2021-11-04 17:24:28'),(34,'page_update','',1,'192.168.1.13',2,'BookStack\\Page','2021-11-04 17:25:12','2021-11-04 17:25:12'),(35,'page_update','',1,'192.168.1.13',2,'BookStack\\Page','2021-11-04 17:25:39','2021-11-04 17:25:39'),(36,'page_update','',1,'192.168.1.13',2,'BookStack\\Page','2021-11-04 17:25:50','2021-11-04 17:25:50'),(37,'page_update','',1,'192.168.1.13',2,'BookStack\\Page','2021-11-04 17:25:56','2021-11-04 17:25:56'),(38,'auth_login','standard; (1) Admin',1,'192.168.1.14',NULL,NULL,'2021-11-04 19:28:16','2021-11-04 19:28:16'),(39,'auth_login','standard; (1) Admin',1,'192.168.1.14',NULL,NULL,'2021-11-13 07:13:36','2021-11-13 07:13:36'),(40,'auth_login','standard; (1) Admin',1,'192.168.1.14',NULL,NULL,'2021-11-13 12:51:41','2021-11-13 12:51:41');
/*!40000 ALTER TABLE `activities` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `api_tokens`
--

DROP TABLE IF EXISTS `api_tokens`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `api_tokens` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `token_id` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `secret` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `user_id` int(10) unsigned NOT NULL,
  `expires_at` date NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `api_tokens_token_id_unique` (`token_id`),
  KEY `api_tokens_user_id_index` (`user_id`),
  KEY `api_tokens_expires_at_index` (`expires_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `api_tokens`
--

LOCK TABLES `api_tokens` WRITE;
/*!40000 ALTER TABLE `api_tokens` DISABLE KEYS */;
/*!40000 ALTER TABLE `api_tokens` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `attachments`
--

DROP TABLE IF EXISTS `attachments`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `attachments` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `path` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `extension` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `uploaded_to` int(11) NOT NULL,
  `external` tinyint(1) NOT NULL,
  `order` int(11) NOT NULL,
  `created_by` int(11) NOT NULL,
  `updated_by` int(11) NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `attachments_uploaded_to_index` (`uploaded_to`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `attachments`
--

LOCK TABLES `attachments` WRITE;
/*!40000 ALTER TABLE `attachments` DISABLE KEYS */;
/*!40000 ALTER TABLE `attachments` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `books`
--

DROP TABLE IF EXISTS `books`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `books` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `slug` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(11) NOT NULL,
  `updated_by` int(11) NOT NULL,
  `restricted` tinyint(1) NOT NULL DEFAULT 0,
  `image_id` int(11) DEFAULT NULL,
  `deleted_at` timestamp NULL DEFAULT NULL,
  `owned_by` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `books_slug_index` (`slug`),
  KEY `books_created_by_index` (`created_by`),
  KEY `books_updated_by_index` (`updated_by`),
  KEY `books_restricted_index` (`restricted`),
  KEY `books_owned_by_index` (`owned_by`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `books`
--

LOCK TABLES `books` WRITE;
/*!40000 ALTER TABLE `books` DISABLE KEYS */;
INSERT INTO `books` VALUES (1,'1. DEBIAN CONFIGURATION','1-debian-configuration','','2021-11-04 16:49:37','2021-11-04 16:51:23',1,1,0,2,NULL,1),(2,'2. BOOKSTACK','2-bookstack','','2021-11-04 16:49:50','2021-11-04 16:53:21',1,1,0,4,NULL,1),(3,'3. GUACAMOLE','3-guacamole','','2021-11-04 16:49:58','2021-11-04 16:52:54',1,1,0,3,NULL,1);
/*!40000 ALTER TABLE `books` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `bookshelves`
--

DROP TABLE IF EXISTS `bookshelves`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `bookshelves` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(180) COLLATE utf8mb4_unicode_ci NOT NULL,
  `slug` varchar(180) COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `created_by` int(11) DEFAULT NULL,
  `updated_by` int(11) DEFAULT NULL,
  `restricted` tinyint(1) NOT NULL DEFAULT 0,
  `image_id` int(11) DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `deleted_at` timestamp NULL DEFAULT NULL,
  `owned_by` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `bookshelves_slug_index` (`slug`),
  KEY `bookshelves_created_by_index` (`created_by`),
  KEY `bookshelves_updated_by_index` (`updated_by`),
  KEY `bookshelves_restricted_index` (`restricted`),
  KEY `bookshelves_owned_by_index` (`owned_by`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `bookshelves`
--

LOCK TABLES `bookshelves` WRITE;
/*!40000 ALTER TABLE `bookshelves` DISABLE KEYS */;
INSERT INTO `bookshelves` VALUES (1,'1. APPLICATIONS LIBRES','1-applications-libres','',1,1,0,NULL,'2021-11-04 16:49:16','2021-11-04 16:49:16',NULL,1);
/*!40000 ALTER TABLE `bookshelves` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `bookshelves_books`
--

DROP TABLE IF EXISTS `bookshelves_books`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `bookshelves_books` (
  `bookshelf_id` int(10) unsigned NOT NULL,
  `book_id` int(10) unsigned NOT NULL,
  `order` int(10) unsigned NOT NULL,
  PRIMARY KEY (`bookshelf_id`,`book_id`),
  KEY `bookshelves_books_book_id_foreign` (`book_id`),
  CONSTRAINT `bookshelves_books_book_id_foreign` FOREIGN KEY (`book_id`) REFERENCES `books` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `bookshelves_books_bookshelf_id_foreign` FOREIGN KEY (`bookshelf_id`) REFERENCES `bookshelves` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `bookshelves_books`
--

LOCK TABLES `bookshelves_books` WRITE;
/*!40000 ALTER TABLE `bookshelves_books` DISABLE KEYS */;
INSERT INTO `bookshelves_books` VALUES (1,1,1),(1,2,2),(1,3,3);
/*!40000 ALTER TABLE `bookshelves_books` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `cache`
--

DROP TABLE IF EXISTS `cache`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `cache` (
  `key` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `value` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `expiration` int(11) NOT NULL,
  UNIQUE KEY `cache_key_unique` (`key`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `cache`
--

LOCK TABLES `cache` WRITE;
/*!40000 ALTER TABLE `cache` DISABLE KEYS */;
/*!40000 ALTER TABLE `cache` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `chapters`
--

DROP TABLE IF EXISTS `chapters`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `chapters` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `book_id` int(11) NOT NULL,
  `slug` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `name` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `priority` int(11) NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(11) NOT NULL,
  `updated_by` int(11) NOT NULL,
  `restricted` tinyint(1) NOT NULL DEFAULT 0,
  `deleted_at` timestamp NULL DEFAULT NULL,
  `owned_by` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `chapters_slug_index` (`slug`),
  KEY `chapters_book_id_index` (`book_id`),
  KEY `chapters_priority_index` (`priority`),
  KEY `chapters_created_by_index` (`created_by`),
  KEY `chapters_updated_by_index` (`updated_by`),
  KEY `chapters_restricted_index` (`restricted`),
  KEY `chapters_owned_by_index` (`owned_by`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `chapters`
--

LOCK TABLES `chapters` WRITE;
/*!40000 ALTER TABLE `chapters` DISABLE KEYS */;
/*!40000 ALTER TABLE `chapters` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `comments`
--

DROP TABLE IF EXISTS `comments`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comments` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `entity_id` int(10) unsigned NOT NULL,
  `entity_type` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `text` longtext COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `html` longtext COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `parent_id` int(10) unsigned DEFAULT NULL,
  `local_id` int(10) unsigned DEFAULT NULL,
  `created_by` int(10) unsigned NOT NULL,
  `updated_by` int(10) unsigned DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `comments_entity_id_entity_type_index` (`entity_id`,`entity_type`),
  KEY `comments_local_id_index` (`local_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `comments`
--

LOCK TABLES `comments` WRITE;
/*!40000 ALTER TABLE `comments` DISABLE KEYS */;
/*!40000 ALTER TABLE `comments` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `deletions`
--

DROP TABLE IF EXISTS `deletions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `deletions` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `deleted_by` int(11) NOT NULL,
  `deletable_type` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `deletable_id` int(11) NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `deletions_deleted_by_index` (`deleted_by`),
  KEY `deletions_deletable_type_index` (`deletable_type`),
  KEY `deletions_deletable_id_index` (`deletable_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `deletions`
--

LOCK TABLES `deletions` WRITE;
/*!40000 ALTER TABLE `deletions` DISABLE KEYS */;
/*!40000 ALTER TABLE `deletions` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `email_confirmations`
--

DROP TABLE IF EXISTS `email_confirmations`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `email_confirmations` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `token` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `email_confirmations_user_id_index` (`user_id`),
  KEY `email_confirmations_token_index` (`token`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `email_confirmations`
--

LOCK TABLES `email_confirmations` WRITE;
/*!40000 ALTER TABLE `email_confirmations` DISABLE KEYS */;
/*!40000 ALTER TABLE `email_confirmations` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `entity_permissions`
--

DROP TABLE IF EXISTS `entity_permissions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `entity_permissions` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `restrictable_id` int(11) NOT NULL,
  `restrictable_type` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `role_id` int(11) NOT NULL,
  `action` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  PRIMARY KEY (`id`),
  KEY `restrictions_role_id_index` (`role_id`),
  KEY `restrictions_action_index` (`action`),
  KEY `restrictions_restrictable_id_restrictable_type_index` (`restrictable_id`,`restrictable_type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `entity_permissions`
--

LOCK TABLES `entity_permissions` WRITE;
/*!40000 ALTER TABLE `entity_permissions` DISABLE KEYS */;
/*!40000 ALTER TABLE `entity_permissions` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `favourites`
--

DROP TABLE IF EXISTS `favourites`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `favourites` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `favouritable_id` int(11) NOT NULL,
  `favouritable_type` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `favouritable_index` (`favouritable_id`,`favouritable_type`),
  KEY `favourites_user_id_index` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `favourites`
--

LOCK TABLES `favourites` WRITE;
/*!40000 ALTER TABLE `favourites` DISABLE KEYS */;
/*!40000 ALTER TABLE `favourites` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `images`
--

DROP TABLE IF EXISTS `images`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `images` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `url` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(11) NOT NULL,
  `updated_by` int(11) NOT NULL,
  `path` varchar(400) COLLATE utf8mb4_unicode_ci NOT NULL,
  `type` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `uploaded_to` int(11) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  KEY `images_type_index` (`type`),
  KEY `images_uploaded_to_index` (`uploaded_to`)
) ENGINE=InnoDB AUTO_INCREMENT=25 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `images`
--

LOCK TABLES `images` WRITE;
/*!40000 ALTER TABLE `images` DISABLE KEYS */;
INSERT INTO `images` VALUES (2,'6352.jpg','http://wiki.esgi.local/uploads/images/cover_book/2021-11/6352.jpg','2021-11-04 16:51:23','2021-11-04 16:51:23',1,1,'/uploads/images/cover_book/2021-11/6352.jpg','cover_book',1),(3,'Apache-Guacamole-00.jpg','http://wiki.esgi.local/uploads/images/cover_book/2021-11/apache-guacamole-00.jpg','2021-11-04 16:52:54','2021-11-04 16:52:54',1,1,'/uploads/images/cover_book/2021-11/apache-guacamole-00.jpg','cover_book',3),(4,'bookstack.png','http://wiki.esgi.local/uploads/images/cover_book/2021-11/bookstack.png','2021-11-04 16:53:21','2021-11-04 16:53:21',1,1,'/uploads/images/cover_book/2021-11/bookstack.png','cover_book',2),(5,'Capture4.JPG','http://wiki.esgi.local/uploads/images/gallery/2021-11/capture4.JPG','2021-11-04 16:56:15','2021-11-04 16:56:15',1,1,'/uploads/images/gallery/2021-11/capture4.JPG','gallery',1),(6,'Capture5.JPG','http://wiki.esgi.local/uploads/images/gallery/2021-11/capture5.JPG','2021-11-04 16:56:15','2021-11-04 16:56:15',1,1,'/uploads/images/gallery/2021-11/capture5.JPG','gallery',1),(7,'Capture6.JPG','http://wiki.esgi.local/uploads/images/gallery/2021-11/capture6.JPG','2021-11-04 16:56:15','2021-11-04 16:56:15',1,1,'/uploads/images/gallery/2021-11/capture6.JPG','gallery',1),(8,'Capture7.JPG','http://wiki.esgi.local/uploads/images/gallery/2021-11/capture7.JPG','2021-11-04 16:56:15','2021-11-04 16:56:15',1,1,'/uploads/images/gallery/2021-11/capture7.JPG','gallery',1),(9,'Capture8.JPG','http://wiki.esgi.local/uploads/images/gallery/2021-11/capture8.JPG','2021-11-04 16:56:15','2021-11-04 16:56:15',1,1,'/uploads/images/gallery/2021-11/capture8.JPG','gallery',1),(10,'Capture9.JPG','http://wiki.esgi.local/uploads/images/gallery/2021-11/capture9.JPG','2021-11-04 16:56:15','2021-11-04 16:56:15',1,1,'/uploads/images/gallery/2021-11/capture9.JPG','gallery',1),(11,'Capture10.JPG','http://wiki.esgi.local/uploads/images/gallery/2021-11/capture10.JPG','2021-11-04 16:56:15','2021-11-04 16:56:15',1,1,'/uploads/images/gallery/2021-11/capture10.JPG','gallery',1),(12,'Capture11.JPG','http://wiki.esgi.local/uploads/images/gallery/2021-11/capture11.JPG','2021-11-04 16:56:16','2021-11-04 16:56:16',1,1,'/uploads/images/gallery/2021-11/capture11.JPG','gallery',1),(13,'Capture12.JPG','http://wiki.esgi.local/uploads/images/gallery/2021-11/capture12.JPG','2021-11-04 16:56:16','2021-11-04 16:56:16',1,1,'/uploads/images/gallery/2021-11/capture12.JPG','gallery',1),(14,'Capture13.JPG','http://wiki.esgi.local/uploads/images/gallery/2021-11/capture13.JPG','2021-11-04 16:56:16','2021-11-04 16:56:16',1,1,'/uploads/images/gallery/2021-11/capture13.JPG','gallery',1),(15,'Capture14.JPG','http://wiki.esgi.local/uploads/images/gallery/2021-11/capture14.JPG','2021-11-04 16:56:16','2021-11-04 16:56:16',1,1,'/uploads/images/gallery/2021-11/capture14.JPG','gallery',1),(16,'snapshot.JPG','http://wiki.esgi.local/uploads/images/gallery/2021-11/snapshot.JPG','2021-11-04 16:56:16','2021-11-04 16:56:16',1,1,'/uploads/images/gallery/2021-11/snapshot.JPG','gallery',1),(17,'configurer le réseau','http://wiki.esgi.local/uploads/images/gallery/2021-11/capture.JPG','2021-11-04 16:56:16','2021-11-04 16:56:41',1,1,'/uploads/images/gallery/2021-11/capture.JPG','gallery',1),(18,'Capture1.JPG','http://wiki.esgi.local/uploads/images/gallery/2021-11/capture1.JPG','2021-11-04 16:56:16','2021-11-04 16:56:16',1,1,'/uploads/images/gallery/2021-11/capture1.JPG','gallery',1),(19,'Capture2.JPG','http://wiki.esgi.local/uploads/images/gallery/2021-11/capture2.JPG','2021-11-04 16:56:16','2021-11-04 16:56:16',1,1,'/uploads/images/gallery/2021-11/capture2.JPG','gallery',1),(20,'Capture3.JPG','http://wiki.esgi.local/uploads/images/gallery/2021-11/capture3.JPG','2021-11-04 16:56:16','2021-11-04 16:56:16',1,1,'/uploads/images/gallery/2021-11/capture3.JPG','gallery',1),(21,'image-1636048607943.png','http://wiki.esgi.local/uploads/images/gallery/2021-11/image-1636048607943.png','2021-11-04 16:57:08','2021-11-04 16:57:08',1,1,'/uploads/images/gallery/2021-11/image-1636048607943.png','gallery',1),(22,'image-1636048641903.png','http://wiki.esgi.local/uploads/images/gallery/2021-11/image-1636048641903.png','2021-11-04 16:57:42','2021-11-04 16:57:42',1,1,'/uploads/images/gallery/2021-11/image-1636048641903.png','gallery',1),(23,'image-1636048764420.png','http://wiki.esgi.local/uploads/images/gallery/2021-11/image-1636048764420.png','2021-11-04 16:59:44','2021-11-04 16:59:44',1,1,'/uploads/images/gallery/2021-11/image-1636048764420.png','gallery',1),(24,'image-1636048793105.png','http://wiki.esgi.local/uploads/images/gallery/2021-11/image-1636048793105.png','2021-11-04 17:00:13','2021-11-04 17:00:13',1,1,'/uploads/images/gallery/2021-11/image-1636048793105.png','gallery',1);
/*!40000 ALTER TABLE `images` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `joint_permissions`
--

DROP TABLE IF EXISTS `joint_permissions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `joint_permissions` (
  `role_id` int(11) NOT NULL,
  `entity_type` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `entity_id` int(11) NOT NULL,
  `action` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `has_permission` tinyint(1) NOT NULL DEFAULT 0,
  `has_permission_own` tinyint(1) NOT NULL DEFAULT 0,
  `owned_by` int(11) NOT NULL,
  PRIMARY KEY (`role_id`,`entity_type`,`entity_id`,`action`),
  KEY `joint_permissions_entity_id_entity_type_index` (`entity_id`,`entity_type`),
  KEY `joint_permissions_has_permission_index` (`has_permission`),
  KEY `joint_permissions_has_permission_own_index` (`has_permission_own`),
  KEY `joint_permissions_role_id_index` (`role_id`),
  KEY `joint_permissions_action_index` (`action`),
  KEY `joint_permissions_created_by_index` (`owned_by`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `joint_permissions`
--

LOCK TABLES `joint_permissions` WRITE;
/*!40000 ALTER TABLE `joint_permissions` DISABLE KEYS */;
INSERT INTO `joint_permissions` VALUES (1,'BookStack\\Book',1,'chapter-create',1,1,1),(1,'BookStack\\Book',1,'delete',1,1,1),(1,'BookStack\\Book',1,'page-create',1,1,1),(1,'BookStack\\Book',1,'update',1,1,1),(1,'BookStack\\Book',1,'view',1,1,1),(1,'BookStack\\Book',2,'chapter-create',1,1,1),(1,'BookStack\\Book',2,'delete',1,1,1),(1,'BookStack\\Book',2,'page-create',1,1,1),(1,'BookStack\\Book',2,'update',1,1,1),(1,'BookStack\\Book',2,'view',1,1,1),(1,'BookStack\\Book',3,'chapter-create',1,1,1),(1,'BookStack\\Book',3,'delete',1,1,1),(1,'BookStack\\Book',3,'page-create',1,1,1),(1,'BookStack\\Book',3,'update',1,1,1),(1,'BookStack\\Book',3,'view',1,1,1),(1,'BookStack\\Bookshelf',1,'delete',1,1,1),(1,'BookStack\\Bookshelf',1,'update',1,1,1),(1,'BookStack\\Bookshelf',1,'view',1,1,1),(1,'BookStack\\Page',1,'delete',1,1,1),(1,'BookStack\\Page',1,'update',1,1,1),(1,'BookStack\\Page',1,'view',1,1,1),(1,'BookStack\\Page',2,'delete',1,1,1),(1,'BookStack\\Page',2,'update',1,1,1),(1,'BookStack\\Page',2,'view',1,1,1),(1,'BookStack\\Page',3,'delete',1,1,1),(1,'BookStack\\Page',3,'update',1,1,1),(1,'BookStack\\Page',3,'view',1,1,1),(2,'BookStack\\Book',1,'chapter-create',1,1,1),(2,'BookStack\\Book',1,'delete',1,1,1),(2,'BookStack\\Book',1,'page-create',1,1,1),(2,'BookStack\\Book',1,'update',1,1,1),(2,'BookStack\\Book',1,'view',1,1,1),(2,'BookStack\\Book',2,'chapter-create',1,1,1),(2,'BookStack\\Book',2,'delete',1,1,1),(2,'BookStack\\Book',2,'page-create',1,1,1),(2,'BookStack\\Book',2,'update',1,1,1),(2,'BookStack\\Book',2,'view',1,1,1),(2,'BookStack\\Book',3,'chapter-create',1,1,1),(2,'BookStack\\Book',3,'delete',1,1,1),(2,'BookStack\\Book',3,'page-create',1,1,1),(2,'BookStack\\Book',3,'update',1,1,1),(2,'BookStack\\Book',3,'view',1,1,1),(2,'BookStack\\Bookshelf',1,'delete',1,1,1),(2,'BookStack\\Bookshelf',1,'update',1,1,1),(2,'BookStack\\Bookshelf',1,'view',1,1,1),(2,'BookStack\\Page',1,'delete',1,1,1),(2,'BookStack\\Page',1,'update',1,1,1),(2,'BookStack\\Page',1,'view',1,1,1),(2,'BookStack\\Page',2,'delete',1,1,1),(2,'BookStack\\Page',2,'update',1,1,1),(2,'BookStack\\Page',2,'view',1,1,1),(2,'BookStack\\Page',3,'delete',1,1,1),(2,'BookStack\\Page',3,'update',1,1,1),(2,'BookStack\\Page',3,'view',1,1,1),(3,'BookStack\\Book',1,'chapter-create',0,0,1),(3,'BookStack\\Book',1,'delete',0,0,1),(3,'BookStack\\Book',1,'page-create',0,0,1),(3,'BookStack\\Book',1,'update',0,0,1),(3,'BookStack\\Book',1,'view',1,1,1),(3,'BookStack\\Book',2,'chapter-create',0,0,1),(3,'BookStack\\Book',2,'delete',0,0,1),(3,'BookStack\\Book',2,'page-create',0,0,1),(3,'BookStack\\Book',2,'update',0,0,1),(3,'BookStack\\Book',2,'view',1,1,1),(3,'BookStack\\Book',3,'chapter-create',0,0,1),(3,'BookStack\\Book',3,'delete',0,0,1),(3,'BookStack\\Book',3,'page-create',0,0,1),(3,'BookStack\\Book',3,'update',0,0,1),(3,'BookStack\\Book',3,'view',1,1,1),(3,'BookStack\\Bookshelf',1,'delete',0,0,1),(3,'BookStack\\Bookshelf',1,'update',0,0,1),(3,'BookStack\\Bookshelf',1,'view',1,1,1),(3,'BookStack\\Page',1,'delete',0,0,1),(3,'BookStack\\Page',1,'update',0,0,1),(3,'BookStack\\Page',1,'view',1,1,1),(3,'BookStack\\Page',2,'delete',0,0,1),(3,'BookStack\\Page',2,'update',0,0,1),(3,'BookStack\\Page',2,'view',1,1,1),(3,'BookStack\\Page',3,'delete',0,0,1),(3,'BookStack\\Page',3,'update',0,0,1),(3,'BookStack\\Page',3,'view',1,1,1),(4,'BookStack\\Book',1,'chapter-create',0,0,1),(4,'BookStack\\Book',1,'delete',0,0,1),(4,'BookStack\\Book',1,'page-create',0,0,1),(4,'BookStack\\Book',1,'update',0,0,1),(4,'BookStack\\Book',1,'view',1,1,1),(4,'BookStack\\Book',2,'chapter-create',0,0,1),(4,'BookStack\\Book',2,'delete',0,0,1),(4,'BookStack\\Book',2,'page-create',0,0,1),(4,'BookStack\\Book',2,'update',0,0,1),(4,'BookStack\\Book',2,'view',1,1,1),(4,'BookStack\\Book',3,'chapter-create',0,0,1),(4,'BookStack\\Book',3,'delete',0,0,1),(4,'BookStack\\Book',3,'page-create',0,0,1),(4,'BookStack\\Book',3,'update',0,0,1),(4,'BookStack\\Book',3,'view',1,1,1),(4,'BookStack\\Bookshelf',1,'delete',0,0,1),(4,'BookStack\\Bookshelf',1,'update',0,0,1),(4,'BookStack\\Bookshelf',1,'view',1,1,1),(4,'BookStack\\Page',1,'delete',0,0,1),(4,'BookStack\\Page',1,'update',0,0,1),(4,'BookStack\\Page',1,'view',1,1,1),(4,'BookStack\\Page',2,'delete',0,0,1),(4,'BookStack\\Page',2,'update',0,0,1),(4,'BookStack\\Page',2,'view',1,1,1),(4,'BookStack\\Page',3,'delete',0,0,1),(4,'BookStack\\Page',3,'update',0,0,1),(4,'BookStack\\Page',3,'view',1,1,1);
/*!40000 ALTER TABLE `joint_permissions` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `mfa_values`
--

DROP TABLE IF EXISTS `mfa_values`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `mfa_values` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `method` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `value` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `mfa_values_user_id_index` (`user_id`),
  KEY `mfa_values_method_index` (`method`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `mfa_values`
--

LOCK TABLES `mfa_values` WRITE;
/*!40000 ALTER TABLE `mfa_values` DISABLE KEYS */;
/*!40000 ALTER TABLE `mfa_values` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `migrations`
--

DROP TABLE IF EXISTS `migrations`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `migrations` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `migration` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `batch` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=59 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `migrations`
--

LOCK TABLES `migrations` WRITE;
/*!40000 ALTER TABLE `migrations` DISABLE KEYS */;
INSERT INTO `migrations` VALUES (1,'2014_10_12_000000_create_users_table',1),(2,'2014_10_12_100000_create_password_resets_table',1),(3,'2015_07_12_114933_create_books_table',1),(4,'2015_07_12_190027_create_pages_table',1),(5,'2015_07_13_172121_create_images_table',1),(6,'2015_07_27_172342_create_chapters_table',1),(7,'2015_08_08_200447_add_users_to_entities',1),(8,'2015_08_09_093534_create_page_revisions_table',1),(9,'2015_08_16_142133_create_activities_table',1),(10,'2015_08_29_105422_add_roles_and_permissions',1),(11,'2015_08_30_125859_create_settings_table',1),(12,'2015_08_31_175240_add_search_indexes',1),(13,'2015_09_04_165821_create_social_accounts_table',1),(14,'2015_09_05_164707_add_email_confirmation_table',1),(15,'2015_11_21_145609_create_views_table',1),(16,'2015_11_26_221857_add_entity_indexes',1),(17,'2015_12_05_145049_fulltext_weighting',1),(18,'2015_12_07_195238_add_image_upload_types',1),(19,'2015_12_09_195748_add_user_avatars',1),(20,'2016_01_11_210908_add_external_auth_to_users',1),(21,'2016_02_25_184030_add_slug_to_revisions',1),(22,'2016_02_27_120329_update_permissions_and_roles',1),(23,'2016_02_28_084200_add_entity_access_controls',1),(24,'2016_03_09_203143_add_page_revision_types',1),(25,'2016_03_13_082138_add_page_drafts',1),(26,'2016_03_25_123157_add_markdown_support',1),(27,'2016_04_09_100730_add_view_permissions_to_roles',1),(28,'2016_04_20_192649_create_joint_permissions_table',1),(29,'2016_05_06_185215_create_tags_table',1),(30,'2016_07_07_181521_add_summary_to_page_revisions',1),(31,'2016_09_29_101449_remove_hidden_roles',1),(32,'2016_10_09_142037_create_attachments_table',1),(33,'2017_01_21_163556_create_cache_table',1),(34,'2017_01_21_163602_create_sessions_table',1),(35,'2017_03_19_091553_create_search_index_table',1),(36,'2017_04_20_185112_add_revision_counts',1),(37,'2017_07_02_152834_update_db_encoding_to_ut8mb4',1),(38,'2017_08_01_130541_create_comments_table',1),(39,'2017_08_29_102650_add_cover_image_display',1),(40,'2018_07_15_173514_add_role_external_auth_id',1),(41,'2018_08_04_115700_create_bookshelves_table',1),(42,'2019_07_07_112515_add_template_support',1),(43,'2019_08_17_140214_add_user_invites_table',1),(44,'2019_12_29_120917_add_api_auth',1),(45,'2020_08_04_111754_drop_joint_permissions_id',1),(46,'2020_08_04_131052_remove_role_name_field',1),(47,'2020_09_19_094251_add_activity_indexes',1),(48,'2020_09_27_210059_add_entity_soft_deletes',1),(49,'2020_09_27_210528_create_deletions_table',1),(50,'2020_11_07_232321_simplify_activities_table',1),(51,'2020_12_30_173528_add_owned_by_field_to_entities',1),(52,'2021_01_30_225441_add_settings_type_column',1),(53,'2021_03_08_215138_add_user_slug',1),(54,'2021_05_15_173110_create_favourites_table',1),(55,'2021_06_30_173111_create_mfa_values_table',1),(56,'2021_07_03_085038_add_mfa_enforced_to_roles_table',1),(57,'2021_08_28_161743_add_export_role_permission',1),(58,'2021_09_26_044614_add_activities_ip_column',1);
/*!40000 ALTER TABLE `migrations` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `page_revisions`
--

DROP TABLE IF EXISTS `page_revisions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `page_revisions` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `page_id` int(11) NOT NULL,
  `name` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `html` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `text` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `created_by` int(11) NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `slug` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `book_slug` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `type` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'version',
  `markdown` longtext COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `summary` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `revision_number` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `page_revisions_page_id_index` (`page_id`),
  KEY `page_revisions_slug_index` (`slug`),
  KEY `page_revisions_book_slug_index` (`book_slug`),
  KEY `page_revisions_type_index` (`type`),
  KEY `page_revisions_revision_number_index` (`revision_number`)
) ENGINE=InnoDB AUTO_INCREMENT=38 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `page_revisions`
--

LOCK TABLES `page_revisions` WRITE;
/*!40000 ALTER TABLE `page_revisions` DISABLE KEYS */;
INSERT INTO `page_revisions` VALUES (1,1,'Configuration','','',1,'2021-11-04 16:53:35','2021-11-04 16:53:35','configuration','1-debian-configuration','version','','Initial publish',1),(3,1,'Installation Debian Raid','<p id=\"bkmrk-installation-debian-\"><strong>Installation Debian Raid</strong></p>','Installation Debian Raid',1,'2021-11-04 16:54:51','2021-11-04 16:54:51','installation-debian-raid','1-debian-configuration','version','','',2),(4,1,'Installation Debian Raid','<h3 id=\"bkmrk-installation-debian-\"><strong>Installation Debian Raid</strong></h3>','Installation Debian Raid',1,'2021-11-04 16:55:05','2021-11-04 16:55:05','installation-debian-raid','1-debian-configuration','version','','',3),(5,1,'Installation Debian Raid','<h4 id=\"bkmrk-installation-debian-\"><strong>Installation Debian Raid</strong></h4>\r\n<p id=\"bkmrk-tout-mettre-en-fran%C3%A7\">Tout mettre en français au début jusqu\'au domaine</p>\r\n<p id=\"bkmrk-%C2%A0\"> </p>','Installation Debian Raid\r\nTout mettre en français au début jusqu\'au domaine\r\n ',1,'2021-11-04 16:55:25','2021-11-04 16:55:25','installation-debian-raid','1-debian-configuration','version','','',4),(6,1,'Installation Debian Raid','<h5 id=\"bkmrk-tout-mettre-en-fran%C3%A7\">Tout mettre en français au début jusqu\'au domaine</h5>\r\n<p id=\"bkmrk-%C2%A0\"> </p>','Tout mettre en français au début jusqu\'au domaine\r\n ',1,'2021-11-04 16:55:41','2021-11-04 16:55:41','installation-debian-raid','1-debian-configuration','version','','',5),(8,1,'Installation Debian Raid','<p id=\"bkmrk-tout-mettre-en-fran%C3%A7\">Tout mettre en français au début jusqu\'au domaine</p>\r\n<p id=\"bkmrk-%C2%A0\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture.JPG\" alt=\"Capture.JPG\" width=\"412\" height=\"309\"></a></p>','Tout mettre en français au début jusqu\'au domaine\r\n',1,'2021-11-04 16:56:51','2021-11-04 16:56:51','installation-debian-raid','1-debian-configuration','version','','',6),(9,1,'Installation Debian Raid','<p id=\"bkmrk-tout-mettre-en-fran%C3%A7\">Tout mettre en français au début jusqu\'au domaine</p>\r\n<p id=\"bkmrk-\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/image-1636048607943.png\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/image-1636048607943.png\" alt=\"image-1636048607943.png\"></a></p>\r\n<p id=\"bkmrk-%C2%A0\"> </p>','Tout mettre en français au début jusqu\'au domaine\r\n\r\n ',1,'2021-11-04 16:57:18','2021-11-04 16:57:18','installation-debian-raid','1-debian-configuration','version','','',7),(10,1,'Installation Debian Raid','<p id=\"bkmrk-tout-mettre-en-fran%C3%A7\">Tout mettre en français au début jusqu\'au domaine</p>\r\n<p id=\"bkmrk-\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/image-1636048607943.png\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/image-1636048607943.png\" alt=\"image-1636048607943.png\"></a></p>\r\n<p id=\"bkmrk-mettre-le-mot-de-pas\">Mettre le mot de passe que l\'on veut pour root et le compte que l\'on créé</p>\r\n<p id=\"bkmrk-choisir-%22manuel%22\">Choisir \"Manuel\"</p>\r\n<p id=\"bkmrk-%C2%A0\"> </p>','Tout mettre en français au début jusqu\'au domaine\r\n\r\nMettre le mot de passe que l\'on veut pour root et le compte que l\'on créé\r\nChoisir \"Manuel\"\r\n ',1,'2021-11-04 16:57:32','2021-11-04 16:57:32','installation-debian-raid','1-debian-configuration','version','','',8),(12,1,'Installation Debian Raid','<p id=\"bkmrk-tout-mettre-en-fran%C3%A7\">Tout mettre en français au début jusqu\'au domaine</p>\r\n<p id=\"bkmrk-\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/image-1636048607943.png\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/image-1636048607943.png\" alt=\"image-1636048607943.png\"></a></p>\r\n<p id=\"bkmrk-mettre-le-mot-de-pas\">Mettre le mot de passe que l\'on veut pour root et le compte que l\'on créé</p>\r\n<p id=\"bkmrk-choisir-%22manuel%22\">Choisir \"Manuel\"</p>\r\n<p id=\"bkmrk--0\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/image-1636048641903.png\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/image-1636048641903.png\" alt=\"image-1636048641903.png\"></a></p>\r\n<p id=\"bkmrk-sur-chaque-disque-cr\">Sur chaque disque créer une nouvelle partition vierge, le résultat à obtenir est le suivant :</p>\r\n<p id=\"bkmrk--1\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture1.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture1.JPG\" alt=\"Capture1.JPG\"></a></p>\r\n<h2 id=\"bkmrk-pour-chaque-disque-%3A\">Pour chaque disque :</h2>\r\n<ul id=\"bkmrk-aller-sur-%22espace-li\"><li>Aller sur \"Espace Libre\"</li>\r\n<li>Créer une nouvelle partition de 1G</li>\r\n<li>Primaire / Début / Utiliser comme : volume physique pour RAID</li>\r\n<li>Faire la même chose avec le reste du disque</li>\r\n</ul><h2 id=\"bkmrk-le-r%C3%A9sultat-%C3%A0-obteni\">Le résultat à obtenir est le suivant :</h2>\r\n<p id=\"bkmrk-%C2%A0\"> </p>\r\n<p id=\"bkmrk-%C2%A0-0\"> </p>\r\n<p id=\"bkmrk-%C2%A0-1\"> </p>\r\n<p id=\"bkmrk-%C2%A0-2\"> </p>\r\n<p id=\"bkmrk-%C2%A0-3\"> </p>\r\n<p id=\"bkmrk-%C2%A0-4\"> </p>','Tout mettre en français au début jusqu\'au domaine\r\n\r\nMettre le mot de passe que l\'on veut pour root et le compte que l\'on créé\r\nChoisir \"Manuel\"\r\n\r\nSur chaque disque créer une nouvelle partition vierge, le résultat à obtenir est le suivant :\r\n\r\nPour chaque disque :\r\nAller sur \"Espace Libre\"\r\nCréer une nouvelle partition de 1G\r\nPrimaire / Début / Utiliser comme : volume physique pour RAID\r\nFaire la même chose avec le reste du disque\r\nLe résultat à obtenir est le suivant :\r\n \r\n \r\n \r\n \r\n \r\n ',1,'2021-11-04 16:58:17','2021-11-04 16:58:17','installation-debian-raid','1-debian-configuration','version','','',9),(14,1,'Installation Debian Raid','<p id=\"bkmrk-tout-mettre-en-fran%C3%A7\">Tout mettre en français au début jusqu\'au domaine</p>\r\n<p id=\"bkmrk-\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/image-1636048607943.png\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/image-1636048607943.png\" alt=\"image-1636048607943.png\"></a></p>\r\n<p id=\"bkmrk-mettre-le-mot-de-pas\">Mettre le mot de passe que l\'on veut pour root et le compte que l\'on créé</p>\r\n<p id=\"bkmrk-choisir-%22manuel%22\">Choisir \"Manuel\"</p>\r\n<p id=\"bkmrk--0\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/image-1636048641903.png\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/image-1636048641903.png\" alt=\"image-1636048641903.png\"></a></p>\r\n<p id=\"bkmrk-sur-chaque-disque-cr\">Sur chaque disque créer une nouvelle partition vierge, le résultat à obtenir est le suivant :</p>\r\n<p id=\"bkmrk--1\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture1.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture1.JPG\" alt=\"Capture1.JPG\"></a></p>\r\n<h5 id=\"bkmrk-pour-chaque-disque-%3A\">Pour chaque disque :</h5>\r\n<ul id=\"bkmrk-aller-sur-%22espace-li\"><li>Aller sur \"Espace Libre\"</li>\r\n<li>Créer une nouvelle partition de 1G</li>\r\n<li>Primaire / Début / Utiliser comme : volume physique pour RAID</li>\r\n<li>Faire la même chose avec le reste du disque</li>\r\n</ul><p id=\"bkmrk--2\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture2.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture2.JPG\" alt=\"Capture2.JPG\"></a></p>\r\n<h5 id=\"bkmrk-le-r%C3%A9sultat-%C3%A0-obteni\">Le résultat à obtenir est le suivant :</h5>\r\n<p id=\"bkmrk--3\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture4.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture4.JPG\" alt=\"Capture4.JPG\"></a></p>\r\n<h5 id=\"bkmrk-il-faut-maintenant-c\">Il faut maintenant configurer le RAID</h5>\r\n<ul id=\"bkmrk-aller-dans-%22configur\"><li>Aller dans \"Configurer le RAID avec gestion logicielle\"</li>\r\n<li>Mettre oui</li>\r\n<li>Créer un périphérique multidisque</li>\r\n<li>Raid1</li>\r\n<li>Laisser 2 puis laisser 0</li>\r\n<li>Sélectionner sda1 et sdb1 comme suivant :</li>\r\n</ul><p id=\"bkmrk--4\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/image-1636048764420.png\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/image-1636048764420.png\" alt=\"image-1636048764420.png\"></a></p>\r\n<ul id=\"bkmrk-retourner-sur-cr%C3%A9er-\"><li>Retourner sur Créer un périphérique multidisque</li>\r\n<li>Raid5</li>\r\n<li>Laisser 3 puis 0</li>\r\n<li>Sélectionner sda2 sdb2 et sdc2 comme suivant :</li>\r\n</ul><p id=\"bkmrk--5\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/image-1636048793105.png\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/image-1636048793105.png\" alt=\"image-1636048793105.png\"></a></p>\r\n<ul id=\"bkmrk-cliquer-sur-continue\"><li>Cliquer sur continuer puis Terminer</li>\r\n<li>Le résultat à avoir doit être le suivant :</li>\r\n</ul><p id=\"bkmrk--6\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture4.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture4.JPG\" alt=\"Capture4.JPG\"></a></p>\r\n<ul id=\"bkmrk-aller-sur-le-n%C2%B01-du-\"><li>Aller sur le n°1 du raid 1 (Ligne 2 sur le screen)</li>\r\n<li>Configurer le volume comme suivant</li>\r\n<li>Mettre utiliser comme ext4</li>\r\n<li>Point de montage /boot</li>\r\n</ul><p id=\"bkmrk--7\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture5.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture5.JPG\" alt=\"Capture5.JPG\"></a></p>\r\n<ul id=\"bkmrk-aller-sur-configurer\"><li>Aller sur Configurer les volumes chiffrés</li>\r\n<li>Créer des volumes chiffrés</li>\r\n</ul><p id=\"bkmrk--8\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture6.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture6.JPG\" alt=\"Capture6.JPG\"></a></p>\r\n<ul id=\"bkmrk-chiffrer-la-plus-gro\"><li>Chiffrer la plus grosse partition</li>\r\n<li>Désactiver \"Effacer les données\"</li>\r\n<li>Fin du paramétrage</li>\r\n<li>Terminer</li>\r\n<li>Mettre un mot de passe</li>\r\n<li>Voici le résultat à obtenir :</li>\r\n</ul><p id=\"bkmrk--9\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture7.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture7.JPG\" alt=\"Capture7.JPG\"></a></p>\r\n<ul id=\"bkmrk-aller-sur-%22configure\"><li>Aller sur \"configurer le gestionnaire de volumes logiques (LVM)</li>\r\n<li>Mettre oui</li>\r\n<li>Créer un groupe de volume</li>\r\n<li>Lui donner un nom (ici VGCRYPT)</li>\r\n<li>Le mettre sur md1 crypt</li>\r\n</ul><p id=\"bkmrk--10\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture8.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture8.JPG\" alt=\"Capture8.JPG\"></a></p>\r\n<p id=\"bkmrk-%C2%A0-4\"> </p>','Tout mettre en français au début jusqu\'au domaine\r\n\r\nMettre le mot de passe que l\'on veut pour root et le compte que l\'on créé\r\nChoisir \"Manuel\"\r\n\r\nSur chaque disque créer une nouvelle partition vierge, le résultat à obtenir est le suivant :\r\n\r\nPour chaque disque :\r\nAller sur \"Espace Libre\"\r\nCréer une nouvelle partition de 1G\r\nPrimaire / Début / Utiliser comme : volume physique pour RAID\r\nFaire la même chose avec le reste du disque\r\n\r\nLe résultat à obtenir est le suivant :\r\n\r\nIl faut maintenant configurer le RAID\r\nAller dans \"Configurer le RAID avec gestion logicielle\"\r\nMettre oui\r\nCréer un périphérique multidisque\r\nRaid1\r\nLaisser 2 puis laisser 0\r\nSélectionner sda1 et sdb1 comme suivant :\r\n\r\nRetourner sur Créer un périphérique multidisque\r\nRaid5\r\nLaisser 3 puis 0\r\nSélectionner sda2 sdb2 et sdc2 comme suivant :\r\n\r\nCliquer sur continuer puis Terminer\r\nLe résultat à avoir doit être le suivant :\r\n\r\nAller sur le n°1 du raid 1 (Ligne 2 sur le screen)\r\nConfigurer le volume comme suivant\r\nMettre utiliser comme ext4\r\nPoint de montage /boot\r\n\r\nAller sur Configurer les volumes chiffrés\r\nCréer des volumes chiffrés\r\n\r\nChiffrer la plus grosse partition\r\nDésactiver \"Effacer les données\"\r\nFin du paramétrage\r\nTerminer\r\nMettre un mot de passe\r\nVoici le résultat à obtenir :\r\n\r\nAller sur \"configurer le gestionnaire de volumes logiques (LVM)\r\nMettre oui\r\nCréer un groupe de volume\r\nLui donner un nom (ici VGCRYPT)\r\nLe mettre sur md1 crypt\r\n\r\n ',1,'2021-11-04 17:01:51','2021-11-04 17:01:51','installation-debian-raid','1-debian-configuration','version','','',10),(16,1,'Installation Debian Raid','<p id=\"bkmrk-tout-mettre-en-fran%C3%A7\">Tout mettre en français au début jusqu\'au domaine</p>\r\n<p id=\"bkmrk-\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/image-1636048607943.png\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/image-1636048607943.png\" alt=\"image-1636048607943.png\"></a></p>\r\n<p id=\"bkmrk-mettre-le-mot-de-pas\">Mettre le mot de passe que l\'on veut pour root et le compte que l\'on créé</p>\r\n<p id=\"bkmrk-choisir-%22manuel%22\">Choisir \"Manuel\"</p>\r\n<p id=\"bkmrk--0\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/image-1636048641903.png\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/image-1636048641903.png\" alt=\"image-1636048641903.png\"></a></p>\r\n<p id=\"bkmrk-sur-chaque-disque-cr\">Sur chaque disque créer une nouvelle partition vierge, le résultat à obtenir est le suivant :</p>\r\n<p id=\"bkmrk--1\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture1.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture1.JPG\" alt=\"Capture1.JPG\"></a></p>\r\n<h5 id=\"bkmrk-pour-chaque-disque-%3A\">Pour chaque disque :</h5>\r\n<ul id=\"bkmrk-aller-sur-%22espace-li\"><li>Aller sur \"Espace Libre\"</li>\r\n<li>Créer une nouvelle partition de 1G</li>\r\n<li>Primaire / Début / Utiliser comme : volume physique pour RAID</li>\r\n<li>Faire la même chose avec le reste du disque</li>\r\n</ul><p id=\"bkmrk--2\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture2.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture2.JPG\" alt=\"Capture2.JPG\"></a></p>\r\n<h5 id=\"bkmrk-le-r%C3%A9sultat-%C3%A0-obteni\">Le résultat à obtenir est le suivant :</h5>\r\n<p id=\"bkmrk--3\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture4.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture4.JPG\" alt=\"Capture4.JPG\"></a></p>\r\n<h5 id=\"bkmrk-il-faut-maintenant-c\">Il faut maintenant configurer le RAID</h5>\r\n<ul id=\"bkmrk-aller-dans-%22configur\"><li>Aller dans \"Configurer le RAID avec gestion logicielle\"</li>\r\n<li>Mettre oui</li>\r\n<li>Créer un périphérique multidisque</li>\r\n<li>Raid1</li>\r\n<li>Laisser 2 puis laisser 0</li>\r\n<li>Sélectionner sda1 et sdb1 comme suivant :</li>\r\n</ul><p id=\"bkmrk--4\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/image-1636048764420.png\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/image-1636048764420.png\" alt=\"image-1636048764420.png\"></a></p>\r\n<ul id=\"bkmrk-retourner-sur-cr%C3%A9er-\"><li>Retourner sur Créer un périphérique multidisque</li>\r\n<li>Raid5</li>\r\n<li>Laisser 3 puis 0</li>\r\n<li>Sélectionner sda2 sdb2 et sdc2 comme suivant :</li>\r\n</ul><p id=\"bkmrk--5\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/image-1636048793105.png\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/image-1636048793105.png\" alt=\"image-1636048793105.png\"></a></p>\r\n<ul id=\"bkmrk-cliquer-sur-continue\"><li>Cliquer sur continuer puis Terminer</li>\r\n<li>Le résultat à avoir doit être le suivant :</li>\r\n</ul><p id=\"bkmrk--6\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture4.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture4.JPG\" alt=\"Capture4.JPG\"></a></p>\r\n<ul id=\"bkmrk-aller-sur-le-n%C2%B01-du-\"><li>Aller sur le n°1 du raid 1 (Ligne 2 sur le screen)</li>\r\n<li>Configurer le volume comme suivant</li>\r\n<li>Mettre utiliser comme ext4</li>\r\n<li>Point de montage /boot</li>\r\n</ul><p id=\"bkmrk--7\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture5.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture5.JPG\" alt=\"Capture5.JPG\"></a></p>\r\n<ul id=\"bkmrk-aller-sur-configurer\"><li>Aller sur Configurer les volumes chiffrés</li>\r\n<li>Créer des volumes chiffrés</li>\r\n</ul><p id=\"bkmrk--8\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture6.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture6.JPG\" alt=\"Capture6.JPG\"></a></p>\r\n<ul id=\"bkmrk-chiffrer-la-plus-gro\"><li>Chiffrer la plus grosse partition</li>\r\n<li>Désactiver \"Effacer les données\"</li>\r\n<li>Fin du paramétrage</li>\r\n<li>Terminer</li>\r\n<li>Mettre un mot de passe</li>\r\n<li>Voici le résultat à obtenir :</li>\r\n</ul><p id=\"bkmrk--9\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture7.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture7.JPG\" alt=\"Capture7.JPG\"></a></p>\r\n<ul id=\"bkmrk-aller-sur-%22configure\"><li>Aller sur \"configurer le gestionnaire de volumes logiques (LVM)</li>\r\n<li>Mettre oui</li>\r\n<li>Créer un groupe de volume</li>\r\n<li>Lui donner un nom (ici VGCRYPT)</li>\r\n<li>Le mettre sur md1 crypt</li>\r\n</ul><p id=\"bkmrk--10\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture8.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture8.JPG\" alt=\"Capture8.JPG\"></a></p>\r\n<h5 id=\"bkmrk-pour-chaque-lv\">Pour chaque lv</h5>\r\n<ul id=\"bkmrk-aller-sur-%22cr%C3%A9er-un-\"><li>Aller sur \"Créer un volume logique\"</li>\r\n<li>Sélectionner notre VGCRYPT</li>\r\n<li>Donner le nom correspondant</li>\r\n<li>Donner la taille</li>\r\n<li>Valider</li>\r\n</ul><h5 id=\"bkmrk-en-l%27occurence-ici-%3A\">En l\'occurence ici :</h5>\r\n<ul id=\"bkmrk-lv_root-4g-lv_home-1\"><li>lv_root 4G</li>\r\n<li>lv_home 1G</li>\r\n<li>lv_tmp 1G</li>\r\n<li>lv_var 1G</li>\r\n<li>lv_swap 500M</li>\r\n</ul><p id=\"bkmrk--11\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture9.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture9.JPG\" alt=\"Capture9.JPG\"></a></p>\r\n<h5 id=\"bkmrk-aller-ensuite-sur-ch\">Aller ensuite sur chaque lv que l\'on vient de créer pour set son type et son label</h5>\r\n<ul id=\"bkmrk-lv_home-mont%C3%A9-sur-%2Fh\"><li>lv_home monté sur /home en xfs étiquette HOME</li>\r\n<li>lv_root monté sur / en ext4 étiquette ROOT</li>\r\n<li>lv_swap en swap</li>\r\n<li>lv_tmp monté sur /tmp en ext4 étiquette TMP</li>\r\n<li>lv_var monté sur /var en xfs étiquette VAR</li>\r\n</ul><h5 id=\"bkmrk-le-r%C3%A9sultat-%C3%A0-obteni-0\">Le résultat à obtenir est le suivant :</h5>\r\n<p id=\"bkmrk--12\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture10.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture10.JPG\" alt=\"Capture10.JPG\"></a></p>\r\n<h5 id=\"bkmrk-terminer-le-partionn\">Terminer le partionnement</h5>\r\n<p id=\"bkmrk-voici-le-r%C3%A9sultat-%C3%A0-\">Voici le résultat à obtenir</p>\r\n<p id=\"bkmrk--13\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture11.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture11.JPG\" alt=\"Capture11.JPG\"></a></p>\r\n<h5 id=\"bkmrk-faut-il-analyser-un-\">Faut-il analyser un autre CD ?</h5>\r\n<ul id=\"bkmrk-mettre-non-appuyer-s\"><li>Mettre non</li>\r\n<li>Appuyer sur entrée jusqu\'à l\'installation des logiciels</li>\r\n<li>Participer ou non aux statistiques, à vous de choisir</li>\r\n<li>Garder uniquement le serveur SSH et les utilitaires usuels comme suit :</li>\r\n</ul><p id=\"bkmrk--14\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture12.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture12.JPG\" alt=\"Capture12.JPG\"></a></p>\r\n<ul id=\"bkmrk-installer-grub-sur-l\"><li>\r\n<h4><span style=\"color: #ff0000;\"><strong>Installer grub sur le secteur d\'amorçage : Mettre oui</strong></span></h4>\r\n</li>\r\n<li>Le mettre sur /dev/sda</li>\r\n</ul><p id=\"bkmrk--15\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture13.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture13.JPG\" alt=\"Capture13.JPG\"></a></p>\r\n<h5 id=\"bkmrk-votre-vm-est-pr%C3%AAte-%21\"><strong>Votre VM est prête !</strong></h5>\r\n<h5 id=\"bkmrk-le-filesystem-%C3%A0-obte\">Le filesystem à obtenir est le suivant (A test avec lsblk) :</h5>\r\n<p id=\"bkmrk--16\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture14.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture14.JPG\" alt=\"Capture14.JPG\"></a></p>\r\n<p id=\"bkmrk-%C2%A0\"> </p>','Tout mettre en français au début jusqu\'au domaine\r\n\r\nMettre le mot de passe que l\'on veut pour root et le compte que l\'on créé\r\nChoisir \"Manuel\"\r\n\r\nSur chaque disque créer une nouvelle partition vierge, le résultat à obtenir est le suivant :\r\n\r\nPour chaque disque :\r\nAller sur \"Espace Libre\"\r\nCréer une nouvelle partition de 1G\r\nPrimaire / Début / Utiliser comme : volume physique pour RAID\r\nFaire la même chose avec le reste du disque\r\n\r\nLe résultat à obtenir est le suivant :\r\n\r\nIl faut maintenant configurer le RAID\r\nAller dans \"Configurer le RAID avec gestion logicielle\"\r\nMettre oui\r\nCréer un périphérique multidisque\r\nRaid1\r\nLaisser 2 puis laisser 0\r\nSélectionner sda1 et sdb1 comme suivant :\r\n\r\nRetourner sur Créer un périphérique multidisque\r\nRaid5\r\nLaisser 3 puis 0\r\nSélectionner sda2 sdb2 et sdc2 comme suivant :\r\n\r\nCliquer sur continuer puis Terminer\r\nLe résultat à avoir doit être le suivant :\r\n\r\nAller sur le n°1 du raid 1 (Ligne 2 sur le screen)\r\nConfigurer le volume comme suivant\r\nMettre utiliser comme ext4\r\nPoint de montage /boot\r\n\r\nAller sur Configurer les volumes chiffrés\r\nCréer des volumes chiffrés\r\n\r\nChiffrer la plus grosse partition\r\nDésactiver \"Effacer les données\"\r\nFin du paramétrage\r\nTerminer\r\nMettre un mot de passe\r\nVoici le résultat à obtenir :\r\n\r\nAller sur \"configurer le gestionnaire de volumes logiques (LVM)\r\nMettre oui\r\nCréer un groupe de volume\r\nLui donner un nom (ici VGCRYPT)\r\nLe mettre sur md1 crypt\r\n\r\nPour chaque lv\r\nAller sur \"Créer un volume logique\"\r\nSélectionner notre VGCRYPT\r\nDonner le nom correspondant\r\nDonner la taille\r\nValider\r\nEn l\'occurence ici :\r\nlv_root 4G\r\nlv_home 1G\r\nlv_tmp 1G\r\nlv_var 1G\r\nlv_swap 500M\r\n\r\nAller ensuite sur chaque lv que l\'on vient de créer pour set son type et son label\r\nlv_home monté sur /home en xfs étiquette HOME\r\nlv_root monté sur / en ext4 étiquette ROOT\r\nlv_swap en swap\r\nlv_tmp monté sur /tmp en ext4 étiquette TMP\r\nlv_var monté sur /var en xfs étiquette VAR\r\nLe résultat à obtenir est le suivant :\r\n\r\nTerminer le partionnement\r\nVoici le résultat à obtenir\r\n\r\nFaut-il analyser un autre CD ?\r\nMettre non\r\nAppuyer sur entrée jusqu\'à l\'installation des logiciels\r\nParticiper ou non aux statistiques, à vous de choisir\r\nGarder uniquement le serveur SSH et les utilitaires usuels comme suit :\r\n\r\n\r\nInstaller grub sur le secteur d\'amorçage : Mettre oui\r\n\r\nLe mettre sur /dev/sda\r\n\r\nVotre VM est prête !\r\nLe filesystem à obtenir est le suivant (A test avec lsblk) :\r\n\r\n ',1,'2021-11-04 17:06:23','2021-11-04 17:06:23','installation-debian-raid','1-debian-configuration','version','','',11),(17,2,'Installation et configuration du BookStack','','',1,'2021-11-04 17:09:12','2021-11-04 17:09:12','installation-et-configuration-du-bookstack','2-bookstack','version','','Initial publish',1),(19,2,'Installation et configuration du BookStack','<p id=\"bkmrk-pour-%C3%AAtre-plus-rapid\">Pour être plus rapide dans l\'installation, je suis passé par un script que j\'ai écris en cours me permettant d\'automatiser l\'installation et la configuration du Cheat ainsi que de Bookstack.</p>\r\n<p id=\"bkmrk-l%27insertion-de-mon-s\">L\'insertion de mon script c\'est faite par connexion SFTP entre mon pc hôte et ma VM Debian 10.</p>','Pour être plus rapide dans l\'installation, je suis passé par un script que j\'ai écris en cours me permettant d\'automatiser l\'installation et la configuration du Cheat ainsi que de Bookstack.\r\nL\'insertion de mon script c\'est faite par connexion SFTP entre mon pc hôte et ma VM Debian 10.',1,'2021-11-04 17:10:19','2021-11-04 17:10:19','installation-et-configuration-du-bookstack','2-bookstack','version','','',2),(20,2,'Installation et configuration du BookStack','<h5 id=\"bkmrk-installation\"><strong>Installation</strong></h5>\r\n<p id=\"bkmrk-pour-%C3%AAtre-plus-rapid\">Pour être plus rapide dans l\'installation, je suis passé par un script que j\'ai écris en cours me permettant d\'automatiser l\'installation et la configuration du Cheat ainsi que de Bookstack.</p>\r\n<p id=\"bkmrk-l%27insertion-de-mon-s\">L\'insertion de mon script c\'est faite par connexion SFTP entre mon pc hôte et ma VM Debian 10.</p>','Installation\r\nPour être plus rapide dans l\'installation, je suis passé par un script que j\'ai écris en cours me permettant d\'automatiser l\'installation et la configuration du Cheat ainsi que de Bookstack.\r\nL\'insertion de mon script c\'est faite par connexion SFTP entre mon pc hôte et ma VM Debian 10.',1,'2021-11-04 17:10:32','2021-11-04 17:10:32','installation-et-configuration-du-bookstack','2-bookstack','version','','',3),(22,2,'Installation et configuration du BookStack','<h5 id=\"bkmrk-installation\"><strong>Installation</strong></h5>\r\n<p id=\"bkmrk-pour-%C3%AAtre-plus-rapid\">Pour être plus rapide dans l\'installation, je suis passé par un script que j\'ai écris en cours me permettant d\'automatiser l\'installation et la configuration du Cheat (un aide-mémoire de commandes Linux) ainsi que de Bookstack.</p>\r\n<p id=\"bkmrk-l%27insertion-de-mon-s\">L\'insertion de mon script c\'est faite par connexion SFTP entre mon pc hôte et ma VM Debian 10.</p>\r\n<p id=\"bkmrk-voici-le-contenu-du-\">Voici le contenu du script :</p>\r\n<pre id=\"bkmrk-%3Ca-href%3D%22http%3A%2F%2Fwww.\"><code class=\"language-HTML\">&lt;a href=\"http://www.alsacreations.com/css/img/picto-quiz.png\"  download=\"Pacman_Kiwi.png\"&gt;Télécharger l\'image&lt;/a&gt;</code></pre>\r\n<p id=\"bkmrk-%C2%A0\"> </p>','Installation\r\nPour être plus rapide dans l\'installation, je suis passé par un script que j\'ai écris en cours me permettant d\'automatiser l\'installation et la configuration du Cheat (un aide-mémoire de commandes Linux) ainsi que de Bookstack.\r\nL\'insertion de mon script c\'est faite par connexion SFTP entre mon pc hôte et ma VM Debian 10.\r\nVoici le contenu du script :\r\n<a href=\"http://www.alsacreations.com/css/img/picto-quiz.png\"  download=\"Pacman_Kiwi.png\">Télécharger l\'image</a>\r\n ',1,'2021-11-04 17:12:34','2021-11-04 17:12:34','installation-et-configuration-du-bookstack','2-bookstack','version','','',4),(24,2,'Installation et configuration du BookStack','<h5 id=\"bkmrk-installation\"><strong>Installation</strong></h5>\r\n<p id=\"bkmrk-pour-%C3%AAtre-plus-rapid\">Pour être plus rapide dans l\'installation, je suis passé par un script que j\'ai écris en cours me permettant d\'automatiser l\'installation et la configuration du Cheat (un aide-mémoire de commandes Linux) ainsi que de Bookstack.</p>\r\n<p id=\"bkmrk-l%27insertion-de-mon-s\">L\'insertion de mon script c\'est faite par connexion SFTP entre mon pc hôte et ma VM Debian 10.</p>\r\n<p id=\"bkmrk-voici-le-contenu-du-\">Voici le contenu du script :</p>\r\n<p id=\"bkmrk-%C2%A0\"> </p>\r\n<p id=\"bkmrk-%C2%A0-0\"> </p>\r\n<p id=\"bkmrk-t%C3%A9l%C3%A9charger-l%27image\"><a href=\"http://www.alsacreations.com/css/img/picto-quiz.png\" download=\"Pacman_Kiwi.png\">Télécharger l\'image</a></p>','Installation\r\nPour être plus rapide dans l\'installation, je suis passé par un script que j\'ai écris en cours me permettant d\'automatiser l\'installation et la configuration du Cheat (un aide-mémoire de commandes Linux) ainsi que de Bookstack.\r\nL\'insertion de mon script c\'est faite par connexion SFTP entre mon pc hôte et ma VM Debian 10.\r\nVoici le contenu du script :\r\n \r\n \r\nTélécharger l\'image',1,'2021-11-04 17:13:10','2021-11-04 17:13:10','installation-et-configuration-du-bookstack','2-bookstack','version','','',5),(26,2,'Installation et configuration du BookStack','<h5 id=\"bkmrk-installation\"><strong>Installation</strong></h5>\r\n<p id=\"bkmrk-pour-%C3%AAtre-plus-rapid\">Pour être plus rapide dans l\'installation, je suis passé par un script que j\'ai écris en cours me permettant d\'automatiser l\'installation et la configuration du Cheat (un aide-mémoire de commandes Linux) ainsi que de Bookstack.</p>\r\n<p id=\"bkmrk-l%27insertion-de-mon-s\">L\'insertion de mon script c\'est faite par connexion SFTP entre mon pc hôte et ma VM Debian 10.</p>\r\n<p id=\"bkmrk-voici-le-contenu-du-\">Voici le contenu du script :</p>\r\n<pre id=\"bkmrk-%23%21%2Fbin%2Fbash-%23-%23-nom-\"><code class=\"language-MarkDown\">#!/bin/bash\r\n#\r\n# Nom		:\r\n# Description	:\r\n# Param 1	:\r\n# Param 2	:\r\n# Param 3	:\r\n# Param 4	:\r\n#\r\n# Ex) 		:	\r\n# Auteur	: Teddy JEAN-FRANCOIS\r\n# Email	: jfrancoisteddy@gmail.com\r\n# \r\n#\r\n#\r\n#\r\n#\r\n#\r\n\r\n# Install default packages\r\napt update\r\napt install -y sudo vim rsync screen mlocate htop net-tools git gnupg2 mc psmisc lynx curl git pigz pixz zip ncdu iptraf iotop dstat gdisk mc cifs-utils ntfs-3g sshfs gdisk lshw inxi figlet screenfetch tree tmux nginx php-fpm mariadb-server git composer php-mysql php-xml php-mbstring php-tokenizer php-curl php-gd -y | tee post_installation.log\r\n\r\n# Custom aliases\r\necho \"alias mv=\'mv -iv\'\" &gt;&gt; .bashrc\r\necho \"alias cp=\'cp -iv\'\" &gt;&gt; .bashrc\r\necho \"alias df=\'df -hT --total -x devtmpfs -x tmpfs\'\" &gt;&gt; .bashrc\r\necho \"alias rm=\'rm -iv --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chmod=\'chmod -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chown=\'chown -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chgrp=\'chgrp -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias ll=\'ls -la\'\" &gt;&gt; .bashrc\r\n# Custom prompt\r\necho \"PS1=\'\\[\\e[0;32m\\]\\u\\[\\e[0m\\]@\\[\\e[0;38;5;21m\\]\\h \\[\\e[0;93m\\]\\w \\[\\e[0m\\]\\\\n\\[\\e[0m\\]\\$ \\[\\e[0m\\]\'\" &gt;&gt; .bashrc\r\n\r\n# Set the bashrc\r\nyes | cp .bashrc /etc/skel/.bashrc \r\nmkdir /etc/skel/.ssh\r\ncd /etc/skel/.ssh\r\necho \"ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOJt6S6fmTmkEJDoyQTptUkEBT8xssZf+TCjgLg2/wXu teddy@TEDDY\" &gt;&gt; /etc/skel/.ssh\r\n\r\nchmod -v 640 /etc/ssh/sshd_config\r\nchmod -v 640 /etc/ssh/ssh_config\r\n\r\nsource .bashrc\r\n\r\n# Remove the motd and issue and replacing it with mine\r\nyes | rm /etc/motd\r\ncd /etc\r\necho \"Connection succed\" &gt;&gt; /etc/motd\r\n\r\n# Go back to the root directory\r\ncd\r\n\r\n#Install Cheat\r\nwget https://github.com/cheat/cheat/releases/download/4.2.2/cheat-linux-amd64.gz\r\ngunzip cheat-linux-amd64.gz\r\nchmod +x cheat-linux-amd64\r\necho y | mv -v cheat-linux-amd64 /usr/local/bin/cheat\r\nyes | cheat\r\n\r\n#Install Bookstack\r\ngit clone https://github.com/BookStackApp/BookStack.git --branch release --single-branch\r\nmv BookStack /var/www/bookstack\r\ncd /var/www\r\nchown -R www-data:www-data bookstack\r\ncd bookstack\r\n\r\ncomposer install --no-dev\r\n\r\ncd /etc/nginx/sites-available\r\nPHPV=$(php -v | head -1 | cut -c5-7)\r\n[ ! -f /etc/nginx/sites-available/bookstack.conf ] &amp;&amp; wget http://ftp.lutenruto.tk/bookstack.conf\r\n[ ! -L /etc/nginx/sites-enabled/bookstack.conf ] &amp;&amp; ln -s /etc/nginx/sites-available/bookstack.conf /etc/nginx/sites-enabled/bookstack.conf\r\n\r\ncd /var/www/bookstack\r\n\r\n[ ! -f /var/www/bookstack/.env ] &amp;&amp; wget http://ftp.lutenruto.tk/env\r\nmv env .env\r\n\r\nwget http://ftp.lutenruto.tk/script.sql\r\nmysql -h \"localhost\" -u \"root\" &lt; script.sql\r\nrm script.sql\r\necho y | php artisan key:generate\r\necho y | php artisan migrate\r\n\r\nHOSTEXISTS=$(cat /etc/hosts | grep -o -i wiki.esgi.local | wc -l)\r\nip=$(hostname -I)\r\n[ \"$HOSTEXISTS\" -eq \"0\" ] &amp;&amp; echo \"$ip wiki.esgi.local\" &gt;&gt; /etc/hosts\r\nsystemctl reload nginx\r\n\r\n# Updating mlocate database\r\nupdatedb\r\n\r\n# Creating the new superuser\r\nsudo useradd -m davy --shell /bin/bash\r\n# without prompt\r\necho -e -n \"root\\nroot\" | passwd P@ssword\r\n# with prompt\r\n# sudo passwd davy\r\nsudo usermod -aG sudo davy\r\nsudo usermod -u 10000 davy\r\nsudo groupmod -g 10000 davy\r\nsudo usermod -aG sudo esgi\r\n\r\n#Secure Grub\r\ncd /etc/grub.d\r\n\r\ncd \r\nyes | cp .bashrc /home/esgi/.bashrc\r\n\r\nHASH=$(echo -e -n \"root\\nroot\" |grub-mkpasswd-pbkdf2 |grep hachage|cut -d\" \" -f9)\r\n\r\necho \"cat &lt;&lt; EOF\" &gt;&gt; /etc/grub.d/00_header\r\necho \"set superusers=\'davy\'\" &gt;&gt; /etc/grub.d/00_header\r\necho \"password_pbkdf2 davy \'$HASH\'\" &gt;&gt; /etc/grub.d/00_header\r\necho \"EOF\" &gt;&gt; /etc/grub.d/00_header\r\n\r\nsudo update-grub\r\n\r\n#Extend lv_home +2G\r\nsudo lvextend -L +2G -r /dev/VGCRYPT/lv_home\r\n\r\nSWAPEXISTS=$(lsblk -f | grep lv_swap | wc -l)\r\nif [ \"$SWAPEXISTS\" -eq \"0\" ]\r\nthen\r\n    sudo lvcreate -n lv_swap -L 500m VGCRYPT\r\n    sudo mkswap /dev/VGCRYPT/lv_swap\r\n    echo \"/dev/VGCRYPT/lv_swap swap swap defaults 0 0\" |sudo tee -a /etc/fstab\r\n    sudo swapon -v /dev/VGCRYPT/lv_swap\r\nfi\r\n\r\n# Disable root account\r\nsudo usermod -s /usr/sbin/nologin root\r\n\r\nsudo reboot\r\n\r\n</code></pre>\r\n<p id=\"bkmrk-%C2%A0\"> </p>\r\n<p id=\"bkmrk-%C2%A0-0\"> </p>','Installation\r\nPour être plus rapide dans l\'installation, je suis passé par un script que j\'ai écris en cours me permettant d\'automatiser l\'installation et la configuration du Cheat (un aide-mémoire de commandes Linux) ainsi que de Bookstack.\r\nL\'insertion de mon script c\'est faite par connexion SFTP entre mon pc hôte et ma VM Debian 10.\r\nVoici le contenu du script :\r\n#!/bin/bash\r\n#\r\n# Nom		:\r\n# Description	:\r\n# Param 1	:\r\n# Param 2	:\r\n# Param 3	:\r\n# Param 4	:\r\n#\r\n# Ex) 		:	\r\n# Auteur	: Teddy JEAN-FRANCOIS\r\n# Email	: jfrancoisteddy@gmail.com\r\n# \r\n#\r\n#\r\n#\r\n#\r\n#\r\n\r\n# Install default packages\r\napt update\r\napt install -y sudo vim rsync screen mlocate htop net-tools git gnupg2 mc psmisc lynx curl git pigz pixz zip ncdu iptraf iotop dstat gdisk mc cifs-utils ntfs-3g sshfs gdisk lshw inxi figlet screenfetch tree tmux nginx php-fpm mariadb-server git composer php-mysql php-xml php-mbstring php-tokenizer php-curl php-gd -y | tee post_installation.log\r\n\r\n# Custom aliases\r\necho \"alias mv=\'mv -iv\'\" >> .bashrc\r\necho \"alias cp=\'cp -iv\'\" >> .bashrc\r\necho \"alias df=\'df -hT --total -x devtmpfs -x tmpfs\'\" >> .bashrc\r\necho \"alias rm=\'rm -iv --preserve-root\'\" >> .bashrc\r\necho \"alias chmod=\'chmod -v --preserve-root\'\" >> .bashrc\r\necho \"alias chown=\'chown -v --preserve-root\'\" >> .bashrc\r\necho \"alias chgrp=\'chgrp -v --preserve-root\'\" >> .bashrc\r\necho \"alias ll=\'ls -la\'\" >> .bashrc\r\n# Custom prompt\r\necho \"PS1=\'\\[\\e[0;32m\\]\\u\\[\\e[0m\\]@\\[\\e[0;38;5;21m\\]\\h \\[\\e[0;93m\\]\\w \\[\\e[0m\\]\\\\n\\[\\e[0m\\]\\$ \\[\\e[0m\\]\'\" >> .bashrc\r\n\r\n# Set the bashrc\r\nyes | cp .bashrc /etc/skel/.bashrc \r\nmkdir /etc/skel/.ssh\r\ncd /etc/skel/.ssh\r\necho \"ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOJt6S6fmTmkEJDoyQTptUkEBT8xssZf+TCjgLg2/wXu teddy@TEDDY\" >> /etc/skel/.ssh\r\n\r\nchmod -v 640 /etc/ssh/sshd_config\r\nchmod -v 640 /etc/ssh/ssh_config\r\n\r\nsource .bashrc\r\n\r\n# Remove the motd and issue and replacing it with mine\r\nyes | rm /etc/motd\r\ncd /etc\r\necho \"Connection succed\" >> /etc/motd\r\n\r\n# Go back to the root directory\r\ncd\r\n\r\n#Install Cheat\r\nwget https://github.com/cheat/cheat/releases/download/4.2.2/cheat-linux-amd64.gz\r\ngunzip cheat-linux-amd64.gz\r\nchmod +x cheat-linux-amd64\r\necho y | mv -v cheat-linux-amd64 /usr/local/bin/cheat\r\nyes | cheat\r\n\r\n#Install Bookstack\r\ngit clone https://github.com/BookStackApp/BookStack.git --branch release --single-branch\r\nmv BookStack /var/www/bookstack\r\ncd /var/www\r\nchown -R www-data:www-data bookstack\r\ncd bookstack\r\n\r\ncomposer install --no-dev\r\n\r\ncd /etc/nginx/sites-available\r\nPHPV=$(php -v | head -1 | cut -c5-7)\r\n[ ! -f /etc/nginx/sites-available/bookstack.conf ] && wget http://ftp.lutenruto.tk/bookstack.conf\r\n[ ! -L /etc/nginx/sites-enabled/bookstack.conf ] && ln -s /etc/nginx/sites-available/bookstack.conf /etc/nginx/sites-enabled/bookstack.conf\r\n\r\ncd /var/www/bookstack\r\n\r\n[ ! -f /var/www/bookstack/.env ] && wget http://ftp.lutenruto.tk/env\r\nmv env .env\r\n\r\nwget http://ftp.lutenruto.tk/script.sql\r\nmysql -h \"localhost\" -u \"root\" < script.sql\r\nrm script.sql\r\necho y | php artisan key:generate\r\necho y | php artisan migrate\r\n\r\nHOSTEXISTS=$(cat /etc/hosts | grep -o -i wiki.esgi.local | wc -l)\r\nip=$(hostname -I)\r\n[ \"$HOSTEXISTS\" -eq \"0\" ] && echo \"$ip wiki.esgi.local\" >> /etc/hosts\r\nsystemctl reload nginx\r\n\r\n# Updating mlocate database\r\nupdatedb\r\n\r\n# Creating the new superuser\r\nsudo useradd -m davy --shell /bin/bash\r\n# without prompt\r\necho -e -n \"root\\nroot\" | passwd P@ssword\r\n# with prompt\r\n# sudo passwd davy\r\nsudo usermod -aG sudo davy\r\nsudo usermod -u 10000 davy\r\nsudo groupmod -g 10000 davy\r\nsudo usermod -aG sudo esgi\r\n\r\n#Secure Grub\r\ncd /etc/grub.d\r\n\r\ncd \r\nyes | cp .bashrc /home/esgi/.bashrc\r\n\r\nHASH=$(echo -e -n \"root\\nroot\" |grub-mkpasswd-pbkdf2 |grep hachage|cut -d\" \" -f9)\r\n\r\necho \"cat << EOF\" >> /etc/grub.d/00_header\r\necho \"set superusers=\'davy\'\" >> /etc/grub.d/00_header\r\necho \"password_pbkdf2 davy \'$HASH\'\" >> /etc/grub.d/00_header\r\necho \"EOF\" >> /etc/grub.d/00_header\r\n\r\nsudo update-grub\r\n\r\n#Extend lv_home +2G\r\nsudo lvextend -L +2G -r /dev/VGCRYPT/lv_home\r\n\r\nSWAPEXISTS=$(lsblk -f | grep lv_swap | wc -l)\r\nif [ \"$SWAPEXISTS\" -eq \"0\" ]\r\nthen\r\n    sudo lvcreate -n lv_swap -L 500m VGCRYPT\r\n    sudo mkswap /dev/VGCRYPT/lv_swap\r\n    echo \"/dev/VGCRYPT/lv_swap swap swap defaults 0 0\" |sudo tee -a /etc/fstab\r\n    sudo swapon -v /dev/VGCRYPT/lv_swap\r\nfi\r\n\r\n# Disable root account\r\nsudo usermod -s /usr/sbin/nologin root\r\n\r\nsudo reboot\r\n\r\n\r\n \r\n ',1,'2021-11-04 17:14:06','2021-11-04 17:14:06','installation-et-configuration-du-bookstack','2-bookstack','version','','',6),(28,2,'Installation et configuration du BookStack','<h5 id=\"bkmrk-installation\"><strong>Installation</strong></h5>\r\n<p id=\"bkmrk-pour-%C3%AAtre-plus-rapid\">Pour être plus rapide dans l\'installation, je suis passé par un script que j\'ai écris en cours me permettant d\'automatiser l\'installation et la configuration du Cheat (un aide-mémoire de commandes Linux) ainsi que de Bookstack.</p>\r\n<p id=\"bkmrk-l%27insertion-de-mon-s\">L\'insertion de mon script c\'est faite par connexion SFTP entre mon pc hôte et ma VM Debian 10.</p>\r\n<p id=\"bkmrk-voici-le-contenu-du-\">Voici le contenu du script :</p>\r\n<pre id=\"bkmrk-%23%21%2Fbin%2Fbash-%23-%23-nom-\"><code class=\"language-MarkDown\">#!/bin/bash\r\n#\r\n# Nom		:\r\n# Description	:\r\n# Param 1	:\r\n# Param 2	:\r\n# Param 3	:\r\n# Param 4	:\r\n#\r\n# Ex) 		:	\r\n# Auteur	: Teddy JEAN-FRANCOIS\r\n# Email	: jfrancoisteddy@gmail.com\r\n# \r\n#\r\n#\r\n#\r\n#\r\n#\r\n\r\n# Install default packages\r\napt update\r\napt install -y sudo vim rsync screen mlocate htop net-tools git gnupg2 mc psmisc lynx curl git pigz pixz zip ncdu iptraf iotop dstat gdisk mc cifs-utils ntfs-3g sshfs gdisk lshw inxi figlet screenfetch tree tmux nginx php-fpm mariadb-server git composer php-mysql php-xml php-mbstring php-tokenizer php-curl php-gd -y | tee post_installation.log\r\n\r\n# Custom aliases\r\necho \"alias mv=\'mv -iv\'\" &gt;&gt; .bashrc\r\necho \"alias cp=\'cp -iv\'\" &gt;&gt; .bashrc\r\necho \"alias df=\'df -hT --total -x devtmpfs -x tmpfs\'\" &gt;&gt; .bashrc\r\necho \"alias rm=\'rm -iv --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chmod=\'chmod -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chown=\'chown -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chgrp=\'chgrp -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias ll=\'ls -la\'\" &gt;&gt; .bashrc\r\n# Custom prompt\r\necho \"PS1=\'\\[\\e[0;32m\\]\\u\\[\\e[0m\\]@\\[\\e[0;38;5;21m\\]\\h \\[\\e[0;93m\\]\\w \\[\\e[0m\\]\\\\n\\[\\e[0m\\]\\$ \\[\\e[0m\\]\'\" &gt;&gt; .bashrc\r\n\r\n# Set the bashrc\r\nyes | cp .bashrc /etc/skel/.bashrc \r\nmkdir /etc/skel/.ssh\r\ncd /etc/skel/.ssh\r\necho \"ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOJt6S6fmTmkEJDoyQTptUkEBT8xssZf+TCjgLg2/wXu teddy@TEDDY\" &gt;&gt; /etc/skel/.ssh\r\n\r\nchmod -v 640 /etc/ssh/sshd_config\r\nchmod -v 640 /etc/ssh/ssh_config\r\n\r\nsource .bashrc\r\n\r\n# Remove the motd and issue and replacing it with mine\r\nyes | rm /etc/motd\r\ncd /etc\r\necho \"Connection succed\" &gt;&gt; /etc/motd\r\n\r\n# Go back to the root directory\r\ncd\r\n\r\n#Install Cheat\r\nwget https://github.com/cheat/cheat/releases/download/4.2.2/cheat-linux-amd64.gz\r\ngunzip cheat-linux-amd64.gz\r\nchmod +x cheat-linux-amd64\r\necho y | mv -v cheat-linux-amd64 /usr/local/bin/cheat\r\nyes | cheat\r\n\r\n#Install Bookstack\r\ngit clone https://github.com/BookStackApp/BookStack.git --branch release --single-branch\r\nmv BookStack /var/www/bookstack\r\ncd /var/www\r\nchown -R www-data:www-data bookstack\r\ncd bookstack\r\n\r\ncomposer install --no-dev\r\n\r\ncd /etc/nginx/sites-available\r\nPHPV=$(php -v | head -1 | cut -c5-7)\r\n[ ! -f /etc/nginx/sites-available/bookstack.conf ] &amp;&amp; wget http://ftp.lutenruto.tk/bookstack.conf\r\n[ ! -L /etc/nginx/sites-enabled/bookstack.conf ] &amp;&amp; ln -s /etc/nginx/sites-available/bookstack.conf /etc/nginx/sites-enabled/bookstack.conf\r\n\r\ncd /var/www/bookstack\r\n\r\n[ ! -f /var/www/bookstack/.env ] &amp;&amp; wget http://ftp.lutenruto.tk/env\r\nmv env .env\r\n\r\nwget http://ftp.lutenruto.tk/script.sql\r\nmysql -h \"localhost\" -u \"root\" &lt; script.sql\r\nrm script.sql\r\necho y | php artisan key:generate\r\necho y | php artisan migrate\r\n\r\nHOSTEXISTS=$(cat /etc/hosts | grep -o -i wiki.esgi.local | wc -l)\r\nip=$(hostname -I)\r\n[ \"$HOSTEXISTS\" -eq \"0\" ] &amp;&amp; echo \"$ip wiki.esgi.local\" &gt;&gt; /etc/hosts\r\nsystemctl reload nginx\r\n\r\n# Updating mlocate database\r\nupdatedb\r\n\r\n# Creating the new superuser\r\nsudo useradd -m davy --shell /bin/bash\r\n# without prompt\r\necho -e -n \"root\\nroot\" | passwd P@ssword\r\n# with prompt\r\n# sudo passwd davy\r\nsudo usermod -aG sudo davy\r\nsudo usermod -u 10000 davy\r\nsudo groupmod -g 10000 davy\r\nsudo usermod -aG sudo esgi\r\n\r\n#Secure Grub\r\ncd /etc/grub.d\r\n\r\ncd \r\nyes | cp .bashrc /home/esgi/.bashrc\r\n\r\nHASH=$(echo -e -n \"root\\nroot\" |grub-mkpasswd-pbkdf2 |grep hachage|cut -d\" \" -f9)\r\n\r\necho \"cat &lt;&lt; EOF\" &gt;&gt; /etc/grub.d/00_header\r\necho \"set superusers=\'davy\'\" &gt;&gt; /etc/grub.d/00_header\r\necho \"password_pbkdf2 davy \'$HASH\'\" &gt;&gt; /etc/grub.d/00_header\r\necho \"EOF\" &gt;&gt; /etc/grub.d/00_header\r\n\r\nsudo update-grub\r\n\r\n#Extend lv_home +2G\r\nsudo lvextend -L +2G -r /dev/VGCRYPT/lv_home\r\n\r\nSWAPEXISTS=$(lsblk -f | grep lv_swap | wc -l)\r\nif [ \"$SWAPEXISTS\" -eq \"0\" ]\r\nthen\r\n    sudo lvcreate -n lv_swap -L 500m VGCRYPT\r\n    sudo mkswap /dev/VGCRYPT/lv_swap\r\n    echo \"/dev/VGCRYPT/lv_swap swap swap defaults 0 0\" |sudo tee -a /etc/fstab\r\n    sudo swapon -v /dev/VGCRYPT/lv_swap\r\nfi\r\n\r\n# Disable root account\r\nsudo usermod -s /usr/sbin/nologin root\r\n\r\nsudo reboot\r\n\r\n</code></pre>\r\n<p id=\"bkmrk-%C2%A0\">Lorsque vous avez récupéré le fichier dans votre VM Debian 10, n\'oubliez de faire un <code>chmod a+x nom_du_fichier.sh</code></p>\r\n<p id=\"bkmrk-%C2%A0-0\"> </p>','Installation\r\nPour être plus rapide dans l\'installation, je suis passé par un script que j\'ai écris en cours me permettant d\'automatiser l\'installation et la configuration du Cheat (un aide-mémoire de commandes Linux) ainsi que de Bookstack.\r\nL\'insertion de mon script c\'est faite par connexion SFTP entre mon pc hôte et ma VM Debian 10.\r\nVoici le contenu du script :\r\n#!/bin/bash\r\n#\r\n# Nom		:\r\n# Description	:\r\n# Param 1	:\r\n# Param 2	:\r\n# Param 3	:\r\n# Param 4	:\r\n#\r\n# Ex) 		:	\r\n# Auteur	: Teddy JEAN-FRANCOIS\r\n# Email	: jfrancoisteddy@gmail.com\r\n# \r\n#\r\n#\r\n#\r\n#\r\n#\r\n\r\n# Install default packages\r\napt update\r\napt install -y sudo vim rsync screen mlocate htop net-tools git gnupg2 mc psmisc lynx curl git pigz pixz zip ncdu iptraf iotop dstat gdisk mc cifs-utils ntfs-3g sshfs gdisk lshw inxi figlet screenfetch tree tmux nginx php-fpm mariadb-server git composer php-mysql php-xml php-mbstring php-tokenizer php-curl php-gd -y | tee post_installation.log\r\n\r\n# Custom aliases\r\necho \"alias mv=\'mv -iv\'\" >> .bashrc\r\necho \"alias cp=\'cp -iv\'\" >> .bashrc\r\necho \"alias df=\'df -hT --total -x devtmpfs -x tmpfs\'\" >> .bashrc\r\necho \"alias rm=\'rm -iv --preserve-root\'\" >> .bashrc\r\necho \"alias chmod=\'chmod -v --preserve-root\'\" >> .bashrc\r\necho \"alias chown=\'chown -v --preserve-root\'\" >> .bashrc\r\necho \"alias chgrp=\'chgrp -v --preserve-root\'\" >> .bashrc\r\necho \"alias ll=\'ls -la\'\" >> .bashrc\r\n# Custom prompt\r\necho \"PS1=\'\\[\\e[0;32m\\]\\u\\[\\e[0m\\]@\\[\\e[0;38;5;21m\\]\\h \\[\\e[0;93m\\]\\w \\[\\e[0m\\]\\\\n\\[\\e[0m\\]\\$ \\[\\e[0m\\]\'\" >> .bashrc\r\n\r\n# Set the bashrc\r\nyes | cp .bashrc /etc/skel/.bashrc \r\nmkdir /etc/skel/.ssh\r\ncd /etc/skel/.ssh\r\necho \"ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOJt6S6fmTmkEJDoyQTptUkEBT8xssZf+TCjgLg2/wXu teddy@TEDDY\" >> /etc/skel/.ssh\r\n\r\nchmod -v 640 /etc/ssh/sshd_config\r\nchmod -v 640 /etc/ssh/ssh_config\r\n\r\nsource .bashrc\r\n\r\n# Remove the motd and issue and replacing it with mine\r\nyes | rm /etc/motd\r\ncd /etc\r\necho \"Connection succed\" >> /etc/motd\r\n\r\n# Go back to the root directory\r\ncd\r\n\r\n#Install Cheat\r\nwget https://github.com/cheat/cheat/releases/download/4.2.2/cheat-linux-amd64.gz\r\ngunzip cheat-linux-amd64.gz\r\nchmod +x cheat-linux-amd64\r\necho y | mv -v cheat-linux-amd64 /usr/local/bin/cheat\r\nyes | cheat\r\n\r\n#Install Bookstack\r\ngit clone https://github.com/BookStackApp/BookStack.git --branch release --single-branch\r\nmv BookStack /var/www/bookstack\r\ncd /var/www\r\nchown -R www-data:www-data bookstack\r\ncd bookstack\r\n\r\ncomposer install --no-dev\r\n\r\ncd /etc/nginx/sites-available\r\nPHPV=$(php -v | head -1 | cut -c5-7)\r\n[ ! -f /etc/nginx/sites-available/bookstack.conf ] && wget http://ftp.lutenruto.tk/bookstack.conf\r\n[ ! -L /etc/nginx/sites-enabled/bookstack.conf ] && ln -s /etc/nginx/sites-available/bookstack.conf /etc/nginx/sites-enabled/bookstack.conf\r\n\r\ncd /var/www/bookstack\r\n\r\n[ ! -f /var/www/bookstack/.env ] && wget http://ftp.lutenruto.tk/env\r\nmv env .env\r\n\r\nwget http://ftp.lutenruto.tk/script.sql\r\nmysql -h \"localhost\" -u \"root\" < script.sql\r\nrm script.sql\r\necho y | php artisan key:generate\r\necho y | php artisan migrate\r\n\r\nHOSTEXISTS=$(cat /etc/hosts | grep -o -i wiki.esgi.local | wc -l)\r\nip=$(hostname -I)\r\n[ \"$HOSTEXISTS\" -eq \"0\" ] && echo \"$ip wiki.esgi.local\" >> /etc/hosts\r\nsystemctl reload nginx\r\n\r\n# Updating mlocate database\r\nupdatedb\r\n\r\n# Creating the new superuser\r\nsudo useradd -m davy --shell /bin/bash\r\n# without prompt\r\necho -e -n \"root\\nroot\" | passwd P@ssword\r\n# with prompt\r\n# sudo passwd davy\r\nsudo usermod -aG sudo davy\r\nsudo usermod -u 10000 davy\r\nsudo groupmod -g 10000 davy\r\nsudo usermod -aG sudo esgi\r\n\r\n#Secure Grub\r\ncd /etc/grub.d\r\n\r\ncd \r\nyes | cp .bashrc /home/esgi/.bashrc\r\n\r\nHASH=$(echo -e -n \"root\\nroot\" |grub-mkpasswd-pbkdf2 |grep hachage|cut -d\" \" -f9)\r\n\r\necho \"cat << EOF\" >> /etc/grub.d/00_header\r\necho \"set superusers=\'davy\'\" >> /etc/grub.d/00_header\r\necho \"password_pbkdf2 davy \'$HASH\'\" >> /etc/grub.d/00_header\r\necho \"EOF\" >> /etc/grub.d/00_header\r\n\r\nsudo update-grub\r\n\r\n#Extend lv_home +2G\r\nsudo lvextend -L +2G -r /dev/VGCRYPT/lv_home\r\n\r\nSWAPEXISTS=$(lsblk -f | grep lv_swap | wc -l)\r\nif [ \"$SWAPEXISTS\" -eq \"0\" ]\r\nthen\r\n    sudo lvcreate -n lv_swap -L 500m VGCRYPT\r\n    sudo mkswap /dev/VGCRYPT/lv_swap\r\n    echo \"/dev/VGCRYPT/lv_swap swap swap defaults 0 0\" |sudo tee -a /etc/fstab\r\n    sudo swapon -v /dev/VGCRYPT/lv_swap\r\nfi\r\n\r\n# Disable root account\r\nsudo usermod -s /usr/sbin/nologin root\r\n\r\nsudo reboot\r\n\r\n\r\nLorsque vous avez récupéré le fichier dans votre VM Debian 10, n\'oubliez de faire un chmod a+x nom_du_fichier.sh\r\n ',1,'2021-11-04 17:15:38','2021-11-04 17:15:38','installation-et-configuration-du-bookstack','2-bookstack','version','','',7),(30,2,'Installation et configuration du BookStack','<h5 id=\"bkmrk-installation\"><strong>Installation</strong></h5>\r\n<p id=\"bkmrk-pour-%C3%AAtre-plus-rapid\">Pour être plus rapide dans l\'installation, je suis passé par un script que j\'ai écris en cours me permettant d\'automatiser l\'installation et la configuration du Cheat (un aide-mémoire de commandes Linux) ainsi que de Bookstack.</p>\r\n<p id=\"bkmrk-l%27insertion-de-mon-s\">L\'insertion de mon script c\'est faite par connexion SFTP entre mon pc hôte et ma VM Debian 10.</p>\r\n<p id=\"bkmrk-voici-le-contenu-du-\">Voici le contenu du script :</p>\r\n<pre id=\"bkmrk-%23%21%2Fbin%2Fbash-%23-%23-nom-\"><code class=\"language-MarkDown\">#!/bin/bash\r\n#\r\n# Nom		:\r\n# Description	:\r\n# Param 1	:\r\n# Param 2	:\r\n# Param 3	:\r\n# Param 4	:\r\n#\r\n# Ex) 		:	\r\n# Auteur	: Teddy JEAN-FRANCOIS\r\n# Email	: jfrancoisteddy@gmail.com\r\n# \r\n#\r\n#\r\n#\r\n#\r\n#\r\n\r\n# Install default packages\r\napt update\r\napt install -y sudo vim rsync screen mlocate htop net-tools git gnupg2 mc psmisc lynx curl git pigz pixz zip ncdu iptraf iotop dstat gdisk mc cifs-utils ntfs-3g sshfs gdisk lshw inxi figlet screenfetch tree tmux nginx php-fpm mariadb-server git composer php-mysql php-xml php-mbstring php-tokenizer php-curl php-gd -y | tee post_installation.log\r\n\r\n# Custom aliases\r\necho \"alias mv=\'mv -iv\'\" &gt;&gt; .bashrc\r\necho \"alias cp=\'cp -iv\'\" &gt;&gt; .bashrc\r\necho \"alias df=\'df -hT --total -x devtmpfs -x tmpfs\'\" &gt;&gt; .bashrc\r\necho \"alias rm=\'rm -iv --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chmod=\'chmod -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chown=\'chown -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chgrp=\'chgrp -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias ll=\'ls -la\'\" &gt;&gt; .bashrc\r\n# Custom prompt\r\necho \"PS1=\'\\[\\e[0;32m\\]\\u\\[\\e[0m\\]@\\[\\e[0;38;5;21m\\]\\h \\[\\e[0;93m\\]\\w \\[\\e[0m\\]\\\\n\\[\\e[0m\\]\\$ \\[\\e[0m\\]\'\" &gt;&gt; .bashrc\r\n\r\n# Set the bashrc\r\nyes | cp .bashrc /etc/skel/.bashrc \r\nmkdir /etc/skel/.ssh\r\ncd /etc/skel/.ssh\r\necho \"ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOJt6S6fmTmkEJDoyQTptUkEBT8xssZf+TCjgLg2/wXu teddy@TEDDY\" &gt;&gt; /etc/skel/.ssh\r\n\r\nchmod -v 640 /etc/ssh/sshd_config\r\nchmod -v 640 /etc/ssh/ssh_config\r\n\r\nsource .bashrc\r\n\r\n# Remove the motd and issue and replacing it with mine\r\nyes | rm /etc/motd\r\ncd /etc\r\necho \"Connection succed\" &gt;&gt; /etc/motd\r\n\r\n# Go back to the root directory\r\ncd\r\n\r\n#Install Cheat\r\nwget https://github.com/cheat/cheat/releases/download/4.2.2/cheat-linux-amd64.gz\r\ngunzip cheat-linux-amd64.gz\r\nchmod +x cheat-linux-amd64\r\necho y | mv -v cheat-linux-amd64 /usr/local/bin/cheat\r\nyes | cheat\r\n\r\n#Install Bookstack\r\ngit clone https://github.com/BookStackApp/BookStack.git --branch release --single-branch\r\nmv BookStack /var/www/bookstack\r\ncd /var/www\r\nchown -R www-data:www-data bookstack\r\ncd bookstack\r\n\r\ncomposer install --no-dev\r\n\r\ncd /etc/nginx/sites-available\r\nPHPV=$(php -v | head -1 | cut -c5-7)\r\n[ ! -f /etc/nginx/sites-available/bookstack.conf ] &amp;&amp; wget http://ftp.lutenruto.tk/bookstack.conf\r\n[ ! -L /etc/nginx/sites-enabled/bookstack.conf ] &amp;&amp; ln -s /etc/nginx/sites-available/bookstack.conf /etc/nginx/sites-enabled/bookstack.conf\r\n\r\ncd /var/www/bookstack\r\n\r\n[ ! -f /var/www/bookstack/.env ] &amp;&amp; wget http://ftp.lutenruto.tk/env\r\nmv env .env\r\n\r\nwget http://ftp.lutenruto.tk/script.sql\r\nmysql -h \"localhost\" -u \"root\" &lt; script.sql\r\nrm script.sql\r\necho y | php artisan key:generate\r\necho y | php artisan migrate\r\n\r\nHOSTEXISTS=$(cat /etc/hosts | grep -o -i wiki.esgi.local | wc -l)\r\nip=$(hostname -I)\r\n[ \"$HOSTEXISTS\" -eq \"0\" ] &amp;&amp; echo \"$ip wiki.esgi.local\" &gt;&gt; /etc/hosts\r\nsystemctl reload nginx\r\n\r\n# Updating mlocate database\r\nupdatedb\r\n\r\n# Creating the new superuser\r\nsudo useradd -m davy --shell /bin/bash\r\n# without prompt\r\necho -e -n \"root\\nroot\" | passwd P@ssword\r\n# with prompt\r\n# sudo passwd davy\r\nsudo usermod -aG sudo davy\r\nsudo usermod -u 10000 davy\r\nsudo groupmod -g 10000 davy\r\nsudo usermod -aG sudo esgi\r\n\r\n#Secure Grub\r\ncd /etc/grub.d\r\n\r\ncd \r\nyes | cp .bashrc /home/esgi/.bashrc\r\n\r\nHASH=$(echo -e -n \"root\\nroot\" |grub-mkpasswd-pbkdf2 |grep hachage|cut -d\" \" -f9)\r\n\r\necho \"cat &lt;&lt; EOF\" &gt;&gt; /etc/grub.d/00_header\r\necho \"set superusers=\'davy\'\" &gt;&gt; /etc/grub.d/00_header\r\necho \"password_pbkdf2 davy \'$HASH\'\" &gt;&gt; /etc/grub.d/00_header\r\necho \"EOF\" &gt;&gt; /etc/grub.d/00_header\r\n\r\nsudo update-grub\r\n\r\n#Extend lv_home +2G\r\nsudo lvextend -L +2G -r /dev/VGCRYPT/lv_home\r\n\r\nSWAPEXISTS=$(lsblk -f | grep lv_swap | wc -l)\r\nif [ \"$SWAPEXISTS\" -eq \"0\" ]\r\nthen\r\n    sudo lvcreate -n lv_swap -L 500m VGCRYPT\r\n    sudo mkswap /dev/VGCRYPT/lv_swap\r\n    echo \"/dev/VGCRYPT/lv_swap swap swap defaults 0 0\" |sudo tee -a /etc/fstab\r\n    sudo swapon -v /dev/VGCRYPT/lv_swap\r\nfi\r\n\r\n# Disable root account\r\nsudo usermod -s /usr/sbin/nologin root\r\n\r\nsudo reboot\r\n\r\n</code></pre>\r\n<p id=\"bkmrk-%C2%A0\">Lorsque vous avez récupéré le fichier dans votre VM Debian 10, n\'oubliez de faire un <code>chmod a+x nom_du_fichier.sh</code> . Cela vous permettra de pouvoir exécuter le script car il est par défaut non exécutable.</p>\r\n<p id=\"bkmrk-puis%C2%A0sudo-.%2Fpost_ins\">Puis <code>sudo ./post_installation</code> pour le lancer.</p>','Installation\r\nPour être plus rapide dans l\'installation, je suis passé par un script que j\'ai écris en cours me permettant d\'automatiser l\'installation et la configuration du Cheat (un aide-mémoire de commandes Linux) ainsi que de Bookstack.\r\nL\'insertion de mon script c\'est faite par connexion SFTP entre mon pc hôte et ma VM Debian 10.\r\nVoici le contenu du script :\r\n#!/bin/bash\r\n#\r\n# Nom		:\r\n# Description	:\r\n# Param 1	:\r\n# Param 2	:\r\n# Param 3	:\r\n# Param 4	:\r\n#\r\n# Ex) 		:	\r\n# Auteur	: Teddy JEAN-FRANCOIS\r\n# Email	: jfrancoisteddy@gmail.com\r\n# \r\n#\r\n#\r\n#\r\n#\r\n#\r\n\r\n# Install default packages\r\napt update\r\napt install -y sudo vim rsync screen mlocate htop net-tools git gnupg2 mc psmisc lynx curl git pigz pixz zip ncdu iptraf iotop dstat gdisk mc cifs-utils ntfs-3g sshfs gdisk lshw inxi figlet screenfetch tree tmux nginx php-fpm mariadb-server git composer php-mysql php-xml php-mbstring php-tokenizer php-curl php-gd -y | tee post_installation.log\r\n\r\n# Custom aliases\r\necho \"alias mv=\'mv -iv\'\" >> .bashrc\r\necho \"alias cp=\'cp -iv\'\" >> .bashrc\r\necho \"alias df=\'df -hT --total -x devtmpfs -x tmpfs\'\" >> .bashrc\r\necho \"alias rm=\'rm -iv --preserve-root\'\" >> .bashrc\r\necho \"alias chmod=\'chmod -v --preserve-root\'\" >> .bashrc\r\necho \"alias chown=\'chown -v --preserve-root\'\" >> .bashrc\r\necho \"alias chgrp=\'chgrp -v --preserve-root\'\" >> .bashrc\r\necho \"alias ll=\'ls -la\'\" >> .bashrc\r\n# Custom prompt\r\necho \"PS1=\'\\[\\e[0;32m\\]\\u\\[\\e[0m\\]@\\[\\e[0;38;5;21m\\]\\h \\[\\e[0;93m\\]\\w \\[\\e[0m\\]\\\\n\\[\\e[0m\\]\\$ \\[\\e[0m\\]\'\" >> .bashrc\r\n\r\n# Set the bashrc\r\nyes | cp .bashrc /etc/skel/.bashrc \r\nmkdir /etc/skel/.ssh\r\ncd /etc/skel/.ssh\r\necho \"ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOJt6S6fmTmkEJDoyQTptUkEBT8xssZf+TCjgLg2/wXu teddy@TEDDY\" >> /etc/skel/.ssh\r\n\r\nchmod -v 640 /etc/ssh/sshd_config\r\nchmod -v 640 /etc/ssh/ssh_config\r\n\r\nsource .bashrc\r\n\r\n# Remove the motd and issue and replacing it with mine\r\nyes | rm /etc/motd\r\ncd /etc\r\necho \"Connection succed\" >> /etc/motd\r\n\r\n# Go back to the root directory\r\ncd\r\n\r\n#Install Cheat\r\nwget https://github.com/cheat/cheat/releases/download/4.2.2/cheat-linux-amd64.gz\r\ngunzip cheat-linux-amd64.gz\r\nchmod +x cheat-linux-amd64\r\necho y | mv -v cheat-linux-amd64 /usr/local/bin/cheat\r\nyes | cheat\r\n\r\n#Install Bookstack\r\ngit clone https://github.com/BookStackApp/BookStack.git --branch release --single-branch\r\nmv BookStack /var/www/bookstack\r\ncd /var/www\r\nchown -R www-data:www-data bookstack\r\ncd bookstack\r\n\r\ncomposer install --no-dev\r\n\r\ncd /etc/nginx/sites-available\r\nPHPV=$(php -v | head -1 | cut -c5-7)\r\n[ ! -f /etc/nginx/sites-available/bookstack.conf ] && wget http://ftp.lutenruto.tk/bookstack.conf\r\n[ ! -L /etc/nginx/sites-enabled/bookstack.conf ] && ln -s /etc/nginx/sites-available/bookstack.conf /etc/nginx/sites-enabled/bookstack.conf\r\n\r\ncd /var/www/bookstack\r\n\r\n[ ! -f /var/www/bookstack/.env ] && wget http://ftp.lutenruto.tk/env\r\nmv env .env\r\n\r\nwget http://ftp.lutenruto.tk/script.sql\r\nmysql -h \"localhost\" -u \"root\" < script.sql\r\nrm script.sql\r\necho y | php artisan key:generate\r\necho y | php artisan migrate\r\n\r\nHOSTEXISTS=$(cat /etc/hosts | grep -o -i wiki.esgi.local | wc -l)\r\nip=$(hostname -I)\r\n[ \"$HOSTEXISTS\" -eq \"0\" ] && echo \"$ip wiki.esgi.local\" >> /etc/hosts\r\nsystemctl reload nginx\r\n\r\n# Updating mlocate database\r\nupdatedb\r\n\r\n# Creating the new superuser\r\nsudo useradd -m davy --shell /bin/bash\r\n# without prompt\r\necho -e -n \"root\\nroot\" | passwd P@ssword\r\n# with prompt\r\n# sudo passwd davy\r\nsudo usermod -aG sudo davy\r\nsudo usermod -u 10000 davy\r\nsudo groupmod -g 10000 davy\r\nsudo usermod -aG sudo esgi\r\n\r\n#Secure Grub\r\ncd /etc/grub.d\r\n\r\ncd \r\nyes | cp .bashrc /home/esgi/.bashrc\r\n\r\nHASH=$(echo -e -n \"root\\nroot\" |grub-mkpasswd-pbkdf2 |grep hachage|cut -d\" \" -f9)\r\n\r\necho \"cat << EOF\" >> /etc/grub.d/00_header\r\necho \"set superusers=\'davy\'\" >> /etc/grub.d/00_header\r\necho \"password_pbkdf2 davy \'$HASH\'\" >> /etc/grub.d/00_header\r\necho \"EOF\" >> /etc/grub.d/00_header\r\n\r\nsudo update-grub\r\n\r\n#Extend lv_home +2G\r\nsudo lvextend -L +2G -r /dev/VGCRYPT/lv_home\r\n\r\nSWAPEXISTS=$(lsblk -f | grep lv_swap | wc -l)\r\nif [ \"$SWAPEXISTS\" -eq \"0\" ]\r\nthen\r\n    sudo lvcreate -n lv_swap -L 500m VGCRYPT\r\n    sudo mkswap /dev/VGCRYPT/lv_swap\r\n    echo \"/dev/VGCRYPT/lv_swap swap swap defaults 0 0\" |sudo tee -a /etc/fstab\r\n    sudo swapon -v /dev/VGCRYPT/lv_swap\r\nfi\r\n\r\n# Disable root account\r\nsudo usermod -s /usr/sbin/nologin root\r\n\r\nsudo reboot\r\n\r\n\r\nLorsque vous avez récupéré le fichier dans votre VM Debian 10, n\'oubliez de faire un chmod a+x nom_du_fichier.sh . Cela vous permettra de pouvoir exécuter le script car il est par défaut non exécutable.\r\nPuis sudo ./post_installation pour le lancer.',1,'2021-11-04 17:17:08','2021-11-04 17:17:09','installation-et-configuration-du-bookstack','2-bookstack','version','','',8),(32,2,'Installation et configuration du BookStack','<h5 id=\"bkmrk-installation\"><strong>Installation</strong></h5>\r\n<p id=\"bkmrk-pour-%C3%AAtre-plus-rapid\">Pour être plus rapide dans l\'installation, je suis passé par un script que j\'ai écris en cours me permettant d\'automatiser l\'installation et la configuration du Cheat (un aide-mémoire de commandes Linux) ainsi que de Bookstack.</p>\r\n<p id=\"bkmrk-l%27insertion-de-mon-s\">L\'insertion de mon script c\'est faite par connexion SFTP entre mon pc hôte et ma VM Debian 10. (Le script en question se trouve à la fin du fichier)</p>\r\n<p id=\"bkmrk-%C2%A0\">Lorsque vous avez récupéré le fichier dans votre VM Debian 10, n\'oubliez de faire un <code>chmod a+x nom_du_fichier.sh</code> . Cela vous permettra de pouvoir exécuter le script car il est par défaut non exécutable.</p>\r\n<p id=\"bkmrk-puis%C2%A0sudo-.%2Fpost_ins\">Puis <code>sudo ./post_installation</code> pour le lancer.</p>\r\n<h5 id=\"bkmrk-configuration\"><strong>Configuration</strong></h5>\r\n<p id=\"bkmrk-pour-vous-connecter-\">Pour vous connecter au BookStack depuis le navigateur de votre ordinateur hôte (non pas la vm). Il vous faudra ajouter une ligne supplémentaire dans le fichier hosts de voir ordinateur. Celle-ci vous permettra à vous connecter au BookStack hébergé au sein de votre machine virtuelle.</p>\r\n<ul id=\"bkmrk-acc%C3%A8s-au-fichier-hos\"><li>Accès au fichier hosts sur Windows : <code>C:\\windows\\system32\\drivers\\etc\\hosts</code> à ouvrir avec le bloc-note ou tout autre éditeur en mode <span style=\"color: #ff0000;\"><strong>ADMINISTRATEUR</strong><span style=\"color: #000000;\">, sinon vous ne pourrez pas enregistrer vos modifications.</span></span></li>\r\n<li><span style=\"color: #ff0000;\"><span style=\"color: #000000;\">Ajouter l\'adresse ip de votre machine virtuelle ainsi que le lien vers le BookStack dans le fichier hosts : <code>X.X.X.X wiki.esgi.local</code></span></span></li>\r\n<li>Ensuite allez sur <a href=\"http://wiki.esgi.local\">http://wiki.esgi.local</a> ,les identifiants par défauts sont :\r\n<ul><li>admin@admin.com</li>\r\n<li>password</li>\r\n</ul></li>\r\n</ul><pre id=\"bkmrk-%23%21%2Fbin%2Fbash-%23-%23-nom-\"><code class=\"language-MarkDown\">#!/bin/bash\r\n#\r\n# Nom		:\r\n# Description	:\r\n# Param 1	:\r\n# Param 2	:\r\n# Param 3	:\r\n# Param 4	:\r\n#\r\n# Ex) 		:	\r\n# Auteur	: Teddy JEAN-FRANCOIS\r\n# Email	: jfrancoisteddy@gmail.com\r\n# \r\n#\r\n#\r\n#\r\n#\r\n#\r\n\r\n# Install default packages\r\napt update\r\napt install -y sudo vim rsync screen mlocate htop net-tools git gnupg2 mc psmisc lynx curl git pigz pixz zip ncdu iptraf iotop dstat gdisk mc cifs-utils ntfs-3g sshfs gdisk lshw inxi figlet screenfetch tree tmux nginx php-fpm mariadb-server git composer php-mysql php-xml php-mbstring php-tokenizer php-curl php-gd -y | tee post_installation.log\r\n\r\n# Custom aliases\r\necho \"alias mv=\'mv -iv\'\" &gt;&gt; .bashrc\r\necho \"alias cp=\'cp -iv\'\" &gt;&gt; .bashrc\r\necho \"alias df=\'df -hT --total -x devtmpfs -x tmpfs\'\" &gt;&gt; .bashrc\r\necho \"alias rm=\'rm -iv --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chmod=\'chmod -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chown=\'chown -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chgrp=\'chgrp -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias ll=\'ls -la\'\" &gt;&gt; .bashrc\r\n# Custom prompt\r\necho \"PS1=\'\\[\\e[0;32m\\]\\u\\[\\e[0m\\]@\\[\\e[0;38;5;21m\\]\\h \\[\\e[0;93m\\]\\w \\[\\e[0m\\]\\\\n\\[\\e[0m\\]\\$ \\[\\e[0m\\]\'\" &gt;&gt; .bashrc\r\n\r\n# Set the bashrc\r\nyes | cp .bashrc /etc/skel/.bashrc \r\nmkdir /etc/skel/.ssh\r\ncd /etc/skel/.ssh\r\necho \"ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOJt6S6fmTmkEJDoyQTptUkEBT8xssZf+TCjgLg2/wXu teddy@TEDDY\" &gt;&gt; /etc/skel/.ssh\r\n\r\nchmod -v 640 /etc/ssh/sshd_config\r\nchmod -v 640 /etc/ssh/ssh_config\r\n\r\nsource .bashrc\r\n\r\n# Remove the motd and issue and replacing it with mine\r\nyes | rm /etc/motd\r\ncd /etc\r\necho \"Connection succed\" &gt;&gt; /etc/motd\r\n\r\n# Go back to the root directory\r\ncd\r\n\r\n#Install Cheat\r\nwget https://github.com/cheat/cheat/releases/download/4.2.2/cheat-linux-amd64.gz\r\ngunzip cheat-linux-amd64.gz\r\nchmod +x cheat-linux-amd64\r\necho y | mv -v cheat-linux-amd64 /usr/local/bin/cheat\r\nyes | cheat\r\n\r\n#Install Bookstack\r\ngit clone https://github.com/BookStackApp/BookStack.git --branch release --single-branch\r\nmv BookStack /var/www/bookstack\r\ncd /var/www\r\nchown -R www-data:www-data bookstack\r\ncd bookstack\r\n\r\ncomposer install --no-dev\r\n\r\ncd /etc/nginx/sites-available\r\nPHPV=$(php -v | head -1 | cut -c5-7)\r\n[ ! -f /etc/nginx/sites-available/bookstack.conf ] &amp;&amp; wget http://ftp.lutenruto.tk/bookstack.conf\r\n[ ! -L /etc/nginx/sites-enabled/bookstack.conf ] &amp;&amp; ln -s /etc/nginx/sites-available/bookstack.conf /etc/nginx/sites-enabled/bookstack.conf\r\n\r\ncd /var/www/bookstack\r\n\r\n[ ! -f /var/www/bookstack/.env ] &amp;&amp; wget http://ftp.lutenruto.tk/env\r\nmv env .env\r\n\r\nwget http://ftp.lutenruto.tk/script.sql\r\nmysql -h \"localhost\" -u \"root\" &lt; script.sql\r\nrm script.sql\r\necho y | php artisan key:generate\r\necho y | php artisan migrate\r\n\r\nHOSTEXISTS=$(cat /etc/hosts | grep -o -i wiki.esgi.local | wc -l)\r\nip=$(hostname -I)\r\n[ \"$HOSTEXISTS\" -eq \"0\" ] &amp;&amp; echo \"$ip wiki.esgi.local\" &gt;&gt; /etc/hosts\r\nsystemctl reload nginx\r\n\r\n# Updating mlocate database\r\nupdatedb\r\n\r\n# Creating the new superuser\r\nsudo useradd -m davy --shell /bin/bash\r\n# without prompt\r\necho -e -n \"root\\nroot\" | passwd P@ssword\r\n# with prompt\r\n# sudo passwd davy\r\nsudo usermod -aG sudo davy\r\nsudo usermod -u 10000 davy\r\nsudo groupmod -g 10000 davy\r\nsudo usermod -aG sudo esgi\r\n\r\n#Secure Grub\r\ncd /etc/grub.d\r\n\r\ncd \r\nyes | cp .bashrc /home/esgi/.bashrc\r\n\r\nHASH=$(echo -e -n \"root\\nroot\" |grub-mkpasswd-pbkdf2 |grep hachage|cut -d\" \" -f9)\r\n\r\necho \"cat &lt;&lt; EOF\" &gt;&gt; /etc/grub.d/00_header\r\necho \"set superusers=\'davy\'\" &gt;&gt; /etc/grub.d/00_header\r\necho \"password_pbkdf2 davy \'$HASH\'\" &gt;&gt; /etc/grub.d/00_header\r\necho \"EOF\" &gt;&gt; /etc/grub.d/00_header\r\n\r\nsudo update-grub\r\n\r\n#Extend lv_home +2G\r\nsudo lvextend -L +2G -r /dev/VGCRYPT/lv_home\r\n\r\nSWAPEXISTS=$(lsblk -f | grep lv_swap | wc -l)\r\nif [ \"$SWAPEXISTS\" -eq \"0\" ]\r\nthen\r\n    sudo lvcreate -n lv_swap -L 500m VGCRYPT\r\n    sudo mkswap /dev/VGCRYPT/lv_swap\r\n    echo \"/dev/VGCRYPT/lv_swap swap swap defaults 0 0\" |sudo tee -a /etc/fstab\r\n    sudo swapon -v /dev/VGCRYPT/lv_swap\r\nfi\r\n\r\n# Disable root account\r\nsudo usermod -s /usr/sbin/nologin root\r\n\r\nsudo reboot\r\n\r\n</code></pre>\r\n<p id=\"bkmrk-%C2%A0-0\"> </p>','Installation\r\nPour être plus rapide dans l\'installation, je suis passé par un script que j\'ai écris en cours me permettant d\'automatiser l\'installation et la configuration du Cheat (un aide-mémoire de commandes Linux) ainsi que de Bookstack.\r\nL\'insertion de mon script c\'est faite par connexion SFTP entre mon pc hôte et ma VM Debian 10. (Le script en question se trouve à la fin du fichier)\r\nLorsque vous avez récupéré le fichier dans votre VM Debian 10, n\'oubliez de faire un chmod a+x nom_du_fichier.sh . Cela vous permettra de pouvoir exécuter le script car il est par défaut non exécutable.\r\nPuis sudo ./post_installation pour le lancer.\r\nConfiguration\r\nPour vous connecter au BookStack depuis le navigateur de votre ordinateur hôte (non pas la vm). Il vous faudra ajouter une ligne supplémentaire dans le fichier hosts de voir ordinateur. Celle-ci vous permettra à vous connecter au BookStack hébergé au sein de votre machine virtuelle.\r\nAccès au fichier hosts sur Windows : C:\\windows\\system32\\drivers\\etc\\hosts à ouvrir avec le bloc-note ou tout autre éditeur en mode ADMINISTRATEUR, sinon vous ne pourrez pas enregistrer vos modifications.\r\nAjouter l\'adresse ip de votre machine virtuelle ainsi que le lien vers le BookStack dans le fichier hosts : X.X.X.X wiki.esgi.local\r\nEnsuite allez sur http://wiki.esgi.local ,les identifiants par défauts sont :\r\nadmin@admin.com\r\npassword\r\n\r\n#!/bin/bash\r\n#\r\n# Nom		:\r\n# Description	:\r\n# Param 1	:\r\n# Param 2	:\r\n# Param 3	:\r\n# Param 4	:\r\n#\r\n# Ex) 		:	\r\n# Auteur	: Teddy JEAN-FRANCOIS\r\n# Email	: jfrancoisteddy@gmail.com\r\n# \r\n#\r\n#\r\n#\r\n#\r\n#\r\n\r\n# Install default packages\r\napt update\r\napt install -y sudo vim rsync screen mlocate htop net-tools git gnupg2 mc psmisc lynx curl git pigz pixz zip ncdu iptraf iotop dstat gdisk mc cifs-utils ntfs-3g sshfs gdisk lshw inxi figlet screenfetch tree tmux nginx php-fpm mariadb-server git composer php-mysql php-xml php-mbstring php-tokenizer php-curl php-gd -y | tee post_installation.log\r\n\r\n# Custom aliases\r\necho \"alias mv=\'mv -iv\'\" >> .bashrc\r\necho \"alias cp=\'cp -iv\'\" >> .bashrc\r\necho \"alias df=\'df -hT --total -x devtmpfs -x tmpfs\'\" >> .bashrc\r\necho \"alias rm=\'rm -iv --preserve-root\'\" >> .bashrc\r\necho \"alias chmod=\'chmod -v --preserve-root\'\" >> .bashrc\r\necho \"alias chown=\'chown -v --preserve-root\'\" >> .bashrc\r\necho \"alias chgrp=\'chgrp -v --preserve-root\'\" >> .bashrc\r\necho \"alias ll=\'ls -la\'\" >> .bashrc\r\n# Custom prompt\r\necho \"PS1=\'\\[\\e[0;32m\\]\\u\\[\\e[0m\\]@\\[\\e[0;38;5;21m\\]\\h \\[\\e[0;93m\\]\\w \\[\\e[0m\\]\\\\n\\[\\e[0m\\]\\$ \\[\\e[0m\\]\'\" >> .bashrc\r\n\r\n# Set the bashrc\r\nyes | cp .bashrc /etc/skel/.bashrc \r\nmkdir /etc/skel/.ssh\r\ncd /etc/skel/.ssh\r\necho \"ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOJt6S6fmTmkEJDoyQTptUkEBT8xssZf+TCjgLg2/wXu teddy@TEDDY\" >> /etc/skel/.ssh\r\n\r\nchmod -v 640 /etc/ssh/sshd_config\r\nchmod -v 640 /etc/ssh/ssh_config\r\n\r\nsource .bashrc\r\n\r\n# Remove the motd and issue and replacing it with mine\r\nyes | rm /etc/motd\r\ncd /etc\r\necho \"Connection succed\" >> /etc/motd\r\n\r\n# Go back to the root directory\r\ncd\r\n\r\n#Install Cheat\r\nwget https://github.com/cheat/cheat/releases/download/4.2.2/cheat-linux-amd64.gz\r\ngunzip cheat-linux-amd64.gz\r\nchmod +x cheat-linux-amd64\r\necho y | mv -v cheat-linux-amd64 /usr/local/bin/cheat\r\nyes | cheat\r\n\r\n#Install Bookstack\r\ngit clone https://github.com/BookStackApp/BookStack.git --branch release --single-branch\r\nmv BookStack /var/www/bookstack\r\ncd /var/www\r\nchown -R www-data:www-data bookstack\r\ncd bookstack\r\n\r\ncomposer install --no-dev\r\n\r\ncd /etc/nginx/sites-available\r\nPHPV=$(php -v | head -1 | cut -c5-7)\r\n[ ! -f /etc/nginx/sites-available/bookstack.conf ] && wget http://ftp.lutenruto.tk/bookstack.conf\r\n[ ! -L /etc/nginx/sites-enabled/bookstack.conf ] && ln -s /etc/nginx/sites-available/bookstack.conf /etc/nginx/sites-enabled/bookstack.conf\r\n\r\ncd /var/www/bookstack\r\n\r\n[ ! -f /var/www/bookstack/.env ] && wget http://ftp.lutenruto.tk/env\r\nmv env .env\r\n\r\nwget http://ftp.lutenruto.tk/script.sql\r\nmysql -h \"localhost\" -u \"root\" < script.sql\r\nrm script.sql\r\necho y | php artisan key:generate\r\necho y | php artisan migrate\r\n\r\nHOSTEXISTS=$(cat /etc/hosts | grep -o -i wiki.esgi.local | wc -l)\r\nip=$(hostname -I)\r\n[ \"$HOSTEXISTS\" -eq \"0\" ] && echo \"$ip wiki.esgi.local\" >> /etc/hosts\r\nsystemctl reload nginx\r\n\r\n# Updating mlocate database\r\nupdatedb\r\n\r\n# Creating the new superuser\r\nsudo useradd -m davy --shell /bin/bash\r\n# without prompt\r\necho -e -n \"root\\nroot\" | passwd P@ssword\r\n# with prompt\r\n# sudo passwd davy\r\nsudo usermod -aG sudo davy\r\nsudo usermod -u 10000 davy\r\nsudo groupmod -g 10000 davy\r\nsudo usermod -aG sudo esgi\r\n\r\n#Secure Grub\r\ncd /etc/grub.d\r\n\r\ncd \r\nyes | cp .bashrc /home/esgi/.bashrc\r\n\r\nHASH=$(echo -e -n \"root\\nroot\" |grub-mkpasswd-pbkdf2 |grep hachage|cut -d\" \" -f9)\r\n\r\necho \"cat << EOF\" >> /etc/grub.d/00_header\r\necho \"set superusers=\'davy\'\" >> /etc/grub.d/00_header\r\necho \"password_pbkdf2 davy \'$HASH\'\" >> /etc/grub.d/00_header\r\necho \"EOF\" >> /etc/grub.d/00_header\r\n\r\nsudo update-grub\r\n\r\n#Extend lv_home +2G\r\nsudo lvextend -L +2G -r /dev/VGCRYPT/lv_home\r\n\r\nSWAPEXISTS=$(lsblk -f | grep lv_swap | wc -l)\r\nif [ \"$SWAPEXISTS\" -eq \"0\" ]\r\nthen\r\n    sudo lvcreate -n lv_swap -L 500m VGCRYPT\r\n    sudo mkswap /dev/VGCRYPT/lv_swap\r\n    echo \"/dev/VGCRYPT/lv_swap swap swap defaults 0 0\" |sudo tee -a /etc/fstab\r\n    sudo swapon -v /dev/VGCRYPT/lv_swap\r\nfi\r\n\r\n# Disable root account\r\nsudo usermod -s /usr/sbin/nologin root\r\n\r\nsudo reboot\r\n\r\n\r\n ',1,'2021-11-04 17:24:28','2021-11-04 17:24:28','installation-et-configuration-du-bookstack','2-bookstack','version','','',9),(34,2,'Installation et configuration du BookStack','<h5 id=\"bkmrk-installation\"><strong>Installation</strong></h5>\r\n<p id=\"bkmrk-pour-%C3%AAtre-plus-rapid\">Pour être plus rapide dans l\'installation, je suis passé par un script que j\'ai écris en cours me permettant d\'automatiser l\'installation et la configuration du Cheat (un aide-mémoire de commandes Linux) ainsi que de Bookstack.</p>\r\n<p id=\"bkmrk-l%27insertion-de-mon-s\">L\'insertion de mon script c\'est faite par connexion SFTP entre mon pc hôte et ma VM Debian 10. (Le script en question se trouve à la fin du fichier)</p>\r\n<p id=\"bkmrk-%C2%A0\">Lorsque vous avez récupéré le fichier dans votre VM Debian 10, n\'oubliez de faire un <code>chmod a+x nom_du_fichier.sh</code> . Cela vous permettra de pouvoir exécuter le script car il est par défaut non exécutable.</p>\r\n<p id=\"bkmrk-puis%C2%A0sudo-.%2Fpost_ins\">Puis <code>sudo ./post_installation</code> pour le lancer.</p>\r\n<h5 id=\"bkmrk-configuration\"><strong>Configuration</strong></h5>\r\n<p id=\"bkmrk-pour-vous-connecter-\">Pour vous connecter au BookStack depuis le navigateur de votre ordinateur hôte (non pas la vm). Il vous faudra ajouter une ligne supplémentaire dans le fichier hosts de voir ordinateur. Celle-ci vous permettra à vous connecter au BookStack hébergé au sein de votre machine virtuelle.</p>\r\n<ul id=\"bkmrk-acc%C3%A8s-au-fichier-hos\"><li>Accès au fichier hosts sur Windows : <code>C:\\windows\\system32\\drivers\\etc\\hosts</code> à ouvrir avec le bloc-note ou tout autre éditeur en mode <span style=\"color: #ff0000;\"><strong>ADMINISTRATEUR</strong><span style=\"color: #000000;\">, sinon vous ne pourrez pas enregistrer vos modifications.</span></span></li>\r\n<li><span style=\"color: #ff0000;\"><span style=\"color: #000000;\">Ajouter l\'adresse ip de votre machine virtuelle ainsi que le lien vers le BookStack dans le fichier hosts : <code>X.X.X.X wiki.esgi.local</code></span></span></li>\r\n<li>Ensuite allez sur <a href=\"http://wiki.esgi.local\">http://wiki.esgi.local</a> ,les identifiants par défauts sont :\r\n<ul><li>admin@admin.com</li>\r\n<li>password</li>\r\n</ul></li>\r\n</ul><h5 id=\"bkmrk-script-de-post-insta\"><strong>Script de post installation du Cheat et du BookStack</strong></h5>\r\n<pre id=\"bkmrk-%23%21%2Fbin%2Fbash-%23-%23-nom-\"><code class=\"language-MarkDown\">#!/bin/bash\r\n#\r\n# Nom		:\r\n# Description	:\r\n# Param 1	:\r\n# Param 2	:\r\n# Param 3	:\r\n# Param 4	:\r\n#\r\n# Ex) 		:	\r\n# Auteur	: Teddy JEAN-FRANCOIS\r\n# Email	: jfrancoisteddy@gmail.com\r\n# \r\n#\r\n#\r\n#\r\n#\r\n#\r\n\r\n# Install default packages\r\napt update\r\napt install -y sudo vim rsync screen mlocate htop net-tools git gnupg2 mc psmisc lynx curl git pigz pixz zip ncdu iptraf iotop dstat gdisk mc cifs-utils ntfs-3g sshfs gdisk lshw inxi figlet screenfetch tree tmux nginx php-fpm mariadb-server git composer php-mysql php-xml php-mbstring php-tokenizer php-curl php-gd -y | tee post_installation.log\r\n\r\n# Custom aliases\r\necho \"alias mv=\'mv -iv\'\" &gt;&gt; .bashrc\r\necho \"alias cp=\'cp -iv\'\" &gt;&gt; .bashrc\r\necho \"alias df=\'df -hT --total -x devtmpfs -x tmpfs\'\" &gt;&gt; .bashrc\r\necho \"alias rm=\'rm -iv --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chmod=\'chmod -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chown=\'chown -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chgrp=\'chgrp -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias ll=\'ls -la\'\" &gt;&gt; .bashrc\r\n# Custom prompt\r\necho \"PS1=\'\\[\\e[0;32m\\]\\u\\[\\e[0m\\]@\\[\\e[0;38;5;21m\\]\\h \\[\\e[0;93m\\]\\w \\[\\e[0m\\]\\\\n\\[\\e[0m\\]\\$ \\[\\e[0m\\]\'\" &gt;&gt; .bashrc\r\n\r\n# Set the bashrc\r\nyes | cp .bashrc /etc/skel/.bashrc \r\nmkdir /etc/skel/.ssh\r\ncd /etc/skel/.ssh\r\necho \"ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOJt6S6fmTmkEJDoyQTptUkEBT8xssZf+TCjgLg2/wXu teddy@TEDDY\" &gt;&gt; /etc/skel/.ssh\r\n\r\nchmod -v 640 /etc/ssh/sshd_config\r\nchmod -v 640 /etc/ssh/ssh_config\r\n\r\nsource .bashrc\r\n\r\n# Remove the motd and issue and replacing it with mine\r\nyes | rm /etc/motd\r\ncd /etc\r\necho \"Connection succed\" &gt;&gt; /etc/motd\r\n\r\n# Go back to the root directory\r\ncd\r\n\r\n#Install Cheat\r\nwget https://github.com/cheat/cheat/releases/download/4.2.2/cheat-linux-amd64.gz\r\ngunzip cheat-linux-amd64.gz\r\nchmod +x cheat-linux-amd64\r\necho y | mv -v cheat-linux-amd64 /usr/local/bin/cheat\r\nyes | cheat\r\n\r\n#Install Bookstack\r\ngit clone https://github.com/BookStackApp/BookStack.git --branch release --single-branch\r\nmv BookStack /var/www/bookstack\r\ncd /var/www\r\nchown -R www-data:www-data bookstack\r\ncd bookstack\r\n\r\ncomposer install --no-dev\r\n\r\ncd /etc/nginx/sites-available\r\nPHPV=$(php -v | head -1 | cut -c5-7)\r\n[ ! -f /etc/nginx/sites-available/bookstack.conf ] &amp;&amp; wget http://ftp.lutenruto.tk/bookstack.conf\r\n[ ! -L /etc/nginx/sites-enabled/bookstack.conf ] &amp;&amp; ln -s /etc/nginx/sites-available/bookstack.conf /etc/nginx/sites-enabled/bookstack.conf\r\n\r\ncd /var/www/bookstack\r\n\r\n[ ! -f /var/www/bookstack/.env ] &amp;&amp; wget http://ftp.lutenruto.tk/env\r\nmv env .env\r\n\r\nwget http://ftp.lutenruto.tk/script.sql\r\nmysql -h \"localhost\" -u \"root\" &lt; script.sql\r\nrm script.sql\r\necho y | php artisan key:generate\r\necho y | php artisan migrate\r\n\r\nHOSTEXISTS=$(cat /etc/hosts | grep -o -i wiki.esgi.local | wc -l)\r\nip=$(hostname -I)\r\n[ \"$HOSTEXISTS\" -eq \"0\" ] &amp;&amp; echo \"$ip wiki.esgi.local\" &gt;&gt; /etc/hosts\r\nsystemctl reload nginx\r\n\r\n# Updating mlocate database\r\nupdatedb\r\n\r\n# Creating the new superuser\r\nsudo useradd -m davy --shell /bin/bash\r\n# without prompt\r\necho -e -n \"root\\nroot\" | passwd P@ssword\r\n# with prompt\r\n# sudo passwd davy\r\nsudo usermod -aG sudo davy\r\nsudo usermod -u 10000 davy\r\nsudo groupmod -g 10000 davy\r\nsudo usermod -aG sudo esgi\r\n\r\n#Secure Grub\r\ncd /etc/grub.d\r\n\r\ncd \r\nyes | cp .bashrc /home/esgi/.bashrc\r\n\r\nHASH=$(echo -e -n \"root\\nroot\" |grub-mkpasswd-pbkdf2 |grep hachage|cut -d\" \" -f9)\r\n\r\necho \"cat &lt;&lt; EOF\" &gt;&gt; /etc/grub.d/00_header\r\necho \"set superusers=\'davy\'\" &gt;&gt; /etc/grub.d/00_header\r\necho \"password_pbkdf2 davy \'$HASH\'\" &gt;&gt; /etc/grub.d/00_header\r\necho \"EOF\" &gt;&gt; /etc/grub.d/00_header\r\n\r\nsudo update-grub\r\n\r\n#Extend lv_home +2G\r\nsudo lvextend -L +2G -r /dev/VGCRYPT/lv_home\r\n\r\nSWAPEXISTS=$(lsblk -f | grep lv_swap | wc -l)\r\nif [ \"$SWAPEXISTS\" -eq \"0\" ]\r\nthen\r\n    sudo lvcreate -n lv_swap -L 500m VGCRYPT\r\n    sudo mkswap /dev/VGCRYPT/lv_swap\r\n    echo \"/dev/VGCRYPT/lv_swap swap swap defaults 0 0\" |sudo tee -a /etc/fstab\r\n    sudo swapon -v /dev/VGCRYPT/lv_swap\r\nfi\r\n\r\n# Disable root account\r\nsudo usermod -s /usr/sbin/nologin root\r\n\r\nsudo reboot\r\n\r\n</code></pre>\r\n<p id=\"bkmrk-%C2%A0-0\"> </p>','Installation\r\nPour être plus rapide dans l\'installation, je suis passé par un script que j\'ai écris en cours me permettant d\'automatiser l\'installation et la configuration du Cheat (un aide-mémoire de commandes Linux) ainsi que de Bookstack.\r\nL\'insertion de mon script c\'est faite par connexion SFTP entre mon pc hôte et ma VM Debian 10. (Le script en question se trouve à la fin du fichier)\r\nLorsque vous avez récupéré le fichier dans votre VM Debian 10, n\'oubliez de faire un chmod a+x nom_du_fichier.sh . Cela vous permettra de pouvoir exécuter le script car il est par défaut non exécutable.\r\nPuis sudo ./post_installation pour le lancer.\r\nConfiguration\r\nPour vous connecter au BookStack depuis le navigateur de votre ordinateur hôte (non pas la vm). Il vous faudra ajouter une ligne supplémentaire dans le fichier hosts de voir ordinateur. Celle-ci vous permettra à vous connecter au BookStack hébergé au sein de votre machine virtuelle.\r\nAccès au fichier hosts sur Windows : C:\\windows\\system32\\drivers\\etc\\hosts à ouvrir avec le bloc-note ou tout autre éditeur en mode ADMINISTRATEUR, sinon vous ne pourrez pas enregistrer vos modifications.\r\nAjouter l\'adresse ip de votre machine virtuelle ainsi que le lien vers le BookStack dans le fichier hosts : X.X.X.X wiki.esgi.local\r\nEnsuite allez sur http://wiki.esgi.local ,les identifiants par défauts sont :\r\nadmin@admin.com\r\npassword\r\n\r\nScript de post installation du Cheat et du BookStack\r\n#!/bin/bash\r\n#\r\n# Nom		:\r\n# Description	:\r\n# Param 1	:\r\n# Param 2	:\r\n# Param 3	:\r\n# Param 4	:\r\n#\r\n# Ex) 		:	\r\n# Auteur	: Teddy JEAN-FRANCOIS\r\n# Email	: jfrancoisteddy@gmail.com\r\n# \r\n#\r\n#\r\n#\r\n#\r\n#\r\n\r\n# Install default packages\r\napt update\r\napt install -y sudo vim rsync screen mlocate htop net-tools git gnupg2 mc psmisc lynx curl git pigz pixz zip ncdu iptraf iotop dstat gdisk mc cifs-utils ntfs-3g sshfs gdisk lshw inxi figlet screenfetch tree tmux nginx php-fpm mariadb-server git composer php-mysql php-xml php-mbstring php-tokenizer php-curl php-gd -y | tee post_installation.log\r\n\r\n# Custom aliases\r\necho \"alias mv=\'mv -iv\'\" >> .bashrc\r\necho \"alias cp=\'cp -iv\'\" >> .bashrc\r\necho \"alias df=\'df -hT --total -x devtmpfs -x tmpfs\'\" >> .bashrc\r\necho \"alias rm=\'rm -iv --preserve-root\'\" >> .bashrc\r\necho \"alias chmod=\'chmod -v --preserve-root\'\" >> .bashrc\r\necho \"alias chown=\'chown -v --preserve-root\'\" >> .bashrc\r\necho \"alias chgrp=\'chgrp -v --preserve-root\'\" >> .bashrc\r\necho \"alias ll=\'ls -la\'\" >> .bashrc\r\n# Custom prompt\r\necho \"PS1=\'\\[\\e[0;32m\\]\\u\\[\\e[0m\\]@\\[\\e[0;38;5;21m\\]\\h \\[\\e[0;93m\\]\\w \\[\\e[0m\\]\\\\n\\[\\e[0m\\]\\$ \\[\\e[0m\\]\'\" >> .bashrc\r\n\r\n# Set the bashrc\r\nyes | cp .bashrc /etc/skel/.bashrc \r\nmkdir /etc/skel/.ssh\r\ncd /etc/skel/.ssh\r\necho \"ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOJt6S6fmTmkEJDoyQTptUkEBT8xssZf+TCjgLg2/wXu teddy@TEDDY\" >> /etc/skel/.ssh\r\n\r\nchmod -v 640 /etc/ssh/sshd_config\r\nchmod -v 640 /etc/ssh/ssh_config\r\n\r\nsource .bashrc\r\n\r\n# Remove the motd and issue and replacing it with mine\r\nyes | rm /etc/motd\r\ncd /etc\r\necho \"Connection succed\" >> /etc/motd\r\n\r\n# Go back to the root directory\r\ncd\r\n\r\n#Install Cheat\r\nwget https://github.com/cheat/cheat/releases/download/4.2.2/cheat-linux-amd64.gz\r\ngunzip cheat-linux-amd64.gz\r\nchmod +x cheat-linux-amd64\r\necho y | mv -v cheat-linux-amd64 /usr/local/bin/cheat\r\nyes | cheat\r\n\r\n#Install Bookstack\r\ngit clone https://github.com/BookStackApp/BookStack.git --branch release --single-branch\r\nmv BookStack /var/www/bookstack\r\ncd /var/www\r\nchown -R www-data:www-data bookstack\r\ncd bookstack\r\n\r\ncomposer install --no-dev\r\n\r\ncd /etc/nginx/sites-available\r\nPHPV=$(php -v | head -1 | cut -c5-7)\r\n[ ! -f /etc/nginx/sites-available/bookstack.conf ] && wget http://ftp.lutenruto.tk/bookstack.conf\r\n[ ! -L /etc/nginx/sites-enabled/bookstack.conf ] && ln -s /etc/nginx/sites-available/bookstack.conf /etc/nginx/sites-enabled/bookstack.conf\r\n\r\ncd /var/www/bookstack\r\n\r\n[ ! -f /var/www/bookstack/.env ] && wget http://ftp.lutenruto.tk/env\r\nmv env .env\r\n\r\nwget http://ftp.lutenruto.tk/script.sql\r\nmysql -h \"localhost\" -u \"root\" < script.sql\r\nrm script.sql\r\necho y | php artisan key:generate\r\necho y | php artisan migrate\r\n\r\nHOSTEXISTS=$(cat /etc/hosts | grep -o -i wiki.esgi.local | wc -l)\r\nip=$(hostname -I)\r\n[ \"$HOSTEXISTS\" -eq \"0\" ] && echo \"$ip wiki.esgi.local\" >> /etc/hosts\r\nsystemctl reload nginx\r\n\r\n# Updating mlocate database\r\nupdatedb\r\n\r\n# Creating the new superuser\r\nsudo useradd -m davy --shell /bin/bash\r\n# without prompt\r\necho -e -n \"root\\nroot\" | passwd P@ssword\r\n# with prompt\r\n# sudo passwd davy\r\nsudo usermod -aG sudo davy\r\nsudo usermod -u 10000 davy\r\nsudo groupmod -g 10000 davy\r\nsudo usermod -aG sudo esgi\r\n\r\n#Secure Grub\r\ncd /etc/grub.d\r\n\r\ncd \r\nyes | cp .bashrc /home/esgi/.bashrc\r\n\r\nHASH=$(echo -e -n \"root\\nroot\" |grub-mkpasswd-pbkdf2 |grep hachage|cut -d\" \" -f9)\r\n\r\necho \"cat << EOF\" >> /etc/grub.d/00_header\r\necho \"set superusers=\'davy\'\" >> /etc/grub.d/00_header\r\necho \"password_pbkdf2 davy \'$HASH\'\" >> /etc/grub.d/00_header\r\necho \"EOF\" >> /etc/grub.d/00_header\r\n\r\nsudo update-grub\r\n\r\n#Extend lv_home +2G\r\nsudo lvextend -L +2G -r /dev/VGCRYPT/lv_home\r\n\r\nSWAPEXISTS=$(lsblk -f | grep lv_swap | wc -l)\r\nif [ \"$SWAPEXISTS\" -eq \"0\" ]\r\nthen\r\n    sudo lvcreate -n lv_swap -L 500m VGCRYPT\r\n    sudo mkswap /dev/VGCRYPT/lv_swap\r\n    echo \"/dev/VGCRYPT/lv_swap swap swap defaults 0 0\" |sudo tee -a /etc/fstab\r\n    sudo swapon -v /dev/VGCRYPT/lv_swap\r\nfi\r\n\r\n# Disable root account\r\nsudo usermod -s /usr/sbin/nologin root\r\n\r\nsudo reboot\r\n\r\n\r\n ',1,'2021-11-04 17:25:12','2021-11-04 17:25:12','installation-et-configuration-du-bookstack','2-bookstack','version','','',10),(35,2,'Installation et configuration du BookStack','<h5 id=\"bkmrk-installation\"><strong>Installation</strong></h5>\r\n<p id=\"bkmrk-pour-%C3%AAtre-plus-rapid\">Pour être plus rapide dans l\'installation, je suis passé par un script que j\'ai écris en cours me permettant d\'automatiser l\'installation et la configuration du Cheat (un aide-mémoire de commandes Linux) ainsi que de Bookstack.</p>\r\n<p id=\"bkmrk-l%27insertion-de-mon-s\">L\'insertion de mon script c\'est faite par connexion SFTP entre mon pc hôte et ma VM Debian 10. (Le script en question se trouve à la fin du fichier)</p>\r\n<p id=\"bkmrk-%C2%A0\">Lorsque vous avez récupéré le fichier dans votre VM Debian 10, n\'oubliez de faire un <code>chmod a+x nom_du_fichier.sh</code> . Cela vous permettra de pouvoir exécuter le script car il est par défaut non exécutable.</p>\r\n<p id=\"bkmrk-puis%C2%A0sudo-.%2Fpost_ins\">Puis <code>sudo ./post_installation</code> pour le lancer.</p>\r\n<h5 id=\"bkmrk-configuration\"><strong>Configuration</strong></h5>\r\n<p id=\"bkmrk-pour-vous-connecter-\">Pour vous connecter au BookStack depuis le navigateur de votre ordinateur hôte (non pas la vm). Il vous faudra ajouter une ligne supplémentaire dans le fichier hosts de voir ordinateur. Celle-ci vous permettra à vous connecter au BookStack hébergé au sein de votre machine virtuelle.</p>\r\n<ul id=\"bkmrk-acc%C3%A8s-au-fichier-hos\"><li>Accès au fichier hosts sur Windows : <code>C:\\windows\\system32\\drivers\\etc\\hosts</code> à ouvrir avec le bloc-note ou tout autre éditeur en mode <span style=\"color: #ff0000;\"><strong>ADMINISTRATEUR</strong><span style=\"color: #000000;\">, sinon vous ne pourrez pas enregistrer vos modifications.</span></span></li>\r\n<li><span style=\"color: #ff0000;\"><span style=\"color: #000000;\">Ajouter l\'adresse ip de votre machine virtuelle ainsi que le lien vers le BookStack dans le fichier hosts : <code>X.X.X.X wiki.esgi.local</code></span></span></li>\r\n<li>Ensuite allez sur <a href=\"http://wiki.esgi.local\">http://wiki.esgi.local</a> ,les identifiants par défauts sont :\r\n<ul><li>admin@admin.com</li>\r\n<li>password</li>\r\n</ul></li>\r\n</ul><h5 id=\"bkmrk-script-de-post-insta\"><strong>Script de post installation du Cheat et du BookStack</strong></h5>\r\n<p id=\"bkmrk-%C2%A0-0\"> </p>\r\n<p id=\"bkmrk-%C2%A0-1\"> </p>\r\n<pre id=\"bkmrk-%23%21%2Fbin%2Fbash-%23-%23-nom-\"><code class=\"language-Powershell\">#!/bin/bash\r\n#\r\n# Nom		:\r\n# Description	:\r\n# Param 1	:\r\n# Param 2	:\r\n# Param 3	:\r\n# Param 4	:\r\n#\r\n# Ex) 		:	\r\n# Auteur	: Teddy JEAN-FRANCOIS\r\n# Email	: jfrancoisteddy@gmail.com\r\n# \r\n#\r\n#\r\n#\r\n#\r\n#\r\n\r\n# Install default packages\r\napt update\r\napt install -y sudo vim rsync screen mlocate htop net-tools git gnupg2 mc psmisc lynx curl git pigz pixz zip ncdu iptraf iotop dstat gdisk mc cifs-utils ntfs-3g sshfs gdisk lshw inxi figlet screenfetch tree tmux nginx php-fpm mariadb-server git composer php-mysql php-xml php-mbstring php-tokenizer php-curl php-gd -y | tee post_installation.log\r\n\r\n# Custom aliases\r\necho \"alias mv=\'mv -iv\'\" &gt;&gt; .bashrc\r\necho \"alias cp=\'cp -iv\'\" &gt;&gt; .bashrc\r\necho \"alias df=\'df -hT --total -x devtmpfs -x tmpfs\'\" &gt;&gt; .bashrc\r\necho \"alias rm=\'rm -iv --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chmod=\'chmod -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chown=\'chown -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chgrp=\'chgrp -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias ll=\'ls -la\'\" &gt;&gt; .bashrc\r\n# Custom prompt\r\necho \"PS1=\'\\[\\e[0;32m\\]\\u\\[\\e[0m\\]@\\[\\e[0;38;5;21m\\]\\h \\[\\e[0;93m\\]\\w \\[\\e[0m\\]\\\\n\\[\\e[0m\\]\\$ \\[\\e[0m\\]\'\" &gt;&gt; .bashrc\r\n\r\n# Set the bashrc\r\nyes | cp .bashrc /etc/skel/.bashrc \r\nmkdir /etc/skel/.ssh\r\ncd /etc/skel/.ssh\r\necho \"ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOJt6S6fmTmkEJDoyQTptUkEBT8xssZf+TCjgLg2/wXu teddy@TEDDY\" &gt;&gt; /etc/skel/.ssh\r\n\r\nchmod -v 640 /etc/ssh/sshd_config\r\nchmod -v 640 /etc/ssh/ssh_config\r\n\r\nsource .bashrc\r\n\r\n# Remove the motd and issue and replacing it with mine\r\nyes | rm /etc/motd\r\ncd /etc\r\necho \"Connection succed\" &gt;&gt; /etc/motd\r\n\r\n# Go back to the root directory\r\ncd\r\n\r\n#Install Cheat\r\nwget https://github.com/cheat/cheat/releases/download/4.2.2/cheat-linux-amd64.gz\r\ngunzip cheat-linux-amd64.gz\r\nchmod +x cheat-linux-amd64\r\necho y | mv -v cheat-linux-amd64 /usr/local/bin/cheat\r\nyes | cheat\r\n\r\n#Install Bookstack\r\ngit clone https://github.com/BookStackApp/BookStack.git --branch release --single-branch\r\nmv BookStack /var/www/bookstack\r\ncd /var/www\r\nchown -R www-data:www-data bookstack\r\ncd bookstack\r\n\r\ncomposer install --no-dev\r\n\r\ncd /etc/nginx/sites-available\r\nPHPV=$(php -v | head -1 | cut -c5-7)\r\n[ ! -f /etc/nginx/sites-available/bookstack.conf ] &amp;&amp; wget http://ftp.lutenruto.tk/bookstack.conf\r\n[ ! -L /etc/nginx/sites-enabled/bookstack.conf ] &amp;&amp; ln -s /etc/nginx/sites-available/bookstack.conf /etc/nginx/sites-enabled/bookstack.conf\r\n\r\ncd /var/www/bookstack\r\n\r\n[ ! -f /var/www/bookstack/.env ] &amp;&amp; wget http://ftp.lutenruto.tk/env\r\nmv env .env\r\n\r\nwget http://ftp.lutenruto.tk/script.sql\r\nmysql -h \"localhost\" -u \"root\" &lt; script.sql\r\nrm script.sql\r\necho y | php artisan key:generate\r\necho y | php artisan migrate\r\n\r\nHOSTEXISTS=$(cat /etc/hosts | grep -o -i wiki.esgi.local | wc -l)\r\nip=$(hostname -I)\r\n[ \"$HOSTEXISTS\" -eq \"0\" ] &amp;&amp; echo \"$ip wiki.esgi.local\" &gt;&gt; /etc/hosts\r\nsystemctl reload nginx\r\n\r\n# Updating mlocate database\r\nupdatedb\r\n\r\n# Creating the new superuser\r\nsudo useradd -m davy --shell /bin/bash\r\n# without prompt\r\necho -e -n \"root\\nroot\" | passwd P@ssword\r\n# with prompt\r\n# sudo passwd davy\r\nsudo usermod -aG sudo davy\r\nsudo usermod -u 10000 davy\r\nsudo groupmod -g 10000 davy\r\nsudo usermod -aG sudo esgi\r\n\r\n#Secure Grub\r\ncd /etc/grub.d\r\n\r\ncd \r\nyes | cp .bashrc /home/esgi/.bashrc\r\n\r\nHASH=$(echo -e -n \"root\\nroot\" |grub-mkpasswd-pbkdf2 |grep hachage|cut -d\" \" -f9)\r\n\r\necho \"cat &lt;&lt; EOF\" &gt;&gt; /etc/grub.d/00_header\r\necho \"set superusers=\'davy\'\" &gt;&gt; /etc/grub.d/00_header\r\necho \"password_pbkdf2 davy \'$HASH\'\" &gt;&gt; /etc/grub.d/00_header\r\necho \"EOF\" &gt;&gt; /etc/grub.d/00_header\r\n\r\nsudo update-grub\r\n\r\n#Extend lv_home +2G\r\nsudo lvextend -L +2G -r /dev/VGCRYPT/lv_home\r\n\r\nSWAPEXISTS=$(lsblk -f | grep lv_swap | wc -l)\r\nif [ \"$SWAPEXISTS\" -eq \"0\" ]\r\nthen\r\n    sudo lvcreate -n lv_swap -L 500m VGCRYPT\r\n    sudo mkswap /dev/VGCRYPT/lv_swap\r\n    echo \"/dev/VGCRYPT/lv_swap swap swap defaults 0 0\" |sudo tee -a /etc/fstab\r\n    sudo swapon -v /dev/VGCRYPT/lv_swap\r\nfi\r\n\r\n# Disable root account\r\nsudo usermod -s /usr/sbin/nologin root\r\n\r\nsudo reboot\r\n\r\n</code></pre>\r\n<p id=\"bkmrk-%C2%A0-2\"> </p>','Installation\r\nPour être plus rapide dans l\'installation, je suis passé par un script que j\'ai écris en cours me permettant d\'automatiser l\'installation et la configuration du Cheat (un aide-mémoire de commandes Linux) ainsi que de Bookstack.\r\nL\'insertion de mon script c\'est faite par connexion SFTP entre mon pc hôte et ma VM Debian 10. (Le script en question se trouve à la fin du fichier)\r\nLorsque vous avez récupéré le fichier dans votre VM Debian 10, n\'oubliez de faire un chmod a+x nom_du_fichier.sh . Cela vous permettra de pouvoir exécuter le script car il est par défaut non exécutable.\r\nPuis sudo ./post_installation pour le lancer.\r\nConfiguration\r\nPour vous connecter au BookStack depuis le navigateur de votre ordinateur hôte (non pas la vm). Il vous faudra ajouter une ligne supplémentaire dans le fichier hosts de voir ordinateur. Celle-ci vous permettra à vous connecter au BookStack hébergé au sein de votre machine virtuelle.\r\nAccès au fichier hosts sur Windows : C:\\windows\\system32\\drivers\\etc\\hosts à ouvrir avec le bloc-note ou tout autre éditeur en mode ADMINISTRATEUR, sinon vous ne pourrez pas enregistrer vos modifications.\r\nAjouter l\'adresse ip de votre machine virtuelle ainsi que le lien vers le BookStack dans le fichier hosts : X.X.X.X wiki.esgi.local\r\nEnsuite allez sur http://wiki.esgi.local ,les identifiants par défauts sont :\r\nadmin@admin.com\r\npassword\r\n\r\nScript de post installation du Cheat et du BookStack\r\n \r\n \r\n#!/bin/bash\r\n#\r\n# Nom		:\r\n# Description	:\r\n# Param 1	:\r\n# Param 2	:\r\n# Param 3	:\r\n# Param 4	:\r\n#\r\n# Ex) 		:	\r\n# Auteur	: Teddy JEAN-FRANCOIS\r\n# Email	: jfrancoisteddy@gmail.com\r\n# \r\n#\r\n#\r\n#\r\n#\r\n#\r\n\r\n# Install default packages\r\napt update\r\napt install -y sudo vim rsync screen mlocate htop net-tools git gnupg2 mc psmisc lynx curl git pigz pixz zip ncdu iptraf iotop dstat gdisk mc cifs-utils ntfs-3g sshfs gdisk lshw inxi figlet screenfetch tree tmux nginx php-fpm mariadb-server git composer php-mysql php-xml php-mbstring php-tokenizer php-curl php-gd -y | tee post_installation.log\r\n\r\n# Custom aliases\r\necho \"alias mv=\'mv -iv\'\" >> .bashrc\r\necho \"alias cp=\'cp -iv\'\" >> .bashrc\r\necho \"alias df=\'df -hT --total -x devtmpfs -x tmpfs\'\" >> .bashrc\r\necho \"alias rm=\'rm -iv --preserve-root\'\" >> .bashrc\r\necho \"alias chmod=\'chmod -v --preserve-root\'\" >> .bashrc\r\necho \"alias chown=\'chown -v --preserve-root\'\" >> .bashrc\r\necho \"alias chgrp=\'chgrp -v --preserve-root\'\" >> .bashrc\r\necho \"alias ll=\'ls -la\'\" >> .bashrc\r\n# Custom prompt\r\necho \"PS1=\'\\[\\e[0;32m\\]\\u\\[\\e[0m\\]@\\[\\e[0;38;5;21m\\]\\h \\[\\e[0;93m\\]\\w \\[\\e[0m\\]\\\\n\\[\\e[0m\\]\\$ \\[\\e[0m\\]\'\" >> .bashrc\r\n\r\n# Set the bashrc\r\nyes | cp .bashrc /etc/skel/.bashrc \r\nmkdir /etc/skel/.ssh\r\ncd /etc/skel/.ssh\r\necho \"ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOJt6S6fmTmkEJDoyQTptUkEBT8xssZf+TCjgLg2/wXu teddy@TEDDY\" >> /etc/skel/.ssh\r\n\r\nchmod -v 640 /etc/ssh/sshd_config\r\nchmod -v 640 /etc/ssh/ssh_config\r\n\r\nsource .bashrc\r\n\r\n# Remove the motd and issue and replacing it with mine\r\nyes | rm /etc/motd\r\ncd /etc\r\necho \"Connection succed\" >> /etc/motd\r\n\r\n# Go back to the root directory\r\ncd\r\n\r\n#Install Cheat\r\nwget https://github.com/cheat/cheat/releases/download/4.2.2/cheat-linux-amd64.gz\r\ngunzip cheat-linux-amd64.gz\r\nchmod +x cheat-linux-amd64\r\necho y | mv -v cheat-linux-amd64 /usr/local/bin/cheat\r\nyes | cheat\r\n\r\n#Install Bookstack\r\ngit clone https://github.com/BookStackApp/BookStack.git --branch release --single-branch\r\nmv BookStack /var/www/bookstack\r\ncd /var/www\r\nchown -R www-data:www-data bookstack\r\ncd bookstack\r\n\r\ncomposer install --no-dev\r\n\r\ncd /etc/nginx/sites-available\r\nPHPV=$(php -v | head -1 | cut -c5-7)\r\n[ ! -f /etc/nginx/sites-available/bookstack.conf ] && wget http://ftp.lutenruto.tk/bookstack.conf\r\n[ ! -L /etc/nginx/sites-enabled/bookstack.conf ] && ln -s /etc/nginx/sites-available/bookstack.conf /etc/nginx/sites-enabled/bookstack.conf\r\n\r\ncd /var/www/bookstack\r\n\r\n[ ! -f /var/www/bookstack/.env ] && wget http://ftp.lutenruto.tk/env\r\nmv env .env\r\n\r\nwget http://ftp.lutenruto.tk/script.sql\r\nmysql -h \"localhost\" -u \"root\" < script.sql\r\nrm script.sql\r\necho y | php artisan key:generate\r\necho y | php artisan migrate\r\n\r\nHOSTEXISTS=$(cat /etc/hosts | grep -o -i wiki.esgi.local | wc -l)\r\nip=$(hostname -I)\r\n[ \"$HOSTEXISTS\" -eq \"0\" ] && echo \"$ip wiki.esgi.local\" >> /etc/hosts\r\nsystemctl reload nginx\r\n\r\n# Updating mlocate database\r\nupdatedb\r\n\r\n# Creating the new superuser\r\nsudo useradd -m davy --shell /bin/bash\r\n# without prompt\r\necho -e -n \"root\\nroot\" | passwd P@ssword\r\n# with prompt\r\n# sudo passwd davy\r\nsudo usermod -aG sudo davy\r\nsudo usermod -u 10000 davy\r\nsudo groupmod -g 10000 davy\r\nsudo usermod -aG sudo esgi\r\n\r\n#Secure Grub\r\ncd /etc/grub.d\r\n\r\ncd \r\nyes | cp .bashrc /home/esgi/.bashrc\r\n\r\nHASH=$(echo -e -n \"root\\nroot\" |grub-mkpasswd-pbkdf2 |grep hachage|cut -d\" \" -f9)\r\n\r\necho \"cat << EOF\" >> /etc/grub.d/00_header\r\necho \"set superusers=\'davy\'\" >> /etc/grub.d/00_header\r\necho \"password_pbkdf2 davy \'$HASH\'\" >> /etc/grub.d/00_header\r\necho \"EOF\" >> /etc/grub.d/00_header\r\n\r\nsudo update-grub\r\n\r\n#Extend lv_home +2G\r\nsudo lvextend -L +2G -r /dev/VGCRYPT/lv_home\r\n\r\nSWAPEXISTS=$(lsblk -f | grep lv_swap | wc -l)\r\nif [ \"$SWAPEXISTS\" -eq \"0\" ]\r\nthen\r\n    sudo lvcreate -n lv_swap -L 500m VGCRYPT\r\n    sudo mkswap /dev/VGCRYPT/lv_swap\r\n    echo \"/dev/VGCRYPT/lv_swap swap swap defaults 0 0\" |sudo tee -a /etc/fstab\r\n    sudo swapon -v /dev/VGCRYPT/lv_swap\r\nfi\r\n\r\n# Disable root account\r\nsudo usermod -s /usr/sbin/nologin root\r\n\r\nsudo reboot\r\n\r\n\r\n ',1,'2021-11-04 17:25:39','2021-11-04 17:25:39','installation-et-configuration-du-bookstack','2-bookstack','version','','',11),(36,2,'Installation et configuration du BookStack','<h5 id=\"bkmrk-installation\"><strong>Installation</strong></h5>\r\n<p id=\"bkmrk-pour-%C3%AAtre-plus-rapid\">Pour être plus rapide dans l\'installation, je suis passé par un script que j\'ai écris en cours me permettant d\'automatiser l\'installation et la configuration du Cheat (un aide-mémoire de commandes Linux) ainsi que de Bookstack.</p>\r\n<p id=\"bkmrk-l%27insertion-de-mon-s\">L\'insertion de mon script c\'est faite par connexion SFTP entre mon pc hôte et ma VM Debian 10. (Le script en question se trouve à la fin du fichier)</p>\r\n<p id=\"bkmrk-%C2%A0\">Lorsque vous avez récupéré le fichier dans votre VM Debian 10, n\'oubliez de faire un <code>chmod a+x nom_du_fichier.sh</code> . Cela vous permettra de pouvoir exécuter le script car il est par défaut non exécutable.</p>\r\n<p id=\"bkmrk-puis%C2%A0sudo-.%2Fpost_ins\">Puis <code>sudo ./post_installation</code> pour le lancer.</p>\r\n<h5 id=\"bkmrk-configuration\"><strong>Configuration</strong></h5>\r\n<p id=\"bkmrk-pour-vous-connecter-\">Pour vous connecter au BookStack depuis le navigateur de votre ordinateur hôte (non pas la vm). Il vous faudra ajouter une ligne supplémentaire dans le fichier hosts de voir ordinateur. Celle-ci vous permettra à vous connecter au BookStack hébergé au sein de votre machine virtuelle.</p>\r\n<ul id=\"bkmrk-acc%C3%A8s-au-fichier-hos\"><li>Accès au fichier hosts sur Windows : <code>C:\\windows\\system32\\drivers\\etc\\hosts</code> à ouvrir avec le bloc-note ou tout autre éditeur en mode <span style=\"color: #ff0000;\"><strong>ADMINISTRATEUR</strong><span style=\"color: #000000;\">, sinon vous ne pourrez pas enregistrer vos modifications.</span></span></li>\r\n<li><span style=\"color: #ff0000;\"><span style=\"color: #000000;\">Ajouter l\'adresse ip de votre machine virtuelle ainsi que le lien vers le BookStack dans le fichier hosts : <code>X.X.X.X wiki.esgi.local</code></span></span></li>\r\n<li>Ensuite allez sur <a href=\"http://wiki.esgi.local\">http://wiki.esgi.local</a> ,les identifiants par défauts sont :\r\n<ul><li>admin@admin.com</li>\r\n<li>password</li>\r\n</ul></li>\r\n</ul><h5 id=\"bkmrk-script-de-post-insta\"><strong>Script de post installation du Cheat et du BookStack</strong></h5>\r\n<pre id=\"bkmrk-%23%21%2Fbin%2Fbash-%23-%23-nom-\"><code class=\"language-Powershell\">#!/bin/bash\r\n#\r\n# Nom		:\r\n# Description	:\r\n# Param 1	:\r\n# Param 2	:\r\n# Param 3	:\r\n# Param 4	:\r\n#\r\n# Ex) 		:	\r\n# Auteur	: Teddy JEAN-FRANCOIS\r\n# Email	: jfrancoisteddy@gmail.com\r\n# \r\n#\r\n#\r\n#\r\n#\r\n#\r\n\r\n# Install default packages\r\napt update\r\napt install -y sudo vim rsync screen mlocate htop net-tools git gnupg2 mc psmisc lynx curl git pigz pixz zip ncdu iptraf iotop dstat gdisk mc cifs-utils ntfs-3g sshfs gdisk lshw inxi figlet screenfetch tree tmux nginx php-fpm mariadb-server git composer php-mysql php-xml php-mbstring php-tokenizer php-curl php-gd -y | tee post_installation.log\r\n\r\n# Custom aliases\r\necho \"alias mv=\'mv -iv\'\" &gt;&gt; .bashrc\r\necho \"alias cp=\'cp -iv\'\" &gt;&gt; .bashrc\r\necho \"alias df=\'df -hT --total -x devtmpfs -x tmpfs\'\" &gt;&gt; .bashrc\r\necho \"alias rm=\'rm -iv --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chmod=\'chmod -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chown=\'chown -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chgrp=\'chgrp -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias ll=\'ls -la\'\" &gt;&gt; .bashrc\r\n# Custom prompt\r\necho \"PS1=\'\\[\\e[0;32m\\]\\u\\[\\e[0m\\]@\\[\\e[0;38;5;21m\\]\\h \\[\\e[0;93m\\]\\w \\[\\e[0m\\]\\\\n\\[\\e[0m\\]\\$ \\[\\e[0m\\]\'\" &gt;&gt; .bashrc\r\n\r\n# Set the bashrc\r\nyes | cp .bashrc /etc/skel/.bashrc \r\nmkdir /etc/skel/.ssh\r\ncd /etc/skel/.ssh\r\necho \"ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOJt6S6fmTmkEJDoyQTptUkEBT8xssZf+TCjgLg2/wXu teddy@TEDDY\" &gt;&gt; /etc/skel/.ssh\r\n\r\nchmod -v 640 /etc/ssh/sshd_config\r\nchmod -v 640 /etc/ssh/ssh_config\r\n\r\nsource .bashrc\r\n\r\n# Remove the motd and issue and replacing it with mine\r\nyes | rm /etc/motd\r\ncd /etc\r\necho \"Connection succed\" &gt;&gt; /etc/motd\r\n\r\n# Go back to the root directory\r\ncd\r\n\r\n#Install Cheat\r\nwget https://github.com/cheat/cheat/releases/download/4.2.2/cheat-linux-amd64.gz\r\ngunzip cheat-linux-amd64.gz\r\nchmod +x cheat-linux-amd64\r\necho y | mv -v cheat-linux-amd64 /usr/local/bin/cheat\r\nyes | cheat\r\n\r\n#Install Bookstack\r\ngit clone https://github.com/BookStackApp/BookStack.git --branch release --single-branch\r\nmv BookStack /var/www/bookstack\r\ncd /var/www\r\nchown -R www-data:www-data bookstack\r\ncd bookstack\r\n\r\ncomposer install --no-dev\r\n\r\ncd /etc/nginx/sites-available\r\nPHPV=$(php -v | head -1 | cut -c5-7)\r\n[ ! -f /etc/nginx/sites-available/bookstack.conf ] &amp;&amp; wget http://ftp.lutenruto.tk/bookstack.conf\r\n[ ! -L /etc/nginx/sites-enabled/bookstack.conf ] &amp;&amp; ln -s /etc/nginx/sites-available/bookstack.conf /etc/nginx/sites-enabled/bookstack.conf\r\n\r\ncd /var/www/bookstack\r\n\r\n[ ! -f /var/www/bookstack/.env ] &amp;&amp; wget http://ftp.lutenruto.tk/env\r\nmv env .env\r\n\r\nwget http://ftp.lutenruto.tk/script.sql\r\nmysql -h \"localhost\" -u \"root\" &lt; script.sql\r\nrm script.sql\r\necho y | php artisan key:generate\r\necho y | php artisan migrate\r\n\r\nHOSTEXISTS=$(cat /etc/hosts | grep -o -i wiki.esgi.local | wc -l)\r\nip=$(hostname -I)\r\n[ \"$HOSTEXISTS\" -eq \"0\" ] &amp;&amp; echo \"$ip wiki.esgi.local\" &gt;&gt; /etc/hosts\r\nsystemctl reload nginx\r\n\r\n# Updating mlocate database\r\nupdatedb\r\n\r\n# Creating the new superuser\r\nsudo useradd -m davy --shell /bin/bash\r\n# without prompt\r\necho -e -n \"root\\nroot\" | passwd P@ssword\r\n# with prompt\r\n# sudo passwd davy\r\nsudo usermod -aG sudo davy\r\nsudo usermod -u 10000 davy\r\nsudo groupmod -g 10000 davy\r\nsudo usermod -aG sudo esgi\r\n\r\n#Secure Grub\r\ncd /etc/grub.d\r\n\r\ncd \r\nyes | cp .bashrc /home/esgi/.bashrc\r\n\r\nHASH=$(echo -e -n \"root\\nroot\" |grub-mkpasswd-pbkdf2 |grep hachage|cut -d\" \" -f9)\r\n\r\necho \"cat &lt;&lt; EOF\" &gt;&gt; /etc/grub.d/00_header\r\necho \"set superusers=\'davy\'\" &gt;&gt; /etc/grub.d/00_header\r\necho \"password_pbkdf2 davy \'$HASH\'\" &gt;&gt; /etc/grub.d/00_header\r\necho \"EOF\" &gt;&gt; /etc/grub.d/00_header\r\n\r\nsudo update-grub\r\n\r\n#Extend lv_home +2G\r\nsudo lvextend -L +2G -r /dev/VGCRYPT/lv_home\r\n\r\nSWAPEXISTS=$(lsblk -f | grep lv_swap | wc -l)\r\nif [ \"$SWAPEXISTS\" -eq \"0\" ]\r\nthen\r\n    sudo lvcreate -n lv_swap -L 500m VGCRYPT\r\n    sudo mkswap /dev/VGCRYPT/lv_swap\r\n    echo \"/dev/VGCRYPT/lv_swap swap swap defaults 0 0\" |sudo tee -a /etc/fstab\r\n    sudo swapon -v /dev/VGCRYPT/lv_swap\r\nfi\r\n\r\n# Disable root account\r\nsudo usermod -s /usr/sbin/nologin root\r\n\r\nsudo reboot\r\n\r\n</code></pre>\r\n<p id=\"bkmrk-%C2%A0-2\"> </p>','Installation\r\nPour être plus rapide dans l\'installation, je suis passé par un script que j\'ai écris en cours me permettant d\'automatiser l\'installation et la configuration du Cheat (un aide-mémoire de commandes Linux) ainsi que de Bookstack.\r\nL\'insertion de mon script c\'est faite par connexion SFTP entre mon pc hôte et ma VM Debian 10. (Le script en question se trouve à la fin du fichier)\r\nLorsque vous avez récupéré le fichier dans votre VM Debian 10, n\'oubliez de faire un chmod a+x nom_du_fichier.sh . Cela vous permettra de pouvoir exécuter le script car il est par défaut non exécutable.\r\nPuis sudo ./post_installation pour le lancer.\r\nConfiguration\r\nPour vous connecter au BookStack depuis le navigateur de votre ordinateur hôte (non pas la vm). Il vous faudra ajouter une ligne supplémentaire dans le fichier hosts de voir ordinateur. Celle-ci vous permettra à vous connecter au BookStack hébergé au sein de votre machine virtuelle.\r\nAccès au fichier hosts sur Windows : C:\\windows\\system32\\drivers\\etc\\hosts à ouvrir avec le bloc-note ou tout autre éditeur en mode ADMINISTRATEUR, sinon vous ne pourrez pas enregistrer vos modifications.\r\nAjouter l\'adresse ip de votre machine virtuelle ainsi que le lien vers le BookStack dans le fichier hosts : X.X.X.X wiki.esgi.local\r\nEnsuite allez sur http://wiki.esgi.local ,les identifiants par défauts sont :\r\nadmin@admin.com\r\npassword\r\n\r\nScript de post installation du Cheat et du BookStack\r\n#!/bin/bash\r\n#\r\n# Nom		:\r\n# Description	:\r\n# Param 1	:\r\n# Param 2	:\r\n# Param 3	:\r\n# Param 4	:\r\n#\r\n# Ex) 		:	\r\n# Auteur	: Teddy JEAN-FRANCOIS\r\n# Email	: jfrancoisteddy@gmail.com\r\n# \r\n#\r\n#\r\n#\r\n#\r\n#\r\n\r\n# Install default packages\r\napt update\r\napt install -y sudo vim rsync screen mlocate htop net-tools git gnupg2 mc psmisc lynx curl git pigz pixz zip ncdu iptraf iotop dstat gdisk mc cifs-utils ntfs-3g sshfs gdisk lshw inxi figlet screenfetch tree tmux nginx php-fpm mariadb-server git composer php-mysql php-xml php-mbstring php-tokenizer php-curl php-gd -y | tee post_installation.log\r\n\r\n# Custom aliases\r\necho \"alias mv=\'mv -iv\'\" >> .bashrc\r\necho \"alias cp=\'cp -iv\'\" >> .bashrc\r\necho \"alias df=\'df -hT --total -x devtmpfs -x tmpfs\'\" >> .bashrc\r\necho \"alias rm=\'rm -iv --preserve-root\'\" >> .bashrc\r\necho \"alias chmod=\'chmod -v --preserve-root\'\" >> .bashrc\r\necho \"alias chown=\'chown -v --preserve-root\'\" >> .bashrc\r\necho \"alias chgrp=\'chgrp -v --preserve-root\'\" >> .bashrc\r\necho \"alias ll=\'ls -la\'\" >> .bashrc\r\n# Custom prompt\r\necho \"PS1=\'\\[\\e[0;32m\\]\\u\\[\\e[0m\\]@\\[\\e[0;38;5;21m\\]\\h \\[\\e[0;93m\\]\\w \\[\\e[0m\\]\\\\n\\[\\e[0m\\]\\$ \\[\\e[0m\\]\'\" >> .bashrc\r\n\r\n# Set the bashrc\r\nyes | cp .bashrc /etc/skel/.bashrc \r\nmkdir /etc/skel/.ssh\r\ncd /etc/skel/.ssh\r\necho \"ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOJt6S6fmTmkEJDoyQTptUkEBT8xssZf+TCjgLg2/wXu teddy@TEDDY\" >> /etc/skel/.ssh\r\n\r\nchmod -v 640 /etc/ssh/sshd_config\r\nchmod -v 640 /etc/ssh/ssh_config\r\n\r\nsource .bashrc\r\n\r\n# Remove the motd and issue and replacing it with mine\r\nyes | rm /etc/motd\r\ncd /etc\r\necho \"Connection succed\" >> /etc/motd\r\n\r\n# Go back to the root directory\r\ncd\r\n\r\n#Install Cheat\r\nwget https://github.com/cheat/cheat/releases/download/4.2.2/cheat-linux-amd64.gz\r\ngunzip cheat-linux-amd64.gz\r\nchmod +x cheat-linux-amd64\r\necho y | mv -v cheat-linux-amd64 /usr/local/bin/cheat\r\nyes | cheat\r\n\r\n#Install Bookstack\r\ngit clone https://github.com/BookStackApp/BookStack.git --branch release --single-branch\r\nmv BookStack /var/www/bookstack\r\ncd /var/www\r\nchown -R www-data:www-data bookstack\r\ncd bookstack\r\n\r\ncomposer install --no-dev\r\n\r\ncd /etc/nginx/sites-available\r\nPHPV=$(php -v | head -1 | cut -c5-7)\r\n[ ! -f /etc/nginx/sites-available/bookstack.conf ] && wget http://ftp.lutenruto.tk/bookstack.conf\r\n[ ! -L /etc/nginx/sites-enabled/bookstack.conf ] && ln -s /etc/nginx/sites-available/bookstack.conf /etc/nginx/sites-enabled/bookstack.conf\r\n\r\ncd /var/www/bookstack\r\n\r\n[ ! -f /var/www/bookstack/.env ] && wget http://ftp.lutenruto.tk/env\r\nmv env .env\r\n\r\nwget http://ftp.lutenruto.tk/script.sql\r\nmysql -h \"localhost\" -u \"root\" < script.sql\r\nrm script.sql\r\necho y | php artisan key:generate\r\necho y | php artisan migrate\r\n\r\nHOSTEXISTS=$(cat /etc/hosts | grep -o -i wiki.esgi.local | wc -l)\r\nip=$(hostname -I)\r\n[ \"$HOSTEXISTS\" -eq \"0\" ] && echo \"$ip wiki.esgi.local\" >> /etc/hosts\r\nsystemctl reload nginx\r\n\r\n# Updating mlocate database\r\nupdatedb\r\n\r\n# Creating the new superuser\r\nsudo useradd -m davy --shell /bin/bash\r\n# without prompt\r\necho -e -n \"root\\nroot\" | passwd P@ssword\r\n# with prompt\r\n# sudo passwd davy\r\nsudo usermod -aG sudo davy\r\nsudo usermod -u 10000 davy\r\nsudo groupmod -g 10000 davy\r\nsudo usermod -aG sudo esgi\r\n\r\n#Secure Grub\r\ncd /etc/grub.d\r\n\r\ncd \r\nyes | cp .bashrc /home/esgi/.bashrc\r\n\r\nHASH=$(echo -e -n \"root\\nroot\" |grub-mkpasswd-pbkdf2 |grep hachage|cut -d\" \" -f9)\r\n\r\necho \"cat << EOF\" >> /etc/grub.d/00_header\r\necho \"set superusers=\'davy\'\" >> /etc/grub.d/00_header\r\necho \"password_pbkdf2 davy \'$HASH\'\" >> /etc/grub.d/00_header\r\necho \"EOF\" >> /etc/grub.d/00_header\r\n\r\nsudo update-grub\r\n\r\n#Extend lv_home +2G\r\nsudo lvextend -L +2G -r /dev/VGCRYPT/lv_home\r\n\r\nSWAPEXISTS=$(lsblk -f | grep lv_swap | wc -l)\r\nif [ \"$SWAPEXISTS\" -eq \"0\" ]\r\nthen\r\n    sudo lvcreate -n lv_swap -L 500m VGCRYPT\r\n    sudo mkswap /dev/VGCRYPT/lv_swap\r\n    echo \"/dev/VGCRYPT/lv_swap swap swap defaults 0 0\" |sudo tee -a /etc/fstab\r\n    sudo swapon -v /dev/VGCRYPT/lv_swap\r\nfi\r\n\r\n# Disable root account\r\nsudo usermod -s /usr/sbin/nologin root\r\n\r\nsudo reboot\r\n\r\n\r\n ',1,'2021-11-04 17:25:49','2021-11-04 17:25:50','installation-et-configuration-du-bookstack','2-bookstack','version','','',12),(37,2,'Installation et configuration du BookStack','<h5 id=\"bkmrk-installation\"><strong>Installation</strong></h5>\r\n<p id=\"bkmrk-pour-%C3%AAtre-plus-rapid\">Pour être plus rapide dans l\'installation, je suis passé par un script que j\'ai écris en cours me permettant d\'automatiser l\'installation et la configuration du Cheat (un aide-mémoire de commandes Linux) ainsi que de Bookstack.</p>\r\n<p id=\"bkmrk-l%27insertion-de-mon-s\">L\'insertion de mon script c\'est faite par connexion SFTP entre mon pc hôte et ma VM Debian 10. (Le script en question se trouve à la fin du fichier)</p>\r\n<p id=\"bkmrk-%C2%A0\">Lorsque vous avez récupéré le fichier dans votre VM Debian 10, n\'oubliez de faire un <code>chmod a+x nom_du_fichier.sh</code> . Cela vous permettra de pouvoir exécuter le script car il est par défaut non exécutable.</p>\r\n<p id=\"bkmrk-puis%C2%A0sudo-.%2Fpost_ins\">Puis <code>sudo ./post_installation</code> pour le lancer.</p>\r\n<h5 id=\"bkmrk-configuration\"><strong>Configuration</strong></h5>\r\n<p id=\"bkmrk-pour-vous-connecter-\">Pour vous connecter au BookStack depuis le navigateur de votre ordinateur hôte (non pas la vm). Il vous faudra ajouter une ligne supplémentaire dans le fichier hosts de voir ordinateur. Celle-ci vous permettra à vous connecter au BookStack hébergé au sein de votre machine virtuelle.</p>\r\n<ul id=\"bkmrk-acc%C3%A8s-au-fichier-hos\"><li>Accès au fichier hosts sur Windows : <code>C:\\windows\\system32\\drivers\\etc\\hosts</code> à ouvrir avec le bloc-note ou tout autre éditeur en mode <span style=\"color: #ff0000;\"><strong>ADMINISTRATEUR</strong><span style=\"color: #000000;\">, sinon vous ne pourrez pas enregistrer vos modifications.</span></span></li>\r\n<li><span style=\"color: #ff0000;\"><span style=\"color: #000000;\">Ajouter l\'adresse ip de votre machine virtuelle ainsi que le lien vers le BookStack dans le fichier hosts : <code>X.X.X.X wiki.esgi.local</code></span></span></li>\r\n<li>Ensuite allez sur <a href=\"http://wiki.esgi.local\">http://wiki.esgi.local</a> ,les identifiants par défauts sont :\r\n<ul><li>admin@admin.com</li>\r\n<li>password</li>\r\n</ul></li>\r\n</ul><h5 id=\"bkmrk-script-de-post-insta\"><strong>Script de post installation du Cheat et du BookStack</strong></h5>\r\n<p id=\"bkmrk-%C2%A0-0\"> </p>\r\n<pre id=\"bkmrk-%23%21%2Fbin%2Fbash-%23-%23-nom-\"><code class=\"language-Powershell\">#!/bin/bash\r\n#\r\n# Nom		:\r\n# Description	:\r\n# Param 1	:\r\n# Param 2	:\r\n# Param 3	:\r\n# Param 4	:\r\n#\r\n# Ex) 		:	\r\n# Auteur	: Teddy JEAN-FRANCOIS\r\n# Email	: jfrancoisteddy@gmail.com\r\n# \r\n#\r\n#\r\n#\r\n#\r\n#\r\n\r\n# Install default packages\r\napt update\r\napt install -y sudo vim rsync screen mlocate htop net-tools git gnupg2 mc psmisc lynx curl git pigz pixz zip ncdu iptraf iotop dstat gdisk mc cifs-utils ntfs-3g sshfs gdisk lshw inxi figlet screenfetch tree tmux nginx php-fpm mariadb-server git composer php-mysql php-xml php-mbstring php-tokenizer php-curl php-gd -y | tee post_installation.log\r\n\r\n# Custom aliases\r\necho \"alias mv=\'mv -iv\'\" &gt;&gt; .bashrc\r\necho \"alias cp=\'cp -iv\'\" &gt;&gt; .bashrc\r\necho \"alias df=\'df -hT --total -x devtmpfs -x tmpfs\'\" &gt;&gt; .bashrc\r\necho \"alias rm=\'rm -iv --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chmod=\'chmod -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chown=\'chown -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chgrp=\'chgrp -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias ll=\'ls -la\'\" &gt;&gt; .bashrc\r\n# Custom prompt\r\necho \"PS1=\'\\[\\e[0;32m\\]\\u\\[\\e[0m\\]@\\[\\e[0;38;5;21m\\]\\h \\[\\e[0;93m\\]\\w \\[\\e[0m\\]\\\\n\\[\\e[0m\\]\\$ \\[\\e[0m\\]\'\" &gt;&gt; .bashrc\r\n\r\n# Set the bashrc\r\nyes | cp .bashrc /etc/skel/.bashrc \r\nmkdir /etc/skel/.ssh\r\ncd /etc/skel/.ssh\r\necho \"ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOJt6S6fmTmkEJDoyQTptUkEBT8xssZf+TCjgLg2/wXu teddy@TEDDY\" &gt;&gt; /etc/skel/.ssh\r\n\r\nchmod -v 640 /etc/ssh/sshd_config\r\nchmod -v 640 /etc/ssh/ssh_config\r\n\r\nsource .bashrc\r\n\r\n# Remove the motd and issue and replacing it with mine\r\nyes | rm /etc/motd\r\ncd /etc\r\necho \"Connection succed\" &gt;&gt; /etc/motd\r\n\r\n# Go back to the root directory\r\ncd\r\n\r\n#Install Cheat\r\nwget https://github.com/cheat/cheat/releases/download/4.2.2/cheat-linux-amd64.gz\r\ngunzip cheat-linux-amd64.gz\r\nchmod +x cheat-linux-amd64\r\necho y | mv -v cheat-linux-amd64 /usr/local/bin/cheat\r\nyes | cheat\r\n\r\n#Install Bookstack\r\ngit clone https://github.com/BookStackApp/BookStack.git --branch release --single-branch\r\nmv BookStack /var/www/bookstack\r\ncd /var/www\r\nchown -R www-data:www-data bookstack\r\ncd bookstack\r\n\r\ncomposer install --no-dev\r\n\r\ncd /etc/nginx/sites-available\r\nPHPV=$(php -v | head -1 | cut -c5-7)\r\n[ ! -f /etc/nginx/sites-available/bookstack.conf ] &amp;&amp; wget http://ftp.lutenruto.tk/bookstack.conf\r\n[ ! -L /etc/nginx/sites-enabled/bookstack.conf ] &amp;&amp; ln -s /etc/nginx/sites-available/bookstack.conf /etc/nginx/sites-enabled/bookstack.conf\r\n\r\ncd /var/www/bookstack\r\n\r\n[ ! -f /var/www/bookstack/.env ] &amp;&amp; wget http://ftp.lutenruto.tk/env\r\nmv env .env\r\n\r\nwget http://ftp.lutenruto.tk/script.sql\r\nmysql -h \"localhost\" -u \"root\" &lt; script.sql\r\nrm script.sql\r\necho y | php artisan key:generate\r\necho y | php artisan migrate\r\n\r\nHOSTEXISTS=$(cat /etc/hosts | grep -o -i wiki.esgi.local | wc -l)\r\nip=$(hostname -I)\r\n[ \"$HOSTEXISTS\" -eq \"0\" ] &amp;&amp; echo \"$ip wiki.esgi.local\" &gt;&gt; /etc/hosts\r\nsystemctl reload nginx\r\n\r\n# Updating mlocate database\r\nupdatedb\r\n\r\n# Creating the new superuser\r\nsudo useradd -m davy --shell /bin/bash\r\n# without prompt\r\necho -e -n \"root\\nroot\" | passwd P@ssword\r\n# with prompt\r\n# sudo passwd davy\r\nsudo usermod -aG sudo davy\r\nsudo usermod -u 10000 davy\r\nsudo groupmod -g 10000 davy\r\nsudo usermod -aG sudo esgi\r\n\r\n#Secure Grub\r\ncd /etc/grub.d\r\n\r\ncd \r\nyes | cp .bashrc /home/esgi/.bashrc\r\n\r\nHASH=$(echo -e -n \"root\\nroot\" |grub-mkpasswd-pbkdf2 |grep hachage|cut -d\" \" -f9)\r\n\r\necho \"cat &lt;&lt; EOF\" &gt;&gt; /etc/grub.d/00_header\r\necho \"set superusers=\'davy\'\" &gt;&gt; /etc/grub.d/00_header\r\necho \"password_pbkdf2 davy \'$HASH\'\" &gt;&gt; /etc/grub.d/00_header\r\necho \"EOF\" &gt;&gt; /etc/grub.d/00_header\r\n\r\nsudo update-grub\r\n\r\n#Extend lv_home +2G\r\nsudo lvextend -L +2G -r /dev/VGCRYPT/lv_home\r\n\r\nSWAPEXISTS=$(lsblk -f | grep lv_swap | wc -l)\r\nif [ \"$SWAPEXISTS\" -eq \"0\" ]\r\nthen\r\n    sudo lvcreate -n lv_swap -L 500m VGCRYPT\r\n    sudo mkswap /dev/VGCRYPT/lv_swap\r\n    echo \"/dev/VGCRYPT/lv_swap swap swap defaults 0 0\" |sudo tee -a /etc/fstab\r\n    sudo swapon -v /dev/VGCRYPT/lv_swap\r\nfi\r\n\r\n# Disable root account\r\nsudo usermod -s /usr/sbin/nologin root\r\n\r\nsudo reboot\r\n\r\n</code></pre>\r\n<p id=\"bkmrk-%C2%A0-2\"> </p>','Installation\r\nPour être plus rapide dans l\'installation, je suis passé par un script que j\'ai écris en cours me permettant d\'automatiser l\'installation et la configuration du Cheat (un aide-mémoire de commandes Linux) ainsi que de Bookstack.\r\nL\'insertion de mon script c\'est faite par connexion SFTP entre mon pc hôte et ma VM Debian 10. (Le script en question se trouve à la fin du fichier)\r\nLorsque vous avez récupéré le fichier dans votre VM Debian 10, n\'oubliez de faire un chmod a+x nom_du_fichier.sh . Cela vous permettra de pouvoir exécuter le script car il est par défaut non exécutable.\r\nPuis sudo ./post_installation pour le lancer.\r\nConfiguration\r\nPour vous connecter au BookStack depuis le navigateur de votre ordinateur hôte (non pas la vm). Il vous faudra ajouter une ligne supplémentaire dans le fichier hosts de voir ordinateur. Celle-ci vous permettra à vous connecter au BookStack hébergé au sein de votre machine virtuelle.\r\nAccès au fichier hosts sur Windows : C:\\windows\\system32\\drivers\\etc\\hosts à ouvrir avec le bloc-note ou tout autre éditeur en mode ADMINISTRATEUR, sinon vous ne pourrez pas enregistrer vos modifications.\r\nAjouter l\'adresse ip de votre machine virtuelle ainsi que le lien vers le BookStack dans le fichier hosts : X.X.X.X wiki.esgi.local\r\nEnsuite allez sur http://wiki.esgi.local ,les identifiants par défauts sont :\r\nadmin@admin.com\r\npassword\r\n\r\nScript de post installation du Cheat et du BookStack\r\n \r\n#!/bin/bash\r\n#\r\n# Nom		:\r\n# Description	:\r\n# Param 1	:\r\n# Param 2	:\r\n# Param 3	:\r\n# Param 4	:\r\n#\r\n# Ex) 		:	\r\n# Auteur	: Teddy JEAN-FRANCOIS\r\n# Email	: jfrancoisteddy@gmail.com\r\n# \r\n#\r\n#\r\n#\r\n#\r\n#\r\n\r\n# Install default packages\r\napt update\r\napt install -y sudo vim rsync screen mlocate htop net-tools git gnupg2 mc psmisc lynx curl git pigz pixz zip ncdu iptraf iotop dstat gdisk mc cifs-utils ntfs-3g sshfs gdisk lshw inxi figlet screenfetch tree tmux nginx php-fpm mariadb-server git composer php-mysql php-xml php-mbstring php-tokenizer php-curl php-gd -y | tee post_installation.log\r\n\r\n# Custom aliases\r\necho \"alias mv=\'mv -iv\'\" >> .bashrc\r\necho \"alias cp=\'cp -iv\'\" >> .bashrc\r\necho \"alias df=\'df -hT --total -x devtmpfs -x tmpfs\'\" >> .bashrc\r\necho \"alias rm=\'rm -iv --preserve-root\'\" >> .bashrc\r\necho \"alias chmod=\'chmod -v --preserve-root\'\" >> .bashrc\r\necho \"alias chown=\'chown -v --preserve-root\'\" >> .bashrc\r\necho \"alias chgrp=\'chgrp -v --preserve-root\'\" >> .bashrc\r\necho \"alias ll=\'ls -la\'\" >> .bashrc\r\n# Custom prompt\r\necho \"PS1=\'\\[\\e[0;32m\\]\\u\\[\\e[0m\\]@\\[\\e[0;38;5;21m\\]\\h \\[\\e[0;93m\\]\\w \\[\\e[0m\\]\\\\n\\[\\e[0m\\]\\$ \\[\\e[0m\\]\'\" >> .bashrc\r\n\r\n# Set the bashrc\r\nyes | cp .bashrc /etc/skel/.bashrc \r\nmkdir /etc/skel/.ssh\r\ncd /etc/skel/.ssh\r\necho \"ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOJt6S6fmTmkEJDoyQTptUkEBT8xssZf+TCjgLg2/wXu teddy@TEDDY\" >> /etc/skel/.ssh\r\n\r\nchmod -v 640 /etc/ssh/sshd_config\r\nchmod -v 640 /etc/ssh/ssh_config\r\n\r\nsource .bashrc\r\n\r\n# Remove the motd and issue and replacing it with mine\r\nyes | rm /etc/motd\r\ncd /etc\r\necho \"Connection succed\" >> /etc/motd\r\n\r\n# Go back to the root directory\r\ncd\r\n\r\n#Install Cheat\r\nwget https://github.com/cheat/cheat/releases/download/4.2.2/cheat-linux-amd64.gz\r\ngunzip cheat-linux-amd64.gz\r\nchmod +x cheat-linux-amd64\r\necho y | mv -v cheat-linux-amd64 /usr/local/bin/cheat\r\nyes | cheat\r\n\r\n#Install Bookstack\r\ngit clone https://github.com/BookStackApp/BookStack.git --branch release --single-branch\r\nmv BookStack /var/www/bookstack\r\ncd /var/www\r\nchown -R www-data:www-data bookstack\r\ncd bookstack\r\n\r\ncomposer install --no-dev\r\n\r\ncd /etc/nginx/sites-available\r\nPHPV=$(php -v | head -1 | cut -c5-7)\r\n[ ! -f /etc/nginx/sites-available/bookstack.conf ] && wget http://ftp.lutenruto.tk/bookstack.conf\r\n[ ! -L /etc/nginx/sites-enabled/bookstack.conf ] && ln -s /etc/nginx/sites-available/bookstack.conf /etc/nginx/sites-enabled/bookstack.conf\r\n\r\ncd /var/www/bookstack\r\n\r\n[ ! -f /var/www/bookstack/.env ] && wget http://ftp.lutenruto.tk/env\r\nmv env .env\r\n\r\nwget http://ftp.lutenruto.tk/script.sql\r\nmysql -h \"localhost\" -u \"root\" < script.sql\r\nrm script.sql\r\necho y | php artisan key:generate\r\necho y | php artisan migrate\r\n\r\nHOSTEXISTS=$(cat /etc/hosts | grep -o -i wiki.esgi.local | wc -l)\r\nip=$(hostname -I)\r\n[ \"$HOSTEXISTS\" -eq \"0\" ] && echo \"$ip wiki.esgi.local\" >> /etc/hosts\r\nsystemctl reload nginx\r\n\r\n# Updating mlocate database\r\nupdatedb\r\n\r\n# Creating the new superuser\r\nsudo useradd -m davy --shell /bin/bash\r\n# without prompt\r\necho -e -n \"root\\nroot\" | passwd P@ssword\r\n# with prompt\r\n# sudo passwd davy\r\nsudo usermod -aG sudo davy\r\nsudo usermod -u 10000 davy\r\nsudo groupmod -g 10000 davy\r\nsudo usermod -aG sudo esgi\r\n\r\n#Secure Grub\r\ncd /etc/grub.d\r\n\r\ncd \r\nyes | cp .bashrc /home/esgi/.bashrc\r\n\r\nHASH=$(echo -e -n \"root\\nroot\" |grub-mkpasswd-pbkdf2 |grep hachage|cut -d\" \" -f9)\r\n\r\necho \"cat << EOF\" >> /etc/grub.d/00_header\r\necho \"set superusers=\'davy\'\" >> /etc/grub.d/00_header\r\necho \"password_pbkdf2 davy \'$HASH\'\" >> /etc/grub.d/00_header\r\necho \"EOF\" >> /etc/grub.d/00_header\r\n\r\nsudo update-grub\r\n\r\n#Extend lv_home +2G\r\nsudo lvextend -L +2G -r /dev/VGCRYPT/lv_home\r\n\r\nSWAPEXISTS=$(lsblk -f | grep lv_swap | wc -l)\r\nif [ \"$SWAPEXISTS\" -eq \"0\" ]\r\nthen\r\n    sudo lvcreate -n lv_swap -L 500m VGCRYPT\r\n    sudo mkswap /dev/VGCRYPT/lv_swap\r\n    echo \"/dev/VGCRYPT/lv_swap swap swap defaults 0 0\" |sudo tee -a /etc/fstab\r\n    sudo swapon -v /dev/VGCRYPT/lv_swap\r\nfi\r\n\r\n# Disable root account\r\nsudo usermod -s /usr/sbin/nologin root\r\n\r\nsudo reboot\r\n\r\n\r\n ',1,'2021-11-04 17:25:56','2021-11-04 17:25:56','installation-et-configuration-du-bookstack','2-bookstack','version','','',13);
/*!40000 ALTER TABLE `page_revisions` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `pages`
--

DROP TABLE IF EXISTS `pages`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `pages` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `book_id` int(11) NOT NULL,
  `chapter_id` int(11) NOT NULL,
  `name` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `slug` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `html` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `text` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `priority` int(11) NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(11) NOT NULL,
  `updated_by` int(11) NOT NULL,
  `restricted` tinyint(1) NOT NULL DEFAULT 0,
  `draft` tinyint(1) NOT NULL DEFAULT 0,
  `markdown` longtext COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `revision_count` int(11) NOT NULL,
  `template` tinyint(1) NOT NULL DEFAULT 0,
  `deleted_at` timestamp NULL DEFAULT NULL,
  `owned_by` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `pages_slug_index` (`slug`),
  KEY `pages_book_id_index` (`book_id`),
  KEY `pages_chapter_id_index` (`chapter_id`),
  KEY `pages_priority_index` (`priority`),
  KEY `pages_created_by_index` (`created_by`),
  KEY `pages_updated_by_index` (`updated_by`),
  KEY `pages_restricted_index` (`restricted`),
  KEY `pages_draft_index` (`draft`),
  KEY `pages_template_index` (`template`),
  KEY `pages_owned_by_index` (`owned_by`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `pages`
--

LOCK TABLES `pages` WRITE;
/*!40000 ALTER TABLE `pages` DISABLE KEYS */;
INSERT INTO `pages` VALUES (1,1,0,'Installation Debian Raid','installation-debian-raid','<p id=\"bkmrk-tout-mettre-en-fran%C3%A7\">Tout mettre en français au début jusqu\'au domaine</p>\r\n<p id=\"bkmrk-\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/image-1636048607943.png\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/image-1636048607943.png\" alt=\"image-1636048607943.png\"></a></p>\r\n<p id=\"bkmrk-mettre-le-mot-de-pas\">Mettre le mot de passe que l\'on veut pour root et le compte que l\'on créé</p>\r\n<p id=\"bkmrk-choisir-%22manuel%22\">Choisir \"Manuel\"</p>\r\n<p id=\"bkmrk--0\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/image-1636048641903.png\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/image-1636048641903.png\" alt=\"image-1636048641903.png\"></a></p>\r\n<p id=\"bkmrk-sur-chaque-disque-cr\">Sur chaque disque créer une nouvelle partition vierge, le résultat à obtenir est le suivant :</p>\r\n<p id=\"bkmrk--1\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture1.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture1.JPG\" alt=\"Capture1.JPG\"></a></p>\r\n<h5 id=\"bkmrk-pour-chaque-disque-%3A\">Pour chaque disque :</h5>\r\n<ul id=\"bkmrk-aller-sur-%22espace-li\"><li>Aller sur \"Espace Libre\"</li>\r\n<li>Créer une nouvelle partition de 1G</li>\r\n<li>Primaire / Début / Utiliser comme : volume physique pour RAID</li>\r\n<li>Faire la même chose avec le reste du disque</li>\r\n</ul><p id=\"bkmrk--2\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture2.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture2.JPG\" alt=\"Capture2.JPG\"></a></p>\r\n<h5 id=\"bkmrk-le-r%C3%A9sultat-%C3%A0-obteni\">Le résultat à obtenir est le suivant :</h5>\r\n<p id=\"bkmrk--3\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture4.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture4.JPG\" alt=\"Capture4.JPG\"></a></p>\r\n<h5 id=\"bkmrk-il-faut-maintenant-c\">Il faut maintenant configurer le RAID</h5>\r\n<ul id=\"bkmrk-aller-dans-%22configur\"><li>Aller dans \"Configurer le RAID avec gestion logicielle\"</li>\r\n<li>Mettre oui</li>\r\n<li>Créer un périphérique multidisque</li>\r\n<li>Raid1</li>\r\n<li>Laisser 2 puis laisser 0</li>\r\n<li>Sélectionner sda1 et sdb1 comme suivant :</li>\r\n</ul><p id=\"bkmrk--4\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/image-1636048764420.png\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/image-1636048764420.png\" alt=\"image-1636048764420.png\"></a></p>\r\n<ul id=\"bkmrk-retourner-sur-cr%C3%A9er-\"><li>Retourner sur Créer un périphérique multidisque</li>\r\n<li>Raid5</li>\r\n<li>Laisser 3 puis 0</li>\r\n<li>Sélectionner sda2 sdb2 et sdc2 comme suivant :</li>\r\n</ul><p id=\"bkmrk--5\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/image-1636048793105.png\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/image-1636048793105.png\" alt=\"image-1636048793105.png\"></a></p>\r\n<ul id=\"bkmrk-cliquer-sur-continue\"><li>Cliquer sur continuer puis Terminer</li>\r\n<li>Le résultat à avoir doit être le suivant :</li>\r\n</ul><p id=\"bkmrk--6\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture4.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture4.JPG\" alt=\"Capture4.JPG\"></a></p>\r\n<ul id=\"bkmrk-aller-sur-le-n%C2%B01-du-\"><li>Aller sur le n°1 du raid 1 (Ligne 2 sur le screen)</li>\r\n<li>Configurer le volume comme suivant</li>\r\n<li>Mettre utiliser comme ext4</li>\r\n<li>Point de montage /boot</li>\r\n</ul><p id=\"bkmrk--7\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture5.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture5.JPG\" alt=\"Capture5.JPG\"></a></p>\r\n<ul id=\"bkmrk-aller-sur-configurer\"><li>Aller sur Configurer les volumes chiffrés</li>\r\n<li>Créer des volumes chiffrés</li>\r\n</ul><p id=\"bkmrk--8\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture6.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture6.JPG\" alt=\"Capture6.JPG\"></a></p>\r\n<ul id=\"bkmrk-chiffrer-la-plus-gro\"><li>Chiffrer la plus grosse partition</li>\r\n<li>Désactiver \"Effacer les données\"</li>\r\n<li>Fin du paramétrage</li>\r\n<li>Terminer</li>\r\n<li>Mettre un mot de passe</li>\r\n<li>Voici le résultat à obtenir :</li>\r\n</ul><p id=\"bkmrk--9\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture7.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture7.JPG\" alt=\"Capture7.JPG\"></a></p>\r\n<ul id=\"bkmrk-aller-sur-%22configure\"><li>Aller sur \"configurer le gestionnaire de volumes logiques (LVM)</li>\r\n<li>Mettre oui</li>\r\n<li>Créer un groupe de volume</li>\r\n<li>Lui donner un nom (ici VGCRYPT)</li>\r\n<li>Le mettre sur md1 crypt</li>\r\n</ul><p id=\"bkmrk--10\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture8.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture8.JPG\" alt=\"Capture8.JPG\"></a></p>\r\n<h5 id=\"bkmrk-pour-chaque-lv\">Pour chaque lv</h5>\r\n<ul id=\"bkmrk-aller-sur-%22cr%C3%A9er-un-\"><li>Aller sur \"Créer un volume logique\"</li>\r\n<li>Sélectionner notre VGCRYPT</li>\r\n<li>Donner le nom correspondant</li>\r\n<li>Donner la taille</li>\r\n<li>Valider</li>\r\n</ul><h5 id=\"bkmrk-en-l%27occurence-ici-%3A\">En l\'occurence ici :</h5>\r\n<ul id=\"bkmrk-lv_root-4g-lv_home-1\"><li>lv_root 4G</li>\r\n<li>lv_home 1G</li>\r\n<li>lv_tmp 1G</li>\r\n<li>lv_var 1G</li>\r\n<li>lv_swap 500M</li>\r\n</ul><p id=\"bkmrk--11\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture9.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture9.JPG\" alt=\"Capture9.JPG\"></a></p>\r\n<h5 id=\"bkmrk-aller-ensuite-sur-ch\">Aller ensuite sur chaque lv que l\'on vient de créer pour set son type et son label</h5>\r\n<ul id=\"bkmrk-lv_home-mont%C3%A9-sur-%2Fh\"><li>lv_home monté sur /home en xfs étiquette HOME</li>\r\n<li>lv_root monté sur / en ext4 étiquette ROOT</li>\r\n<li>lv_swap en swap</li>\r\n<li>lv_tmp monté sur /tmp en ext4 étiquette TMP</li>\r\n<li>lv_var monté sur /var en xfs étiquette VAR</li>\r\n</ul><h5 id=\"bkmrk-le-r%C3%A9sultat-%C3%A0-obteni-0\">Le résultat à obtenir est le suivant :</h5>\r\n<p id=\"bkmrk--12\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture10.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture10.JPG\" alt=\"Capture10.JPG\"></a></p>\r\n<h5 id=\"bkmrk-terminer-le-partionn\">Terminer le partionnement</h5>\r\n<p id=\"bkmrk-voici-le-r%C3%A9sultat-%C3%A0-\">Voici le résultat à obtenir</p>\r\n<p id=\"bkmrk--13\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture11.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture11.JPG\" alt=\"Capture11.JPG\"></a></p>\r\n<h5 id=\"bkmrk-faut-il-analyser-un-\">Faut-il analyser un autre CD ?</h5>\r\n<ul id=\"bkmrk-mettre-non-appuyer-s\"><li>Mettre non</li>\r\n<li>Appuyer sur entrée jusqu\'à l\'installation des logiciels</li>\r\n<li>Participer ou non aux statistiques, à vous de choisir</li>\r\n<li>Garder uniquement le serveur SSH et les utilitaires usuels comme suit :</li>\r\n</ul><p id=\"bkmrk--14\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture12.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture12.JPG\" alt=\"Capture12.JPG\"></a></p>\r\n<ul id=\"bkmrk-installer-grub-sur-l\"><li>\r\n<h4><span style=\"color: #ff0000;\"><strong>Installer grub sur le secteur d\'amorçage : Mettre oui</strong></span></h4>\r\n</li>\r\n<li>Le mettre sur /dev/sda</li>\r\n</ul><p id=\"bkmrk--15\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture13.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture13.JPG\" alt=\"Capture13.JPG\"></a></p>\r\n<h5 id=\"bkmrk-votre-vm-est-pr%C3%AAte-%21\"><strong>Votre VM est prête !</strong></h5>\r\n<h5 id=\"bkmrk-le-filesystem-%C3%A0-obte\">Le filesystem à obtenir est le suivant (A test avec lsblk) :</h5>\r\n<p id=\"bkmrk--16\"><a href=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/capture14.JPG\" target=\"_blank\" rel=\"noopener\"><img src=\"http://wiki.esgi.local/uploads/images/gallery/2021-11/scaled-1680-/capture14.JPG\" alt=\"Capture14.JPG\"></a></p>\r\n<p id=\"bkmrk-%C2%A0\"> </p>','Tout mettre en français au début jusqu\'au domaine\r\n\r\nMettre le mot de passe que l\'on veut pour root et le compte que l\'on créé\r\nChoisir \"Manuel\"\r\n\r\nSur chaque disque créer une nouvelle partition vierge, le résultat à obtenir est le suivant :\r\n\r\nPour chaque disque :\r\nAller sur \"Espace Libre\"\r\nCréer une nouvelle partition de 1G\r\nPrimaire / Début / Utiliser comme : volume physique pour RAID\r\nFaire la même chose avec le reste du disque\r\n\r\nLe résultat à obtenir est le suivant :\r\n\r\nIl faut maintenant configurer le RAID\r\nAller dans \"Configurer le RAID avec gestion logicielle\"\r\nMettre oui\r\nCréer un périphérique multidisque\r\nRaid1\r\nLaisser 2 puis laisser 0\r\nSélectionner sda1 et sdb1 comme suivant :\r\n\r\nRetourner sur Créer un périphérique multidisque\r\nRaid5\r\nLaisser 3 puis 0\r\nSélectionner sda2 sdb2 et sdc2 comme suivant :\r\n\r\nCliquer sur continuer puis Terminer\r\nLe résultat à avoir doit être le suivant :\r\n\r\nAller sur le n°1 du raid 1 (Ligne 2 sur le screen)\r\nConfigurer le volume comme suivant\r\nMettre utiliser comme ext4\r\nPoint de montage /boot\r\n\r\nAller sur Configurer les volumes chiffrés\r\nCréer des volumes chiffrés\r\n\r\nChiffrer la plus grosse partition\r\nDésactiver \"Effacer les données\"\r\nFin du paramétrage\r\nTerminer\r\nMettre un mot de passe\r\nVoici le résultat à obtenir :\r\n\r\nAller sur \"configurer le gestionnaire de volumes logiques (LVM)\r\nMettre oui\r\nCréer un groupe de volume\r\nLui donner un nom (ici VGCRYPT)\r\nLe mettre sur md1 crypt\r\n\r\nPour chaque lv\r\nAller sur \"Créer un volume logique\"\r\nSélectionner notre VGCRYPT\r\nDonner le nom correspondant\r\nDonner la taille\r\nValider\r\nEn l\'occurence ici :\r\nlv_root 4G\r\nlv_home 1G\r\nlv_tmp 1G\r\nlv_var 1G\r\nlv_swap 500M\r\n\r\nAller ensuite sur chaque lv que l\'on vient de créer pour set son type et son label\r\nlv_home monté sur /home en xfs étiquette HOME\r\nlv_root monté sur / en ext4 étiquette ROOT\r\nlv_swap en swap\r\nlv_tmp monté sur /tmp en ext4 étiquette TMP\r\nlv_var monté sur /var en xfs étiquette VAR\r\nLe résultat à obtenir est le suivant :\r\n\r\nTerminer le partionnement\r\nVoici le résultat à obtenir\r\n\r\nFaut-il analyser un autre CD ?\r\nMettre non\r\nAppuyer sur entrée jusqu\'à l\'installation des logiciels\r\nParticiper ou non aux statistiques, à vous de choisir\r\nGarder uniquement le serveur SSH et les utilitaires usuels comme suit :\r\n\r\n\r\nInstaller grub sur le secteur d\'amorçage : Mettre oui\r\n\r\nLe mettre sur /dev/sda\r\n\r\nVotre VM est prête !\r\nLe filesystem à obtenir est le suivant (A test avec lsblk) :\r\n\r\n ',2,'2021-11-04 16:53:29','2021-11-04 17:06:23',1,1,0,0,'',11,0,NULL,1),(2,2,0,'Installation et configuration du BookStack','installation-et-configuration-du-bookstack','<h5 id=\"bkmrk-installation\"><strong>Installation</strong></h5>\r\n<p id=\"bkmrk-pour-%C3%AAtre-plus-rapid\">Pour être plus rapide dans l\'installation, je suis passé par un script que j\'ai écris en cours me permettant d\'automatiser l\'installation et la configuration du Cheat (un aide-mémoire de commandes Linux) ainsi que de Bookstack.</p>\r\n<p id=\"bkmrk-l%27insertion-de-mon-s\">L\'insertion de mon script c\'est faite par connexion SFTP entre mon pc hôte et ma VM Debian 10. (Le script en question se trouve à la fin du fichier)</p>\r\n<p id=\"bkmrk-%C2%A0\">Lorsque vous avez récupéré le fichier dans votre VM Debian 10, n\'oubliez de faire un <code>chmod a+x nom_du_fichier.sh</code> . Cela vous permettra de pouvoir exécuter le script car il est par défaut non exécutable.</p>\r\n<p id=\"bkmrk-puis%C2%A0sudo-.%2Fpost_ins\">Puis <code>sudo ./post_installation</code> pour le lancer.</p>\r\n<h5 id=\"bkmrk-configuration\"><strong>Configuration</strong></h5>\r\n<p id=\"bkmrk-pour-vous-connecter-\">Pour vous connecter au BookStack depuis le navigateur de votre ordinateur hôte (non pas la vm). Il vous faudra ajouter une ligne supplémentaire dans le fichier hosts de voir ordinateur. Celle-ci vous permettra à vous connecter au BookStack hébergé au sein de votre machine virtuelle.</p>\r\n<ul id=\"bkmrk-acc%C3%A8s-au-fichier-hos\"><li>Accès au fichier hosts sur Windows : <code>C:\\windows\\system32\\drivers\\etc\\hosts</code> à ouvrir avec le bloc-note ou tout autre éditeur en mode <span style=\"color: #ff0000;\"><strong>ADMINISTRATEUR</strong><span style=\"color: #000000;\">, sinon vous ne pourrez pas enregistrer vos modifications.</span></span></li>\r\n<li><span style=\"color: #ff0000;\"><span style=\"color: #000000;\">Ajouter l\'adresse ip de votre machine virtuelle ainsi que le lien vers le BookStack dans le fichier hosts : <code>X.X.X.X wiki.esgi.local</code></span></span></li>\r\n<li>Ensuite allez sur <a href=\"http://wiki.esgi.local\">http://wiki.esgi.local</a> ,les identifiants par défauts sont :\r\n<ul><li>admin@admin.com</li>\r\n<li>password</li>\r\n</ul></li>\r\n</ul><h5 id=\"bkmrk-script-de-post-insta\"><strong>Script de post installation du Cheat et du BookStack</strong></h5>\r\n<p id=\"bkmrk-%C2%A0-0\"> </p>\r\n<pre id=\"bkmrk-%23%21%2Fbin%2Fbash-%23-%23-nom-\"><code class=\"language-Powershell\">#!/bin/bash\r\n#\r\n# Nom		:\r\n# Description	:\r\n# Param 1	:\r\n# Param 2	:\r\n# Param 3	:\r\n# Param 4	:\r\n#\r\n# Ex) 		:	\r\n# Auteur	: Teddy JEAN-FRANCOIS\r\n# Email	: jfrancoisteddy@gmail.com\r\n# \r\n#\r\n#\r\n#\r\n#\r\n#\r\n\r\n# Install default packages\r\napt update\r\napt install -y sudo vim rsync screen mlocate htop net-tools git gnupg2 mc psmisc lynx curl git pigz pixz zip ncdu iptraf iotop dstat gdisk mc cifs-utils ntfs-3g sshfs gdisk lshw inxi figlet screenfetch tree tmux nginx php-fpm mariadb-server git composer php-mysql php-xml php-mbstring php-tokenizer php-curl php-gd -y | tee post_installation.log\r\n\r\n# Custom aliases\r\necho \"alias mv=\'mv -iv\'\" &gt;&gt; .bashrc\r\necho \"alias cp=\'cp -iv\'\" &gt;&gt; .bashrc\r\necho \"alias df=\'df -hT --total -x devtmpfs -x tmpfs\'\" &gt;&gt; .bashrc\r\necho \"alias rm=\'rm -iv --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chmod=\'chmod -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chown=\'chown -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias chgrp=\'chgrp -v --preserve-root\'\" &gt;&gt; .bashrc\r\necho \"alias ll=\'ls -la\'\" &gt;&gt; .bashrc\r\n# Custom prompt\r\necho \"PS1=\'\\[\\e[0;32m\\]\\u\\[\\e[0m\\]@\\[\\e[0;38;5;21m\\]\\h \\[\\e[0;93m\\]\\w \\[\\e[0m\\]\\\\n\\[\\e[0m\\]\\$ \\[\\e[0m\\]\'\" &gt;&gt; .bashrc\r\n\r\n# Set the bashrc\r\nyes | cp .bashrc /etc/skel/.bashrc \r\nmkdir /etc/skel/.ssh\r\ncd /etc/skel/.ssh\r\necho \"ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOJt6S6fmTmkEJDoyQTptUkEBT8xssZf+TCjgLg2/wXu teddy@TEDDY\" &gt;&gt; /etc/skel/.ssh\r\n\r\nchmod -v 640 /etc/ssh/sshd_config\r\nchmod -v 640 /etc/ssh/ssh_config\r\n\r\nsource .bashrc\r\n\r\n# Remove the motd and issue and replacing it with mine\r\nyes | rm /etc/motd\r\ncd /etc\r\necho \"Connection succed\" &gt;&gt; /etc/motd\r\n\r\n# Go back to the root directory\r\ncd\r\n\r\n#Install Cheat\r\nwget https://github.com/cheat/cheat/releases/download/4.2.2/cheat-linux-amd64.gz\r\ngunzip cheat-linux-amd64.gz\r\nchmod +x cheat-linux-amd64\r\necho y | mv -v cheat-linux-amd64 /usr/local/bin/cheat\r\nyes | cheat\r\n\r\n#Install Bookstack\r\ngit clone https://github.com/BookStackApp/BookStack.git --branch release --single-branch\r\nmv BookStack /var/www/bookstack\r\ncd /var/www\r\nchown -R www-data:www-data bookstack\r\ncd bookstack\r\n\r\ncomposer install --no-dev\r\n\r\ncd /etc/nginx/sites-available\r\nPHPV=$(php -v | head -1 | cut -c5-7)\r\n[ ! -f /etc/nginx/sites-available/bookstack.conf ] &amp;&amp; wget http://ftp.lutenruto.tk/bookstack.conf\r\n[ ! -L /etc/nginx/sites-enabled/bookstack.conf ] &amp;&amp; ln -s /etc/nginx/sites-available/bookstack.conf /etc/nginx/sites-enabled/bookstack.conf\r\n\r\ncd /var/www/bookstack\r\n\r\n[ ! -f /var/www/bookstack/.env ] &amp;&amp; wget http://ftp.lutenruto.tk/env\r\nmv env .env\r\n\r\nwget http://ftp.lutenruto.tk/script.sql\r\nmysql -h \"localhost\" -u \"root\" &lt; script.sql\r\nrm script.sql\r\necho y | php artisan key:generate\r\necho y | php artisan migrate\r\n\r\nHOSTEXISTS=$(cat /etc/hosts | grep -o -i wiki.esgi.local | wc -l)\r\nip=$(hostname -I)\r\n[ \"$HOSTEXISTS\" -eq \"0\" ] &amp;&amp; echo \"$ip wiki.esgi.local\" &gt;&gt; /etc/hosts\r\nsystemctl reload nginx\r\n\r\n# Updating mlocate database\r\nupdatedb\r\n\r\n# Creating the new superuser\r\nsudo useradd -m davy --shell /bin/bash\r\n# without prompt\r\necho -e -n \"root\\nroot\" | passwd P@ssword\r\n# with prompt\r\n# sudo passwd davy\r\nsudo usermod -aG sudo davy\r\nsudo usermod -u 10000 davy\r\nsudo groupmod -g 10000 davy\r\nsudo usermod -aG sudo esgi\r\n\r\n#Secure Grub\r\ncd /etc/grub.d\r\n\r\ncd \r\nyes | cp .bashrc /home/esgi/.bashrc\r\n\r\nHASH=$(echo -e -n \"root\\nroot\" |grub-mkpasswd-pbkdf2 |grep hachage|cut -d\" \" -f9)\r\n\r\necho \"cat &lt;&lt; EOF\" &gt;&gt; /etc/grub.d/00_header\r\necho \"set superusers=\'davy\'\" &gt;&gt; /etc/grub.d/00_header\r\necho \"password_pbkdf2 davy \'$HASH\'\" &gt;&gt; /etc/grub.d/00_header\r\necho \"EOF\" &gt;&gt; /etc/grub.d/00_header\r\n\r\nsudo update-grub\r\n\r\n#Extend lv_home +2G\r\nsudo lvextend -L +2G -r /dev/VGCRYPT/lv_home\r\n\r\nSWAPEXISTS=$(lsblk -f | grep lv_swap | wc -l)\r\nif [ \"$SWAPEXISTS\" -eq \"0\" ]\r\nthen\r\n    sudo lvcreate -n lv_swap -L 500m VGCRYPT\r\n    sudo mkswap /dev/VGCRYPT/lv_swap\r\n    echo \"/dev/VGCRYPT/lv_swap swap swap defaults 0 0\" |sudo tee -a /etc/fstab\r\n    sudo swapon -v /dev/VGCRYPT/lv_swap\r\nfi\r\n\r\n# Disable root account\r\nsudo usermod -s /usr/sbin/nologin root\r\n\r\nsudo reboot\r\n\r\n</code></pre>\r\n<p id=\"bkmrk-%C2%A0-2\"> </p>','Installation\r\nPour être plus rapide dans l\'installation, je suis passé par un script que j\'ai écris en cours me permettant d\'automatiser l\'installation et la configuration du Cheat (un aide-mémoire de commandes Linux) ainsi que de Bookstack.\r\nL\'insertion de mon script c\'est faite par connexion SFTP entre mon pc hôte et ma VM Debian 10. (Le script en question se trouve à la fin du fichier)\r\nLorsque vous avez récupéré le fichier dans votre VM Debian 10, n\'oubliez de faire un chmod a+x nom_du_fichier.sh . Cela vous permettra de pouvoir exécuter le script car il est par défaut non exécutable.\r\nPuis sudo ./post_installation pour le lancer.\r\nConfiguration\r\nPour vous connecter au BookStack depuis le navigateur de votre ordinateur hôte (non pas la vm). Il vous faudra ajouter une ligne supplémentaire dans le fichier hosts de voir ordinateur. Celle-ci vous permettra à vous connecter au BookStack hébergé au sein de votre machine virtuelle.\r\nAccès au fichier hosts sur Windows : C:\\windows\\system32\\drivers\\etc\\hosts à ouvrir avec le bloc-note ou tout autre éditeur en mode ADMINISTRATEUR, sinon vous ne pourrez pas enregistrer vos modifications.\r\nAjouter l\'adresse ip de votre machine virtuelle ainsi que le lien vers le BookStack dans le fichier hosts : X.X.X.X wiki.esgi.local\r\nEnsuite allez sur http://wiki.esgi.local ,les identifiants par défauts sont :\r\nadmin@admin.com\r\npassword\r\n\r\nScript de post installation du Cheat et du BookStack\r\n \r\n#!/bin/bash\r\n#\r\n# Nom		:\r\n# Description	:\r\n# Param 1	:\r\n# Param 2	:\r\n# Param 3	:\r\n# Param 4	:\r\n#\r\n# Ex) 		:	\r\n# Auteur	: Teddy JEAN-FRANCOIS\r\n# Email	: jfrancoisteddy@gmail.com\r\n# \r\n#\r\n#\r\n#\r\n#\r\n#\r\n\r\n# Install default packages\r\napt update\r\napt install -y sudo vim rsync screen mlocate htop net-tools git gnupg2 mc psmisc lynx curl git pigz pixz zip ncdu iptraf iotop dstat gdisk mc cifs-utils ntfs-3g sshfs gdisk lshw inxi figlet screenfetch tree tmux nginx php-fpm mariadb-server git composer php-mysql php-xml php-mbstring php-tokenizer php-curl php-gd -y | tee post_installation.log\r\n\r\n# Custom aliases\r\necho \"alias mv=\'mv -iv\'\" >> .bashrc\r\necho \"alias cp=\'cp -iv\'\" >> .bashrc\r\necho \"alias df=\'df -hT --total -x devtmpfs -x tmpfs\'\" >> .bashrc\r\necho \"alias rm=\'rm -iv --preserve-root\'\" >> .bashrc\r\necho \"alias chmod=\'chmod -v --preserve-root\'\" >> .bashrc\r\necho \"alias chown=\'chown -v --preserve-root\'\" >> .bashrc\r\necho \"alias chgrp=\'chgrp -v --preserve-root\'\" >> .bashrc\r\necho \"alias ll=\'ls -la\'\" >> .bashrc\r\n# Custom prompt\r\necho \"PS1=\'\\[\\e[0;32m\\]\\u\\[\\e[0m\\]@\\[\\e[0;38;5;21m\\]\\h \\[\\e[0;93m\\]\\w \\[\\e[0m\\]\\\\n\\[\\e[0m\\]\\$ \\[\\e[0m\\]\'\" >> .bashrc\r\n\r\n# Set the bashrc\r\nyes | cp .bashrc /etc/skel/.bashrc \r\nmkdir /etc/skel/.ssh\r\ncd /etc/skel/.ssh\r\necho \"ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOJt6S6fmTmkEJDoyQTptUkEBT8xssZf+TCjgLg2/wXu teddy@TEDDY\" >> /etc/skel/.ssh\r\n\r\nchmod -v 640 /etc/ssh/sshd_config\r\nchmod -v 640 /etc/ssh/ssh_config\r\n\r\nsource .bashrc\r\n\r\n# Remove the motd and issue and replacing it with mine\r\nyes | rm /etc/motd\r\ncd /etc\r\necho \"Connection succed\" >> /etc/motd\r\n\r\n# Go back to the root directory\r\ncd\r\n\r\n#Install Cheat\r\nwget https://github.com/cheat/cheat/releases/download/4.2.2/cheat-linux-amd64.gz\r\ngunzip cheat-linux-amd64.gz\r\nchmod +x cheat-linux-amd64\r\necho y | mv -v cheat-linux-amd64 /usr/local/bin/cheat\r\nyes | cheat\r\n\r\n#Install Bookstack\r\ngit clone https://github.com/BookStackApp/BookStack.git --branch release --single-branch\r\nmv BookStack /var/www/bookstack\r\ncd /var/www\r\nchown -R www-data:www-data bookstack\r\ncd bookstack\r\n\r\ncomposer install --no-dev\r\n\r\ncd /etc/nginx/sites-available\r\nPHPV=$(php -v | head -1 | cut -c5-7)\r\n[ ! -f /etc/nginx/sites-available/bookstack.conf ] && wget http://ftp.lutenruto.tk/bookstack.conf\r\n[ ! -L /etc/nginx/sites-enabled/bookstack.conf ] && ln -s /etc/nginx/sites-available/bookstack.conf /etc/nginx/sites-enabled/bookstack.conf\r\n\r\ncd /var/www/bookstack\r\n\r\n[ ! -f /var/www/bookstack/.env ] && wget http://ftp.lutenruto.tk/env\r\nmv env .env\r\n\r\nwget http://ftp.lutenruto.tk/script.sql\r\nmysql -h \"localhost\" -u \"root\" < script.sql\r\nrm script.sql\r\necho y | php artisan key:generate\r\necho y | php artisan migrate\r\n\r\nHOSTEXISTS=$(cat /etc/hosts | grep -o -i wiki.esgi.local | wc -l)\r\nip=$(hostname -I)\r\n[ \"$HOSTEXISTS\" -eq \"0\" ] && echo \"$ip wiki.esgi.local\" >> /etc/hosts\r\nsystemctl reload nginx\r\n\r\n# Updating mlocate database\r\nupdatedb\r\n\r\n# Creating the new superuser\r\nsudo useradd -m davy --shell /bin/bash\r\n# without prompt\r\necho -e -n \"root\\nroot\" | passwd P@ssword\r\n# with prompt\r\n# sudo passwd davy\r\nsudo usermod -aG sudo davy\r\nsudo usermod -u 10000 davy\r\nsudo groupmod -g 10000 davy\r\nsudo usermod -aG sudo esgi\r\n\r\n#Secure Grub\r\ncd /etc/grub.d\r\n\r\ncd \r\nyes | cp .bashrc /home/esgi/.bashrc\r\n\r\nHASH=$(echo -e -n \"root\\nroot\" |grub-mkpasswd-pbkdf2 |grep hachage|cut -d\" \" -f9)\r\n\r\necho \"cat << EOF\" >> /etc/grub.d/00_header\r\necho \"set superusers=\'davy\'\" >> /etc/grub.d/00_header\r\necho \"password_pbkdf2 davy \'$HASH\'\" >> /etc/grub.d/00_header\r\necho \"EOF\" >> /etc/grub.d/00_header\r\n\r\nsudo update-grub\r\n\r\n#Extend lv_home +2G\r\nsudo lvextend -L +2G -r /dev/VGCRYPT/lv_home\r\n\r\nSWAPEXISTS=$(lsblk -f | grep lv_swap | wc -l)\r\nif [ \"$SWAPEXISTS\" -eq \"0\" ]\r\nthen\r\n    sudo lvcreate -n lv_swap -L 500m VGCRYPT\r\n    sudo mkswap /dev/VGCRYPT/lv_swap\r\n    echo \"/dev/VGCRYPT/lv_swap swap swap defaults 0 0\" |sudo tee -a /etc/fstab\r\n    sudo swapon -v /dev/VGCRYPT/lv_swap\r\nfi\r\n\r\n# Disable root account\r\nsudo usermod -s /usr/sbin/nologin root\r\n\r\nsudo reboot\r\n\r\n\r\n ',2,'2021-11-04 17:08:54','2021-11-04 17:25:56',1,1,0,0,'',13,0,NULL,1),(3,3,0,'Installation Guacamole','','<p id=\"bkmrk-%C2%A0\">Script d\'installation de Guacamole</p>\n<pre id=\"bkmrk-%23update-apt-update-%23\"><code class=\"language-shell\">#Update \napt update\n\n#Install Guacamole on Debian 10\napt install -y build-essential libcairo2-dev libturbojpeg0 libpng-dev libtool-bin libossp-uuid-dev libavcodec-dev libavformat-dev libavutil-dev libswscale-dev libpango1.0-dev libssh2-1-dev libvncserver-dev libtelnet-dev libssl-dev libvorbis-dev libwebp-dev libpulse-dev\n\n#Install FreeRDP libraries enable support for RDP via Guacamole\necho \"deb http://deb.debian.org/debian buster-backports main\" &gt; /etc/apt/sources.list.d/backports.list\n\napt update\napt-get install freerdp2-dev\n\napt update\n\n\n\n# Install a specifiy version of Guacamole\nVER=1.3.0\nwget https://downloads.apache.org/guacamole/$VER/source/guacamole-server-$VER.tar.gz\ntar xzf guacamole-server-$VER.tar.gz\ncd guacamole-server-$VER\n\n# Run \"configure\" script to check if everything is good\n./configure --with-init-dir=/etc/init.d --enable-allow-freerdp-snapshots | tee guacamole_server.log\n\n# Compile and install Guacamole Server\nmake\nmake install\n\n# Create the necessary links and cache to the most recent shared libraries found in the guacamole server directory.\nldconfig\n\n# Running Guacamole-Server\nsystemctl daemon-reload\nsystemctl start guacd\nsystemctl enable guacd\n\nsystemctl status guacd | tee guacamole_statut.log\n\n# Install Tomcat Servlet to connect to guacamole server via the web browser\napt install tomcat9 tomcat9-admin tomcat9-common tomcat9-user -y\n\nsystemctl status tomcat9.service | tee tomcat_statut.log\n\n# Allow external access to the serverlet\nss -altnp | grep 80\nufw allow 8080/tcp\n\n# Install Guacamole Client\nmkdir /etc/guacamole\n\n# Download Guacamole-client\nVER=1.3.0\nwget https://downloads.apache.org/guacamole/$VER/binary/guacamole-$VER.war -O /etc/guacamole/guacamole.war\nln -s /etc/guacamole/guacamole.war /var/lib/tomcat9/webapps/\n\nsystemctl restart tomcat9\nsystemctl restart guacd\n\n# Configure Apache Guacamole\nmkdir /etc/guacamole/{extensions,lib}\necho \"GUACAMOLE_HOME=/etc/guacamole\" &gt;&gt; /etc/default/tomcat9\ntouch /etc/guacamole/guacamole.properties\necho \"guacd-hostname: localhost\" &gt;&gt; /etc/guacamole/guacamole.properties\necho \"user-mapping: /etc/guacamole/user-mapping.xml\" &gt;&gt; /etc/guacamole/guacamole.properties\necho \"auth-provider: net.sourceforge.guacamole.net.basic.BasicFileAuthenticationProvider\" &gt;&gt; /etc/guacamole/guacamole.properties\nln -s /etc/guacamole /usr/share/tomcat9/.guacamole\n\n#echo -n \"Ilyane93*/\" | openssl md5\n\n\necho \"&lt;user-mapping&gt;\n        \n    &lt;!-- Per-user authentication and config information --&gt;\n\n    &lt;!-- A user using md5 to hash the password\n         guacadmin user and its md5 hashed password below is used to \n             login to Guacamole Web UI--&gt;\n    &lt;authorize \n            username=\"guacadmin\"\n            password=\"8d973ed89f465ec5dcd2caa7c1365f20\"\n            encoding=\"md5\"&gt;\n\n        &lt;!-- First authorized Remote connection --&gt;\n        &lt;connection name=\"Ubuntu 20.04 Server SSH\"&gt;\n            &lt;protocol&gt;ssh&lt;/protocol&gt;\n            &lt;param name=\"hostname\"&gt;192.168.57.3&lt;/param&gt;\n            &lt;param name=\"port\"&gt;22&lt;/param&gt;\n        &lt;/connection&gt;\n\n        &lt;!-- Second authorized remote connection --&gt;\n        &lt;connection name=\"Windows 7 RDP\"&gt;\n            &lt;protocol&gt;rdp&lt;/protocol&gt;\n            &lt;param name=\"hostname\"&gt;192.168.56.103&lt;/param&gt;\n            &lt;param name=\"port\"&gt;3389&lt;/param&gt;\n            &lt;param name=\"username\"&gt;Ilyane&lt;/param&gt;\n            &lt;param name=\"ignore-cert\"&gt;true&lt;/param&gt;\n        &lt;/connection&gt;\n\n    &lt;/authorize&gt;\n\n&lt;/user-mapping&gt;\" &gt;&gt; /etc/guacamole/user-mapping.xml\n\n\n#Restart Tomcat \n\nsystemctl restart tomcat9 guacd\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n</code></pre>','Script d\'installation de Guacamole\n#Update \napt update\n\n#Install Guacamole on Debian 10\napt install -y build-essential libcairo2-dev libturbojpeg0 libpng-dev libtool-bin libossp-uuid-dev libavcodec-dev libavformat-dev libavutil-dev libswscale-dev libpango1.0-dev libssh2-1-dev libvncserver-dev libtelnet-dev libssl-dev libvorbis-dev libwebp-dev libpulse-dev\n\n#Install FreeRDP libraries enable support for RDP via Guacamole\necho \"deb http://deb.debian.org/debian buster-backports main\" > /etc/apt/sources.list.d/backports.list\n\napt update\napt-get install freerdp2-dev\n\napt update\n\n\n\n# Install a specifiy version of Guacamole\nVER=1.3.0\nwget https://downloads.apache.org/guacamole/$VER/source/guacamole-server-$VER.tar.gz\ntar xzf guacamole-server-$VER.tar.gz\ncd guacamole-server-$VER\n\n# Run \"configure\" script to check if everything is good\n./configure --with-init-dir=/etc/init.d --enable-allow-freerdp-snapshots | tee guacamole_server.log\n\n# Compile and install Guacamole Server\nmake\nmake install\n\n# Create the necessary links and cache to the most recent shared libraries found in the guacamole server directory.\nldconfig\n\n# Running Guacamole-Server\nsystemctl daemon-reload\nsystemctl start guacd\nsystemctl enable guacd\n\nsystemctl status guacd | tee guacamole_statut.log\n\n# Install Tomcat Servlet to connect to guacamole server via the web browser\napt install tomcat9 tomcat9-admin tomcat9-common tomcat9-user -y\n\nsystemctl status tomcat9.service | tee tomcat_statut.log\n\n# Allow external access to the serverlet\nss -altnp | grep 80\nufw allow 8080/tcp\n\n# Install Guacamole Client\nmkdir /etc/guacamole\n\n# Download Guacamole-client\nVER=1.3.0\nwget https://downloads.apache.org/guacamole/$VER/binary/guacamole-$VER.war -O /etc/guacamole/guacamole.war\nln -s /etc/guacamole/guacamole.war /var/lib/tomcat9/webapps/\n\nsystemctl restart tomcat9\nsystemctl restart guacd\n\n# Configure Apache Guacamole\nmkdir /etc/guacamole/{extensions,lib}\necho \"GUACAMOLE_HOME=/etc/guacamole\" >> /etc/default/tomcat9\ntouch /etc/guacamole/guacamole.properties\necho \"guacd-hostname: localhost\" >> /etc/guacamole/guacamole.properties\necho \"user-mapping: /etc/guacamole/user-mapping.xml\" >> /etc/guacamole/guacamole.properties\necho \"auth-provider: net.sourceforge.guacamole.net.basic.BasicFileAuthenticationProvider\" >> /etc/guacamole/guacamole.properties\nln -s /etc/guacamole /usr/share/tomcat9/.guacamole\n\n#echo -n \"Ilyane93*/\" | openssl md5\n\n\necho \"<user-mapping>\n        \n    <!-- Per-user authentication and config information -->\n\n    <!-- A user using md5 to hash the password\n         guacadmin user and its md5 hashed password below is used to \n             login to Guacamole Web UI-->\n    <authorize \n            username=\"guacadmin\"\n            password=\"8d973ed89f465ec5dcd2caa7c1365f20\"\n            encoding=\"md5\">\n\n        <!-- First authorized Remote connection -->\n        <connection name=\"Ubuntu 20.04 Server SSH\">\n            <protocol>ssh</protocol>\n            <param name=\"hostname\">192.168.57.3</param>\n            <param name=\"port\">22</param>\n        </connection>\n\n        <!-- Second authorized remote connection -->\n        <connection name=\"Windows 7 RDP\">\n            <protocol>rdp</protocol>\n            <param name=\"hostname\">192.168.56.103</param>\n            <param name=\"port\">3389</param>\n            <param name=\"username\">Ilyane</param>\n            <param name=\"ignore-cert\">true</param>\n        </connection>\n\n    </authorize>\n\n</user-mapping>\" >> /etc/guacamole/user-mapping.xml\n\n\n#Restart Tomcat \n\nsystemctl restart tomcat9 guacd\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n',0,'2021-11-13 13:01:41','2021-11-13 13:04:42',1,1,0,1,'',0,0,NULL,1);
/*!40000 ALTER TABLE `pages` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `password_resets`
--

DROP TABLE IF EXISTS `password_resets`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `password_resets` (
  `email` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `token` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  KEY `password_resets_email_index` (`email`),
  KEY `password_resets_token_index` (`token`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `password_resets`
--

LOCK TABLES `password_resets` WRITE;
/*!40000 ALTER TABLE `password_resets` DISABLE KEYS */;
/*!40000 ALTER TABLE `password_resets` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `permission_role`
--

DROP TABLE IF EXISTS `permission_role`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `permission_role` (
  `permission_id` int(10) unsigned NOT NULL,
  `role_id` int(10) unsigned NOT NULL,
  PRIMARY KEY (`permission_id`,`role_id`),
  KEY `permission_role_role_id_foreign` (`role_id`),
  CONSTRAINT `permission_role_permission_id_foreign` FOREIGN KEY (`permission_id`) REFERENCES `role_permissions` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `permission_role_role_id_foreign` FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `permission_role`
--

LOCK TABLES `permission_role` WRITE;
/*!40000 ALTER TABLE `permission_role` DISABLE KEYS */;
INSERT INTO `permission_role` VALUES (19,1),(20,1),(21,1),(22,1),(23,1),(24,1),(24,2),(25,1),(25,2),(26,1),(26,2),(27,1),(27,2),(28,1),(28,2),(29,1),(29,2),(30,1),(30,2),(31,1),(31,2),(32,1),(32,2),(33,1),(33,2),(34,1),(34,2),(35,1),(35,2),(36,1),(36,2),(37,1),(37,2),(38,1),(38,2),(39,1),(39,2),(40,1),(40,2),(41,1),(41,2),(42,1),(42,2),(43,1),(43,2),(44,1),(44,2),(45,1),(45,2),(46,1),(46,2),(47,1),(47,2),(48,1),(48,2),(48,3),(48,4),(49,1),(49,2),(49,3),(49,4),(50,1),(50,2),(50,3),(50,4),(51,1),(51,2),(51,3),(51,4),(52,1),(52,2),(52,3),(52,4),(53,1),(53,2),(53,3),(53,4),(54,1),(55,1),(56,1),(57,1),(58,1),(59,1),(60,1),(61,1),(62,1),(63,1),(64,1),(65,1),(66,1),(66,2),(66,3),(66,4),(67,1),(67,2),(67,3),(67,4),(68,1),(68,2),(69,1),(69,2),(70,1),(70,2),(71,1),(71,2),(72,1),(72,2),(73,1),(73,2),(74,1),(75,1),(76,1),(76,2),(76,3),(76,4);
/*!40000 ALTER TABLE `permission_role` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `role_permissions`
--

DROP TABLE IF EXISTS `role_permissions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `role_permissions` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `display_name` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `description` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `permissions_name_unique` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=77 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `role_permissions`
--

LOCK TABLES `role_permissions` WRITE;
/*!40000 ALTER TABLE `role_permissions` DISABLE KEYS */;
INSERT INTO `role_permissions` VALUES (19,'settings-manage','Manage Settings',NULL,'2021-11-04 16:24:51','2021-11-04 16:24:51'),(20,'users-manage','Manage Users',NULL,'2021-11-04 16:24:51','2021-11-04 16:24:51'),(21,'user-roles-manage','Manage Roles & Permissions',NULL,'2021-11-04 16:24:51','2021-11-04 16:24:51'),(22,'restrictions-manage-all','Manage All Entity Permissions',NULL,'2021-11-04 16:24:51','2021-11-04 16:24:51'),(23,'restrictions-manage-own','Manage Entity Permissions On Own Content',NULL,'2021-11-04 16:24:51','2021-11-04 16:24:51'),(24,'book-create-all','Create All Books',NULL,'2021-11-04 16:24:51','2021-11-04 16:24:51'),(25,'book-create-own','Create Own Books',NULL,'2021-11-04 16:24:51','2021-11-04 16:24:51'),(26,'book-update-all','Update All Books',NULL,'2021-11-04 16:24:51','2021-11-04 16:24:51'),(27,'book-update-own','Update Own Books',NULL,'2021-11-04 16:24:51','2021-11-04 16:24:51'),(28,'book-delete-all','Delete All Books',NULL,'2021-11-04 16:24:51','2021-11-04 16:24:51'),(29,'book-delete-own','Delete Own Books',NULL,'2021-11-04 16:24:51','2021-11-04 16:24:51'),(30,'page-create-all','Create All Pages',NULL,'2021-11-04 16:24:51','2021-11-04 16:24:51'),(31,'page-create-own','Create Own Pages',NULL,'2021-11-04 16:24:51','2021-11-04 16:24:51'),(32,'page-update-all','Update All Pages',NULL,'2021-11-04 16:24:51','2021-11-04 16:24:51'),(33,'page-update-own','Update Own Pages',NULL,'2021-11-04 16:24:51','2021-11-04 16:24:51'),(34,'page-delete-all','Delete All Pages',NULL,'2021-11-04 16:24:51','2021-11-04 16:24:51'),(35,'page-delete-own','Delete Own Pages',NULL,'2021-11-04 16:24:51','2021-11-04 16:24:51'),(36,'chapter-create-all','Create All Chapters',NULL,'2021-11-04 16:24:51','2021-11-04 16:24:51'),(37,'chapter-create-own','Create Own Chapters',NULL,'2021-11-04 16:24:51','2021-11-04 16:24:51'),(38,'chapter-update-all','Update All Chapters',NULL,'2021-11-04 16:24:51','2021-11-04 16:24:51'),(39,'chapter-update-own','Update Own Chapters',NULL,'2021-11-04 16:24:51','2021-11-04 16:24:51'),(40,'chapter-delete-all','Delete All Chapters',NULL,'2021-11-04 16:24:52','2021-11-04 16:24:52'),(41,'chapter-delete-own','Delete Own Chapters',NULL,'2021-11-04 16:24:54','2021-11-04 16:24:54'),(42,'image-create-all','Create All Images',NULL,'2021-11-04 16:24:54','2021-11-04 16:24:54'),(43,'image-create-own','Create Own Images',NULL,'2021-11-04 16:24:54','2021-11-04 16:24:54'),(44,'image-update-all','Update All Images',NULL,'2021-11-04 16:24:55','2021-11-04 16:24:55'),(45,'image-update-own','Update Own Images',NULL,'2021-11-04 16:24:55','2021-11-04 16:24:55'),(46,'image-delete-all','Delete All Images',NULL,'2021-11-04 16:24:55','2021-11-04 16:24:55'),(47,'image-delete-own','Delete Own Images',NULL,'2021-11-04 16:24:55','2021-11-04 16:24:55'),(48,'book-view-all','View All Books',NULL,'2021-11-04 16:24:56','2021-11-04 16:24:56'),(49,'book-view-own','View Own Books',NULL,'2021-11-04 16:24:56','2021-11-04 16:24:56'),(50,'page-view-all','View All Pages',NULL,'2021-11-04 16:24:56','2021-11-04 16:24:56'),(51,'page-view-own','View Own Pages',NULL,'2021-11-04 16:24:56','2021-11-04 16:24:56'),(52,'chapter-view-all','View All Chapters',NULL,'2021-11-04 16:24:56','2021-11-04 16:24:56'),(53,'chapter-view-own','View Own Chapters',NULL,'2021-11-04 16:24:56','2021-11-04 16:24:56'),(54,'attachment-create-all','Create All Attachments',NULL,'2021-11-04 16:24:57','2021-11-04 16:24:57'),(55,'attachment-create-own','Create Own Attachments',NULL,'2021-11-04 16:24:57','2021-11-04 16:24:57'),(56,'attachment-update-all','Update All Attachments',NULL,'2021-11-04 16:24:57','2021-11-04 16:24:57'),(57,'attachment-update-own','Update Own Attachments',NULL,'2021-11-04 16:24:57','2021-11-04 16:24:57'),(58,'attachment-delete-all','Delete All Attachments',NULL,'2021-11-04 16:24:57','2021-11-04 16:24:57'),(59,'attachment-delete-own','Delete Own Attachments',NULL,'2021-11-04 16:24:57','2021-11-04 16:24:57'),(60,'comment-create-all','Create All Comments',NULL,'2021-11-04 16:25:03','2021-11-04 16:25:03'),(61,'comment-create-own','Create Own Comments',NULL,'2021-11-04 16:25:03','2021-11-04 16:25:03'),(62,'comment-update-all','Update All Comments',NULL,'2021-11-04 16:25:03','2021-11-04 16:25:03'),(63,'comment-update-own','Update Own Comments',NULL,'2021-11-04 16:25:03','2021-11-04 16:25:03'),(64,'comment-delete-all','Delete All Comments',NULL,'2021-11-04 16:25:03','2021-11-04 16:25:03'),(65,'comment-delete-own','Delete Own Comments',NULL,'2021-11-04 16:25:03','2021-11-04 16:25:03'),(66,'bookshelf-view-all','View All BookShelves',NULL,'2021-11-04 16:25:05','2021-11-04 16:25:05'),(67,'bookshelf-view-own','View Own BookShelves',NULL,'2021-11-04 16:25:05','2021-11-04 16:25:05'),(68,'bookshelf-create-all','Create All BookShelves',NULL,'2021-11-04 16:25:05','2021-11-04 16:25:05'),(69,'bookshelf-create-own','Create Own BookShelves',NULL,'2021-11-04 16:25:05','2021-11-04 16:25:05'),(70,'bookshelf-update-all','Update All BookShelves',NULL,'2021-11-04 16:25:05','2021-11-04 16:25:05'),(71,'bookshelf-update-own','Update Own BookShelves',NULL,'2021-11-04 16:25:05','2021-11-04 16:25:05'),(72,'bookshelf-delete-all','Delete All BookShelves',NULL,'2021-11-04 16:25:05','2021-11-04 16:25:05'),(73,'bookshelf-delete-own','Delete Own BookShelves',NULL,'2021-11-04 16:25:05','2021-11-04 16:25:05'),(74,'templates-manage','Manage Page Templates',NULL,'2021-11-04 16:25:05','2021-11-04 16:25:05'),(75,'access-api','Access system API',NULL,'2021-11-04 16:25:08','2021-11-04 16:25:08'),(76,'content-export','Export Content',NULL,'2021-11-04 16:25:10','2021-11-04 16:25:10');
/*!40000 ALTER TABLE `role_permissions` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `role_user`
--

DROP TABLE IF EXISTS `role_user`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `role_user` (
  `user_id` int(10) unsigned NOT NULL,
  `role_id` int(10) unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`role_id`),
  KEY `role_user_role_id_foreign` (`role_id`),
  CONSTRAINT `role_user_role_id_foreign` FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `role_user_user_id_foreign` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `role_user`
--

LOCK TABLES `role_user` WRITE;
/*!40000 ALTER TABLE `role_user` DISABLE KEYS */;
INSERT INTO `role_user` VALUES (1,1),(2,4);
/*!40000 ALTER TABLE `role_user` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `roles`
--

DROP TABLE IF EXISTS `roles`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `roles` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `display_name` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `description` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `system_name` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `external_auth_id` varchar(180) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `mfa_enforced` tinyint(1) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `roles_system_name_index` (`system_name`),
  KEY `roles_external_auth_id_index` (`external_auth_id`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `roles`
--

LOCK TABLES `roles` WRITE;
/*!40000 ALTER TABLE `roles` DISABLE KEYS */;
INSERT INTO `roles` VALUES (1,'Admin','Administrator of the whole application','2021-11-04 16:24:43','2021-11-04 16:24:43','admin','',0),(2,'Editor','User can edit Books, Chapters & Pages','2021-11-04 16:24:43','2021-11-04 16:24:43','','',0),(3,'Viewer','User can view books & their content behind authentication','2021-11-04 16:24:43','2021-11-04 16:24:43','','',0),(4,'Public','The role given to public visitors if allowed','2021-11-04 16:24:57','2021-11-04 16:24:57','public','',0);
/*!40000 ALTER TABLE `roles` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `search_terms`
--

DROP TABLE IF EXISTS `search_terms`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `search_terms` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `term` varchar(180) COLLATE utf8mb4_unicode_ci NOT NULL,
  `entity_type` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `entity_id` int(11) NOT NULL,
  `score` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `search_terms_term_index` (`term`),
  KEY `search_terms_entity_type_index` (`entity_type`),
  KEY `search_terms_entity_type_entity_id_index` (`entity_type`,`entity_id`),
  KEY `search_terms_score_index` (`score`)
) ENGINE=InnoDB AUTO_INCREMENT=4174 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `search_terms`
--

LOCK TABLES `search_terms` WRITE;
/*!40000 ALTER TABLE `search_terms` DISABLE KEYS */;
INSERT INTO `search_terms` VALUES (1,'1','BookStack\\Bookshelf',1,15),(2,'APPLICATIONS','BookStack\\Bookshelf',1,15),(3,'LIBRES','BookStack\\Bookshelf',1,15),(14,'1','BookStack\\Book',1,10),(15,'DEBIAN','BookStack\\Book',1,10),(16,'CONFIGURATION','BookStack\\Book',1,10),(17,'3','BookStack\\Book',3,10),(18,'GUACAMOLE','BookStack\\Book',3,10),(19,'2','BookStack\\Book',2,10),(20,'BOOKSTACK','BookStack\\Book',2,10),(320,'Installation','BookStack\\Page',1,5),(321,'Debian','BookStack\\Page',1,5),(322,'Raid','BookStack\\Page',1,5),(323,'Tout','BookStack\\Page',1,1),(324,'mettre','BookStack\\Page',1,3),(325,'en','BookStack\\Page',1,6),(326,'français','BookStack\\Page',1,1),(327,'au','BookStack\\Page',1,2),(328,'début','BookStack\\Page',1,1),(329,'jusqu','BookStack\\Page',1,2),(330,'domaine\r','BookStack\\Page',1,1),(331,'\r','BookStack\\Page',1,41),(332,'Mettre','BookStack\\Page',1,7),(333,'le','BookStack\\Page',1,21),(334,'mot','BookStack\\Page',1,2),(335,'de','BookStack\\Page',1,8),(336,'passe','BookStack\\Page',1,1),(337,'que','BookStack\\Page',1,3),(338,'l','BookStack\\Page',1,5),(339,'on','BookStack\\Page',1,3),(340,'veut','BookStack\\Page',1,1),(341,'pour','BookStack\\Page',1,3),(342,'root','BookStack\\Page',1,1),(343,'et','BookStack\\Page',1,5),(344,'compte','BookStack\\Page',1,1),(345,'créé\r','BookStack\\Page',1,1),(346,'Choisir','BookStack\\Page',1,1),(347,'Manuel','BookStack\\Page',1,1),(348,'Sur','BookStack\\Page',1,1),(349,'chaque','BookStack\\Page',1,4),(350,'disque','BookStack\\Page',1,2),(351,'créer','BookStack\\Page',1,2),(352,'une','BookStack\\Page',1,2),(353,'nouvelle','BookStack\\Page',1,2),(354,'partition','BookStack\\Page',1,2),(355,'vierge','BookStack\\Page',1,1),(356,'résultat','BookStack\\Page',1,6),(357,'à','BookStack\\Page',1,9),(358,'obtenir','BookStack\\Page',1,5),(359,'est','BookStack\\Page',1,5),(360,'suivant','BookStack\\Page',1,7),(361,'Pour','BookStack\\Page',1,2),(362,'Aller','BookStack\\Page',1,7),(363,'sur','BookStack\\Page',1,17),(364,'Espace','BookStack\\Page',1,1),(365,'Libre','BookStack\\Page',1,1),(366,'Créer','BookStack\\Page',1,6),(367,'1G\r','BookStack\\Page',1,4),(368,'Primaire','BookStack\\Page',1,1),(369,'/','BookStack\\Page',1,3),(370,'Début','BookStack\\Page',1,1),(371,'Utiliser','BookStack\\Page',1,1),(372,'comme','BookStack\\Page',1,6),(373,'volume','BookStack\\Page',1,3),(374,'physique','BookStack\\Page',1,1),(375,'RAID\r','BookStack\\Page',1,2),(376,'Faire','BookStack\\Page',1,1),(377,'la','BookStack\\Page',1,3),(378,'même','BookStack\\Page',1,1),(379,'chose','BookStack\\Page',1,1),(380,'avec','BookStack\\Page',1,3),(381,'reste','BookStack\\Page',1,1),(382,'du','BookStack\\Page',1,3),(383,'disque\r','BookStack\\Page',1,1),(384,'Le','BookStack\\Page',1,6),(385,'Il','BookStack\\Page',1,1),(386,'faut','BookStack\\Page',1,1),(387,'maintenant','BookStack\\Page',1,1),(388,'configurer','BookStack\\Page',1,2),(389,'dans','BookStack\\Page',1,1),(390,'Configurer','BookStack\\Page',1,3),(391,'RAID','BookStack\\Page',1,1),(392,'gestion','BookStack\\Page',1,1),(393,'logicielle','BookStack\\Page',1,1),(394,'oui\r','BookStack\\Page',1,3),(395,'un','BookStack\\Page',1,7),(396,'périphérique','BookStack\\Page',1,2),(397,'multidisque\r','BookStack\\Page',1,2),(398,'Raid1\r','BookStack\\Page',1,1),(399,'Laisser','BookStack\\Page',1,2),(400,'2','BookStack\\Page',1,2),(401,'puis','BookStack\\Page',1,3),(402,'laisser','BookStack\\Page',1,1),(403,'0\r','BookStack\\Page',1,2),(404,'Sélectionner','BookStack\\Page',1,3),(405,'sda1','BookStack\\Page',1,1),(406,'sdb1','BookStack\\Page',1,1),(407,'Retourner','BookStack\\Page',1,1),(408,'Raid5\r','BookStack\\Page',1,1),(409,'3','BookStack\\Page',1,1),(410,'sda2','BookStack\\Page',1,1),(411,'sdb2','BookStack\\Page',1,1),(412,'sdc2','BookStack\\Page',1,1),(413,'Cliquer','BookStack\\Page',1,1),(414,'continuer','BookStack\\Page',1,1),(415,'Terminer\r','BookStack\\Page',1,2),(416,'avoir','BookStack\\Page',1,1),(417,'doit','BookStack\\Page',1,1),(418,'être','BookStack\\Page',1,1),(419,'n°1','BookStack\\Page',1,1),(420,'raid','BookStack\\Page',1,1),(421,'1','BookStack\\Page',1,1),(422,'Ligne','BookStack\\Page',1,1),(423,'screen','BookStack\\Page',1,1),(424,'suivant\r','BookStack\\Page',1,1),(425,'utiliser','BookStack\\Page',1,1),(426,'ext4\r','BookStack\\Page',1,1),(427,'Point','BookStack\\Page',1,1),(428,'montage','BookStack\\Page',1,1),(429,'/boot\r','BookStack\\Page',1,1),(430,'les','BookStack\\Page',1,3),(431,'volumes','BookStack\\Page',1,3),(432,'chiffrés\r','BookStack\\Page',1,2),(433,'des','BookStack\\Page',1,2),(434,'Chiffrer','BookStack\\Page',1,1),(435,'plus','BookStack\\Page',1,1),(436,'grosse','BookStack\\Page',1,1),(437,'partition\r','BookStack\\Page',1,1),(438,'Désactiver','BookStack\\Page',1,1),(439,'Effacer','BookStack\\Page',1,1),(440,'données','BookStack\\Page',1,1),(441,'Fin','BookStack\\Page',1,1),(442,'paramétrage\r','BookStack\\Page',1,1),(443,'passe\r','BookStack\\Page',1,1),(444,'Voici','BookStack\\Page',1,2),(445,'gestionnaire','BookStack\\Page',1,1),(446,'logiques','BookStack\\Page',1,1),(447,'LVM','BookStack\\Page',1,1),(448,'groupe','BookStack\\Page',1,1),(449,'volume\r','BookStack\\Page',1,1),(450,'Lui','BookStack\\Page',1,1),(451,'donner','BookStack\\Page',1,1),(452,'nom','BookStack\\Page',1,2),(453,'ici','BookStack\\Page',1,2),(454,'VGCRYPT','BookStack\\Page',1,1),(455,'md1','BookStack\\Page',1,1),(456,'crypt\r','BookStack\\Page',1,1),(457,'lv\r','BookStack\\Page',1,1),(458,'logique','BookStack\\Page',1,1),(459,'notre','BookStack\\Page',1,1),(460,'VGCRYPT\r','BookStack\\Page',1,1),(461,'Donner','BookStack\\Page',1,2),(462,'correspondant\r','BookStack\\Page',1,1),(463,'taille\r','BookStack\\Page',1,1),(464,'Valider\r','BookStack\\Page',1,1),(465,'En','BookStack\\Page',1,1),(466,'occurence','BookStack\\Page',1,1),(467,'lv_root','BookStack\\Page',1,2),(468,'4G\r','BookStack\\Page',1,1),(469,'lv_home','BookStack\\Page',1,2),(470,'lv_tmp','BookStack\\Page',1,2),(471,'lv_var','BookStack\\Page',1,2),(472,'lv_swap','BookStack\\Page',1,2),(473,'500M\r','BookStack\\Page',1,1),(474,'ensuite','BookStack\\Page',1,1),(475,'lv','BookStack\\Page',1,1),(476,'vient','BookStack\\Page',1,1),(477,'set','BookStack\\Page',1,1),(478,'son','BookStack\\Page',1,2),(479,'type','BookStack\\Page',1,1),(480,'label\r','BookStack\\Page',1,1),(481,'monté','BookStack\\Page',1,4),(482,'/home','BookStack\\Page',1,1),(483,'xfs','BookStack\\Page',1,2),(484,'étiquette','BookStack\\Page',1,4),(485,'HOME\r','BookStack\\Page',1,1),(486,'ext4','BookStack\\Page',1,2),(487,'ROOT\r','BookStack\\Page',1,1),(488,'swap\r','BookStack\\Page',1,1),(489,'/tmp','BookStack\\Page',1,1),(490,'TMP\r','BookStack\\Page',1,1),(491,'/var','BookStack\\Page',1,1),(492,'VAR\r','BookStack\\Page',1,1),(493,'Terminer','BookStack\\Page',1,1),(494,'partionnement\r','BookStack\\Page',1,1),(495,'obtenir\r','BookStack\\Page',1,1),(496,'Faut-il','BookStack\\Page',1,1),(497,'analyser','BookStack\\Page',1,1),(498,'autre','BookStack\\Page',1,1),(499,'CD','BookStack\\Page',1,1),(500,'non\r','BookStack\\Page',1,1),(501,'Appuyer','BookStack\\Page',1,1),(502,'entrée','BookStack\\Page',1,1),(503,'installation','BookStack\\Page',1,1),(504,'logiciels\r','BookStack\\Page',1,1),(505,'Participer','BookStack\\Page',1,1),(506,'ou','BookStack\\Page',1,1),(507,'non','BookStack\\Page',1,1),(508,'aux','BookStack\\Page',1,1),(509,'statistiques','BookStack\\Page',1,1),(510,'vous','BookStack\\Page',1,1),(511,'choisir\r','BookStack\\Page',1,1),(512,'Garder','BookStack\\Page',1,1),(513,'uniquement','BookStack\\Page',1,1),(514,'serveur','BookStack\\Page',1,1),(515,'SSH','BookStack\\Page',1,1),(516,'utilitaires','BookStack\\Page',1,1),(517,'usuels','BookStack\\Page',1,1),(518,'suit','BookStack\\Page',1,1),(519,'Installer','BookStack\\Page',1,1),(520,'grub','BookStack\\Page',1,1),(521,'secteur','BookStack\\Page',1,1),(522,'d','BookStack\\Page',1,1),(523,'amorçage','BookStack\\Page',1,1),(524,'/dev/sda\r','BookStack\\Page',1,1),(525,'Votre','BookStack\\Page',1,1),(526,'VM','BookStack\\Page',1,1),(527,'prête','BookStack\\Page',1,1),(528,'filesystem','BookStack\\Page',1,1),(529,'A','BookStack\\Page',1,1),(530,'test','BookStack\\Page',1,1),(531,'lsblk','BookStack\\Page',1,1),(532,' ','BookStack\\Page',1,1),(3720,'Installation','BookStack\\Page',2,5),(3721,'et','BookStack\\Page',2,5),(3722,'configuration','BookStack\\Page',2,5),(3723,'du','BookStack\\Page',2,5),(3724,'BookStack','BookStack\\Page',2,5),(3725,'Installation\r','BookStack\\Page',2,1),(3726,'Pour','BookStack\\Page',2,2),(3727,'être','BookStack\\Page',2,1),(3728,'plus','BookStack\\Page',2,1),(3729,'rapide','BookStack\\Page',2,1),(3730,'dans','BookStack\\Page',2,4),(3731,'l','BookStack\\Page',2,3),(3732,'installation','BookStack\\Page',2,3),(3733,'je','BookStack\\Page',2,1),(3734,'suis','BookStack\\Page',2,1),(3735,'passé','BookStack\\Page',2,1),(3736,'par','BookStack\\Page',2,4),(3737,'un','BookStack\\Page',2,3),(3738,'script','BookStack\\Page',2,6),(3739,'que','BookStack\\Page',2,3),(3740,'j','BookStack\\Page',2,1),(3741,'ai','BookStack\\Page',2,1),(3742,'écris','BookStack\\Page',2,1),(3743,'en','BookStack\\Page',2,3),(3744,'cours','BookStack\\Page',2,1),(3745,'me','BookStack\\Page',2,1),(3746,'permettant','BookStack\\Page',2,1),(3747,'d','BookStack\\Page',2,1),(3748,'automatiser','BookStack\\Page',2,1),(3749,'et','BookStack\\Page',2,3),(3750,'la','BookStack\\Page',2,3),(3751,'configuration','BookStack\\Page',2,1),(3752,'du','BookStack\\Page',2,4),(3753,'Cheat','BookStack\\Page',2,2),(3754,'aide-mémoire','BookStack\\Page',2,1),(3755,'de','BookStack\\Page',2,10),(3756,'commandes','BookStack\\Page',2,1),(3757,'Linux','BookStack\\Page',2,1),(3758,'ainsi','BookStack\\Page',2,2),(3759,'Bookstack','BookStack\\Page',2,1),(3760,'\r','BookStack\\Page',2,52),(3761,'L','BookStack\\Page',2,1),(3762,'insertion','BookStack\\Page',2,1),(3763,'mon','BookStack\\Page',2,2),(3764,'c','BookStack\\Page',2,1),(3765,'est','BookStack\\Page',2,2),(3766,'faite','BookStack\\Page',2,1),(3767,'connexion','BookStack\\Page',2,1),(3768,'SFTP','BookStack\\Page',2,1),(3769,'entre','BookStack\\Page',2,1),(3770,'pc','BookStack\\Page',2,1),(3771,'hôte','BookStack\\Page',2,2),(3772,'ma','BookStack\\Page',2,1),(3773,'VM','BookStack\\Page',2,2),(3774,'Debian','BookStack\\Page',2,2),(3775,'10','BookStack\\Page',2,2),(3776,'Le','BookStack\\Page',2,1),(3777,'question','BookStack\\Page',2,1),(3778,'se','BookStack\\Page',2,1),(3779,'trouve','BookStack\\Page',2,1),(3780,'à','BookStack\\Page',2,3),(3781,'fin','BookStack\\Page',2,1),(3782,'fichier','BookStack\\Page',2,5),(3783,'Lorsque','BookStack\\Page',2,1),(3784,'vous','BookStack\\Page',2,7),(3785,'avez','BookStack\\Page',2,1),(3786,'récupéré','BookStack\\Page',2,1),(3787,'le','BookStack\\Page',2,9),(3788,'votre','BookStack\\Page',2,4),(3789,'n','BookStack\\Page',2,1),(3790,'oubliez','BookStack\\Page',2,1),(3791,'faire','BookStack\\Page',2,1),(3792,'chmod','BookStack\\Page',2,5),(3793,'a+x','BookStack\\Page',2,1),(3794,'nom_du_fichier','BookStack\\Page',2,1),(3795,'sh','BookStack\\Page',2,1),(3796,'Cela','BookStack\\Page',2,1),(3797,'permettra','BookStack\\Page',2,2),(3798,'pouvoir','BookStack\\Page',2,1),(3799,'exécuter','BookStack\\Page',2,1),(3800,'car','BookStack\\Page',2,1),(3801,'il','BookStack\\Page',2,1),(3802,'défaut','BookStack\\Page',2,1),(3803,'non','BookStack\\Page',2,2),(3804,'exécutable','BookStack\\Page',2,1),(3805,'Puis sudo','BookStack\\Page',2,1),(3806,'/post_installation','BookStack\\Page',2,1),(3807,'pour','BookStack\\Page',2,1),(3808,'lancer','BookStack\\Page',2,1),(3809,'Configuration\r','BookStack\\Page',2,1),(3810,'connecter','BookStack\\Page',2,2),(3811,'au','BookStack\\Page',2,4),(3812,'BookStack','BookStack\\Page',2,4),(3813,'depuis','BookStack\\Page',2,1),(3814,'navigateur','BookStack\\Page',2,1),(3815,'ordinateur','BookStack\\Page',2,2),(3816,'pas','BookStack\\Page',2,2),(3817,'vm','BookStack\\Page',2,1),(3818,'Il','BookStack\\Page',2,1),(3819,'faudra','BookStack\\Page',2,1),(3820,'ajouter','BookStack\\Page',2,1),(3821,'une','BookStack\\Page',2,1),(3822,'ligne','BookStack\\Page',2,1),(3823,'supplémentaire','BookStack\\Page',2,1),(3824,'hosts','BookStack\\Page',2,3),(3825,'voir','BookStack\\Page',2,1),(3826,'Celle-ci','BookStack\\Page',2,1),(3827,'hébergé','BookStack\\Page',2,1),(3828,'sein','BookStack\\Page',2,1),(3829,'machine','BookStack\\Page',2,2),(3830,'virtuelle','BookStack\\Page',2,2),(3831,'Accès','BookStack\\Page',2,1),(3832,'sur','BookStack\\Page',2,2),(3833,'Windows','BookStack\\Page',2,1),(3834,'C','BookStack\\Page',2,1),(3835,'\\windows\\system32\\drivers\\etc\\hosts','BookStack\\Page',2,1),(3836,'ouvrir','BookStack\\Page',2,1),(3837,'avec','BookStack\\Page',2,1),(3838,'bloc-note','BookStack\\Page',2,1),(3839,'ou','BookStack\\Page',2,1),(3840,'tout','BookStack\\Page',2,1),(3841,'autre','BookStack\\Page',2,1),(3842,'éditeur','BookStack\\Page',2,1),(3843,'mode','BookStack\\Page',2,1),(3844,'ADMINISTRATEUR','BookStack\\Page',2,1),(3845,'sinon','BookStack\\Page',2,1),(3846,'ne','BookStack\\Page',2,1),(3847,'pourrez','BookStack\\Page',2,1),(3848,'enregistrer','BookStack\\Page',2,1),(3849,'vos','BookStack\\Page',2,1),(3850,'modifications','BookStack\\Page',2,1),(3851,'Ajouter','BookStack\\Page',2,1),(3852,'adresse','BookStack\\Page',2,1),(3853,'ip','BookStack\\Page',2,1),(3854,'lien','BookStack\\Page',2,1),(3855,'vers','BookStack\\Page',2,1),(3856,' X','BookStack\\Page',2,1),(3857,'X','BookStack\\Page',2,3),(3858,'wiki','BookStack\\Page',2,3),(3859,'esgi','BookStack\\Page',2,4),(3860,'local\r','BookStack\\Page',2,1),(3861,'Ensuite','BookStack\\Page',2,1),(3862,'allez','BookStack\\Page',2,1),(3863,'http','BookStack\\Page',2,4),(3864,'//wiki','BookStack\\Page',2,1),(3865,'local','BookStack\\Page',2,3),(3866,'les','BookStack\\Page',2,1),(3867,'identifiants','BookStack\\Page',2,1),(3868,'défauts','BookStack\\Page',2,1),(3869,'sont','BookStack\\Page',2,1),(3870,'admin@admin','BookStack\\Page',2,1),(3871,'com\r','BookStack\\Page',2,2),(3872,'password\r','BookStack\\Page',2,1),(3873,'Script','BookStack\\Page',2,1),(3874,'post','BookStack\\Page',2,1),(3875,'BookStack\r','BookStack\\Page',2,1),(3876,' \r','BookStack\\Page',2,1),(3877,'#','BookStack\\Page',2,23),(3878,'/bin/bash\r','BookStack\\Page',2,2),(3879,'#\r','BookStack\\Page',2,7),(3880,'Nom','BookStack\\Page',2,1),(3881,'Description','BookStack\\Page',2,1),(3882,'Param','BookStack\\Page',2,4),(3883,'1','BookStack\\Page',2,1),(3884,'2','BookStack\\Page',2,2),(3885,'3','BookStack\\Page',2,1),(3886,'4','BookStack\\Page',2,1),(3887,'Ex','BookStack\\Page',2,1),(3888,'Auteur','BookStack\\Page',2,1),(3889,'Teddy','BookStack\\Page',2,1),(3890,'JEAN-FRANCOIS\r','BookStack\\Page',2,1),(3891,'Email','BookStack\\Page',2,1),(3892,'jfrancoisteddy@gmail','BookStack\\Page',2,1),(3893,'Install','BookStack\\Page',2,1),(3894,'default','BookStack\\Page',2,1),(3895,'packages\r','BookStack\\Page',2,1),(3896,'apt','BookStack\\Page',2,2),(3897,'update\r','BookStack\\Page',2,1),(3898,'install','BookStack\\Page',2,2),(3899,'-y','BookStack\\Page',2,2),(3900,'sudo','BookStack\\Page',2,16),(3901,'vim','BookStack\\Page',2,1),(3902,'rsync','BookStack\\Page',2,1),(3903,'screen','BookStack\\Page',2,1),(3904,'mlocate','BookStack\\Page',2,2),(3905,'htop','BookStack\\Page',2,1),(3906,'net-tools','BookStack\\Page',2,1),(3907,'git','BookStack\\Page',2,5),(3908,'gnupg2','BookStack\\Page',2,1),(3909,'mc','BookStack\\Page',2,2),(3910,'psmisc','BookStack\\Page',2,1),(3911,'lynx','BookStack\\Page',2,1),(3912,'curl','BookStack\\Page',2,1),(3913,'pigz','BookStack\\Page',2,1),(3914,'pixz','BookStack\\Page',2,1),(3915,'zip','BookStack\\Page',2,1),(3916,'ncdu','BookStack\\Page',2,1),(3917,'iptraf','BookStack\\Page',2,1),(3918,'iotop','BookStack\\Page',2,1),(3919,'dstat','BookStack\\Page',2,1),(3920,'gdisk','BookStack\\Page',2,2),(3921,'cifs-utils','BookStack\\Page',2,1),(3922,'ntfs-3g','BookStack\\Page',2,1),(3923,'sshfs','BookStack\\Page',2,1),(3924,'lshw','BookStack\\Page',2,1),(3925,'inxi','BookStack\\Page',2,1),(3926,'figlet','BookStack\\Page',2,1),(3927,'screenfetch','BookStack\\Page',2,1),(3928,'tree','BookStack\\Page',2,1),(3929,'tmux','BookStack\\Page',2,1),(3930,'nginx','BookStack\\Page',2,1),(3931,'php-fpm','BookStack\\Page',2,1),(3932,'mariadb-server','BookStack\\Page',2,1),(3933,'composer','BookStack\\Page',2,2),(3934,'php-mysql','BookStack\\Page',2,1),(3935,'php-xml','BookStack\\Page',2,1),(3936,'php-mbstring','BookStack\\Page',2,1),(3937,'php-tokenizer','BookStack\\Page',2,1),(3938,'php-curl','BookStack\\Page',2,1),(3939,'php-gd','BookStack\\Page',2,1),(3940,'|','BookStack\\Page',2,15),(3941,'tee','BookStack\\Page',2,2),(3942,'post_installation','BookStack\\Page',2,1),(3943,'log\r','BookStack\\Page',2,1),(3944,'Custom','BookStack\\Page',2,2),(3945,'aliases\r','BookStack\\Page',2,1),(3946,'echo','BookStack\\Page',2,22),(3947,'alias','BookStack\\Page',2,8),(3948,'mv=','BookStack\\Page',2,1),(3949,'mv','BookStack\\Page',2,4),(3950,'-iv','BookStack\\Page',2,3),(3951,'bashrc\r','BookStack\\Page',2,12),(3952,'cp=','BookStack\\Page',2,1),(3953,'cp','BookStack\\Page',2,3),(3954,'df=','BookStack\\Page',2,1),(3955,'df','BookStack\\Page',2,1),(3956,'-hT','BookStack\\Page',2,1),(3957,'--total','BookStack\\Page',2,1),(3958,'-x','BookStack\\Page',2,2),(3959,'devtmpfs','BookStack\\Page',2,1),(3960,'tmpfs','BookStack\\Page',2,1),(3961,'rm=','BookStack\\Page',2,1),(3962,'rm','BookStack\\Page',2,3),(3963,'--preserve-root','BookStack\\Page',2,4),(3964,'chmod=','BookStack\\Page',2,1),(3965,'-v','BookStack\\Page',2,8),(3966,'chown=','BookStack\\Page',2,1),(3967,'chown','BookStack\\Page',2,2),(3968,'chgrp=','BookStack\\Page',2,1),(3969,'chgrp','BookStack\\Page',2,1),(3970,'ll=','BookStack\\Page',2,1),(3971,'ls','BookStack\\Page',2,1),(3972,'-la','BookStack\\Page',2,1),(3973,'prompt\r','BookStack\\Page',2,3),(3974,'PS1=','BookStack\\Page',2,1),(3975,'\\','BookStack\\Page',2,4),(3976,'\\e','BookStack\\Page',2,7),(3977,'0','BookStack\\Page',2,7),(3978,'32m\\','BookStack\\Page',2,1),(3979,'\\u\\','BookStack\\Page',2,1),(3980,'0m\\','BookStack\\Page',2,4),(3981,'@\\','BookStack\\Page',2,1),(3982,'38','BookStack\\Page',2,1),(3983,'5','BookStack\\Page',2,1),(3984,'21m\\','BookStack\\Page',2,1),(3985,'\\h','BookStack\\Page',2,1),(3986,'93m\\','BookStack\\Page',2,1),(3987,'\\w','BookStack\\Page',2,1),(3988,'\\\\n\\','BookStack\\Page',2,1),(3989,'\\$','BookStack\\Page',2,1),(3990,'Set','BookStack\\Page',2,1),(3991,'the','BookStack\\Page',2,4),(3992,'yes','BookStack\\Page',2,4),(3993,'bashrc','BookStack\\Page',2,3),(3994,'/etc/skel/','BookStack\\Page',2,4),(3995,'mkdir','BookStack\\Page',2,1),(3996,'ssh\r','BookStack\\Page',2,3),(3997,'cd','BookStack\\Page',2,8),(3998,'ssh-ed25519','BookStack\\Page',2,1),(3999,'AAAAC3NzaC1lZDI1NTE5AAAAIOJt6S6fmTmkEJDoyQTptUkEBT8xssZf+TCjgLg2/wXu','BookStack\\Page',2,1),(4000,'teddy@TEDDY','BookStack\\Page',2,1),(4001,'640','BookStack\\Page',2,2),(4002,'/etc/ssh/sshd_config\r','BookStack\\Page',2,1),(4003,'/etc/ssh/ssh_config\r','BookStack\\Page',2,1),(4004,'source','BookStack\\Page',2,1),(4005,'Remove','BookStack\\Page',2,1),(4006,'motd','BookStack\\Page',2,1),(4007,'and','BookStack\\Page',2,2),(4008,'issue','BookStack\\Page',2,1),(4009,'replacing','BookStack\\Page',2,1),(4010,'it','BookStack\\Page',2,1),(4011,'with','BookStack\\Page',2,2),(4012,'mine\r','BookStack\\Page',2,1),(4013,'/etc/motd\r','BookStack\\Page',2,2),(4014,'/etc\r','BookStack\\Page',2,1),(4015,'Connection','BookStack\\Page',2,1),(4016,'succed','BookStack\\Page',2,1),(4017,'Go','BookStack\\Page',2,1),(4018,'back','BookStack\\Page',2,1),(4019,'to','BookStack\\Page',2,1),(4020,'root','BookStack\\Page',2,3),(4021,'directory\r','BookStack\\Page',2,1),(4022,'cd\r','BookStack\\Page',2,1),(4023,'#Install','BookStack\\Page',2,2),(4024,'Cheat\r','BookStack\\Page',2,1),(4025,'wget','BookStack\\Page',2,4),(4026,'https','BookStack\\Page',2,2),(4027,'//github','BookStack\\Page',2,2),(4028,'com/cheat/cheat/releases/download/4','BookStack\\Page',2,1),(4029,'2/cheat-linux-amd64','BookStack\\Page',2,1),(4030,'gz\r','BookStack\\Page',2,2),(4031,'gunzip','BookStack\\Page',2,1),(4032,'cheat-linux-amd64','BookStack\\Page',2,2),(4033,'+x','BookStack\\Page',2,1),(4034,'cheat-linux-amd64\r','BookStack\\Page',2,1),(4035,'y','BookStack\\Page',2,3),(4036,'/usr/local/bin/cheat\r','BookStack\\Page',2,1),(4037,'cheat\r','BookStack\\Page',2,1),(4038,'Bookstack\r','BookStack\\Page',2,1),(4039,'clone','BookStack\\Page',2,1),(4040,'com/BookStackApp/BookStack','BookStack\\Page',2,1),(4041,'--branch','BookStack\\Page',2,1),(4042,'release','BookStack\\Page',2,1),(4043,'--single-branch\r','BookStack\\Page',2,1),(4044,'/var/www/bookstack\r','BookStack\\Page',2,2),(4045,'/var/www\r','BookStack\\Page',2,1),(4046,'-R','BookStack\\Page',2,1),(4047,'www-data','BookStack\\Page',2,2),(4048,'bookstack\r','BookStack\\Page',2,2),(4049,'--no-dev\r','BookStack\\Page',2,1),(4050,'/etc/nginx/sites-available\r','BookStack\\Page',2,1),(4051,'PHPV=$','BookStack\\Page',2,1),(4052,'php','BookStack\\Page',2,3),(4053,'head','BookStack\\Page',2,1),(4054,'-1','BookStack\\Page',2,1),(4055,'cut','BookStack\\Page',2,1),(4056,'-c5-7','BookStack\\Page',2,1),(4057,'-f','BookStack\\Page',2,3),(4058,'/etc/nginx/sites-available/bookstack','BookStack\\Page',2,2),(4059,'conf','BookStack\\Page',2,3),(4060,'&&','BookStack\\Page',2,4),(4061,'//ftp','BookStack\\Page',2,3),(4062,'lutenruto','BookStack\\Page',2,3),(4063,'tk/bookstack','BookStack\\Page',2,1),(4064,'conf\r','BookStack\\Page',2,2),(4065,'-L','BookStack\\Page',2,3),(4066,'/etc/nginx/sites-enabled/bookstack','BookStack\\Page',2,2),(4067,'ln','BookStack\\Page',2,1),(4068,'-s','BookStack\\Page',2,2),(4069,'/var/www/bookstack/','BookStack\\Page',2,1),(4070,'env','BookStack\\Page',2,2),(4071,'tk/env\r','BookStack\\Page',2,1),(4072,'env\r','BookStack\\Page',2,1),(4073,'tk/script','BookStack\\Page',2,1),(4074,'sql\r','BookStack\\Page',2,3),(4075,'mysql','BookStack\\Page',2,1),(4076,'-h','BookStack\\Page',2,1),(4077,'localhost','BookStack\\Page',2,1),(4078,'-u','BookStack\\Page',2,2),(4079,'artisan','BookStack\\Page',2,2),(4080,'key','BookStack\\Page',2,1),(4081,'generate\r','BookStack\\Page',2,1),(4082,'migrate\r','BookStack\\Page',2,1),(4083,'HOSTEXISTS=$','BookStack\\Page',2,1),(4084,'cat','BookStack\\Page',2,2),(4085,'/etc/hosts','BookStack\\Page',2,1),(4086,'grep','BookStack\\Page',2,2),(4087,'-o','BookStack\\Page',2,1),(4088,'-i','BookStack\\Page',2,1),(4089,'wc','BookStack\\Page',2,2),(4090,'-l','BookStack\\Page',2,2),(4091,'ip=$','BookStack\\Page',2,1),(4092,'hostname','BookStack\\Page',2,1),(4093,'-I','BookStack\\Page',2,1),(4094,'$HOSTEXISTS','BookStack\\Page',2,1),(4095,'-eq','BookStack\\Page',2,2),(4096,'$ip','BookStack\\Page',2,1),(4097,'/etc/hosts\r','BookStack\\Page',2,1),(4098,'systemctl','BookStack\\Page',2,1),(4099,'reload','BookStack\\Page',2,1),(4100,'nginx\r','BookStack\\Page',2,1),(4101,'Updating','BookStack\\Page',2,1),(4102,'database\r','BookStack\\Page',2,1),(4103,'updatedb\r','BookStack\\Page',2,1),(4104,'Creating','BookStack\\Page',2,1),(4105,'new','BookStack\\Page',2,1),(4106,'superuser\r','BookStack\\Page',2,1),(4107,'useradd','BookStack\\Page',2,1),(4108,'-m','BookStack\\Page',2,1),(4109,'davy','BookStack\\Page',2,3),(4110,'--shell','BookStack\\Page',2,1),(4111,'without','BookStack\\Page',2,1),(4112,'-e','BookStack\\Page',2,2),(4113,'-n','BookStack\\Page',2,3),(4114,'root\\nroot','BookStack\\Page',2,2),(4115,'passwd','BookStack\\Page',2,2),(4116,'P@ssword\r','BookStack\\Page',2,1),(4117,'davy\r','BookStack\\Page',2,4),(4118,'usermod','BookStack\\Page',2,4),(4119,'-aG','BookStack\\Page',2,2),(4120,'10000','BookStack\\Page',2,2),(4121,'groupmod','BookStack\\Page',2,1),(4122,'-g','BookStack\\Page',2,1),(4123,'esgi\r','BookStack\\Page',2,1),(4124,'#Secure','BookStack\\Page',2,1),(4125,'Grub\r','BookStack\\Page',2,1),(4126,'/etc/grub','BookStack\\Page',2,5),(4127,'d\r','BookStack\\Page',2,1),(4128,'/home/esgi/','BookStack\\Page',2,1),(4129,'HASH=$','BookStack\\Page',2,1),(4130,'|grub-mkpasswd-pbkdf2','BookStack\\Page',2,1),(4131,'|grep','BookStack\\Page',2,1),(4132,'hachage|cut','BookStack\\Page',2,1),(4133,'-d','BookStack\\Page',2,1),(4134,'-f9','BookStack\\Page',2,1),(4135,'EOF','BookStack\\Page',2,2),(4136,'d/00_header\r','BookStack\\Page',2,4),(4137,'set','BookStack\\Page',2,1),(4138,'superusers=','BookStack\\Page',2,1),(4139,'password_pbkdf2','BookStack\\Page',2,1),(4140,'$HASH','BookStack\\Page',2,1),(4141,'update-grub\r','BookStack\\Page',2,1),(4142,'#Extend','BookStack\\Page',2,1),(4143,'lv_home','BookStack\\Page',2,1),(4144,'+2G\r','BookStack\\Page',2,1),(4145,'lvextend','BookStack\\Page',2,1),(4146,'+2G','BookStack\\Page',2,1),(4147,'-r','BookStack\\Page',2,1),(4148,'/dev/VGCRYPT/lv_home\r','BookStack\\Page',2,1),(4149,'SWAPEXISTS=$','BookStack\\Page',2,1),(4150,'lsblk','BookStack\\Page',2,1),(4151,'lv_swap','BookStack\\Page',2,2),(4152,'if','BookStack\\Page',2,1),(4153,'$SWAPEXISTS','BookStack\\Page',2,1),(4154,'then\r','BookStack\\Page',2,1),(4155,'lvcreate','BookStack\\Page',2,1),(4156,'500m','BookStack\\Page',2,1),(4157,'VGCRYPT\r','BookStack\\Page',2,1),(4158,'mkswap','BookStack\\Page',2,1),(4159,'/dev/VGCRYPT/lv_swap\r','BookStack\\Page',2,2),(4160,'/dev/VGCRYPT/lv_swap','BookStack\\Page',2,1),(4161,'swap','BookStack\\Page',2,2),(4162,'defaults','BookStack\\Page',2,1),(4163,'|sudo','BookStack\\Page',2,1),(4164,'-a','BookStack\\Page',2,1),(4165,'/etc/fstab\r','BookStack\\Page',2,1),(4166,'swapon','BookStack\\Page',2,1),(4167,'fi\r','BookStack\\Page',2,1),(4168,'Disable','BookStack\\Page',2,1),(4169,'account\r','BookStack\\Page',2,1),(4170,'/usr/sbin/nologin','BookStack\\Page',2,1),(4171,'root\r','BookStack\\Page',2,1),(4172,'reboot\r','BookStack\\Page',2,1),(4173,' ','BookStack\\Page',2,1);
/*!40000 ALTER TABLE `search_terms` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `sessions`
--

DROP TABLE IF EXISTS `sessions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `sessions` (
  `id` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `user_id` int(11) DEFAULT NULL,
  `ip_address` varchar(45) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `user_agent` text COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `payload` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `last_activity` int(11) NOT NULL,
  UNIQUE KEY `sessions_id_unique` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `sessions`
--

LOCK TABLES `sessions` WRITE;
/*!40000 ALTER TABLE `sessions` DISABLE KEYS */;
/*!40000 ALTER TABLE `sessions` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `settings`
--

DROP TABLE IF EXISTS `settings`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `settings` (
  `setting_key` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `value` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `type` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'string',
  PRIMARY KEY (`setting_key`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `settings`
--

LOCK TABLES `settings` WRITE;
/*!40000 ALTER TABLE `settings` DISABLE KEYS */;
INSERT INTO `settings` VALUES ('user:1:dark-mode-enabled','false','2021-11-04 16:50:11','2021-11-04 16:50:12','string'),('user:1:section_expansion#home-details','false','2021-11-04 16:50:13','2021-11-04 16:50:14','string');
/*!40000 ALTER TABLE `settings` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `social_accounts`
--

DROP TABLE IF EXISTS `social_accounts`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `social_accounts` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `driver` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `driver_id` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `avatar` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `social_accounts_user_id_index` (`user_id`),
  KEY `social_accounts_driver_index` (`driver`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `social_accounts`
--

LOCK TABLES `social_accounts` WRITE;
/*!40000 ALTER TABLE `social_accounts` DISABLE KEYS */;
/*!40000 ALTER TABLE `social_accounts` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tags`
--

DROP TABLE IF EXISTS `tags`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tags` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `entity_id` int(11) NOT NULL,
  `entity_type` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `name` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `value` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `order` int(11) NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `tags_name_index` (`name`),
  KEY `tags_value_index` (`value`),
  KEY `tags_order_index` (`order`),
  KEY `tags_entity_id_entity_type_index` (`entity_id`,`entity_type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tags`
--

LOCK TABLES `tags` WRITE;
/*!40000 ALTER TABLE `tags` DISABLE KEYS */;
/*!40000 ALTER TABLE `tags` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `user_invites`
--

DROP TABLE IF EXISTS `user_invites`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `user_invites` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `token` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `user_invites_user_id_index` (`user_id`),
  KEY `user_invites_token_index` (`token`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `user_invites`
--

LOCK TABLES `user_invites` WRITE;
/*!40000 ALTER TABLE `user_invites` DISABLE KEYS */;
INSERT INTO `user_invites` VALUES (1,3,'dPMwWLLl25nlHtIA1ykgwiU9','2021-11-04 16:47:50','2021-11-04 16:47:50');
/*!40000 ALTER TABLE `user_invites` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `users`
--

DROP TABLE IF EXISTS `users`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `users` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `email` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `password` varchar(60) COLLATE utf8mb4_unicode_ci NOT NULL,
  `remember_token` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `email_confirmed` tinyint(1) NOT NULL DEFAULT 1,
  `image_id` int(11) NOT NULL DEFAULT 0,
  `external_auth_id` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `system_name` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `slug` varchar(180) COLLATE utf8mb4_unicode_ci NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `users_email_unique` (`email`),
  UNIQUE KEY `users_slug_unique` (`slug`),
  KEY `users_external_auth_id_index` (`external_auth_id`),
  KEY `users_system_name_index` (`system_name`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `users`
--

LOCK TABLES `users` WRITE;
/*!40000 ALTER TABLE `users` DISABLE KEYS */;
INSERT INTO `users` VALUES (1,'Admin','admin@admin.com','$2y$10$rPPGB0liRfE0fiO5SZ2MzugvRKGnTMb.dHh5mzHihW1VzVARjfnf6',NULL,'2021-11-04 16:24:41','2021-11-04 16:24:41',1,0,'',NULL,'admin'),(2,'Guest','guest@example.com','',NULL,'2021-11-04 16:24:57','2021-11-04 16:24:57',1,0,'','public','guest'),(3,'davy','davy@esgi.local','$2y$10$0YFI5MBL6GOB7A1LUUwsAOyjE9KjrnstUdRS3e2qtBnSkA3omy41.',NULL,'2021-11-04 16:47:49','2021-11-04 16:47:49',1,0,'',NULL,'davy');
/*!40000 ALTER TABLE `users` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `views`
--

DROP TABLE IF EXISTS `views`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `views` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `viewable_id` int(11) NOT NULL,
  `viewable_type` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `views` int(11) NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `views_user_id_index` (`user_id`),
  KEY `views_viewable_id_index` (`viewable_id`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `views`
--

LOCK TABLES `views` WRITE;
/*!40000 ALTER TABLE `views` DISABLE KEYS */;
INSERT INTO `views` VALUES (1,1,1,'BookStack\\Bookshelf',15,'2021-11-04 16:49:16','2021-11-13 13:06:07'),(2,1,1,'BookStack\\Book',17,'2021-11-04 16:49:37','2021-11-13 13:00:32'),(3,1,2,'BookStack\\Book',10,'2021-11-04 16:49:50','2021-11-13 13:06:08'),(4,1,3,'BookStack\\Book',8,'2021-11-04 16:49:58','2021-11-13 13:04:46'),(5,1,1,'BookStack\\Page',20,'2021-11-04 16:53:35','2021-11-13 13:00:42'),(6,1,2,'BookStack\\Page',19,'2021-11-04 17:09:12','2021-11-13 13:06:09');
/*!40000 ALTER TABLE `views` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2021-11-13 15:08:09
